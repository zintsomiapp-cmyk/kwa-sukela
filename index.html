<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zintsomi ‚Äî Africa's Oral Heritage Platform</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,600;0,700;1,300;1,600&family=Syne:wght@400;600;700;800&family=DM+Sans:wght@300;400;500&family=JetBrains+Mono:wght@300;400&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<style>
:root{
  --ink:#1B2A3A;--ink2:#22344A;--white:#fff;--paper:#F7FAFC;
  --orange:#CA5C08;--ora-l:#E87218;--ora-xl:#F5A040;
  --blue:#1A6EA8;--blu-l:#2E8FCC;--sky:#E8F5FF;
  --green:#1E8449;--gold:#E6B32A;--red:#C0392B;
  --n1:#C0392B;--n2:#E6B32A;--n3:#1B2A3A;--n4:#1E8449;--n6:#CA5C08;--n7:#2E8FCC;
  --bd:rgba(27,42,58,.1);--i60:rgba(27,42,58,.6);--i35:rgba(27,42,58,.35);
}
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
html{scroll-behavior:smooth}
body{background:#fff;color:var(--ink);font-family:'DM Sans',sans-serif;overflow-x:hidden;-webkit-font-smoothing:antialiased}
#intro{position:fixed;inset:0;z-index:9999;background:#02050e;display:flex;align-items:center;justify-content:center;flex-direction:column;transition:opacity 1.2s ease}
#intro.hide{opacity:0;pointer-events:none}
#intro-canvas{position:absolute;inset:0;width:100%;height:100%}
#intro-logo{position:relative;z-index:2;text-align:center;opacity:0;transform:translateY(30px);transition:opacity 1.4s ease,transform 1.4s ease}
#intro-logo.show{opacity:1;transform:none}
#intro-logo h1{font-family:'Cormorant Garamond',serif;font-size:clamp(2.8rem,6vw,5rem);font-weight:700;color:#fff;letter-spacing:-.02em;line-height:.9}
#intro-logo h1 em{font-style:italic;color:#F5A040}
#intro-logo p{font-family:'JetBrains Mono',monospace;font-size:.58rem;letter-spacing:.28em;text-transform:uppercase;color:rgba(255,255,255,.38);margin-top:.9rem}
#skip-btn{position:absolute;bottom:1.8rem;right:1.8rem;z-index:3;font-family:'JetBrains Mono',monospace;font-size:.54rem;letter-spacing:.14em;text-transform:uppercase;color:rgba(255,255,255,.28);border:1px solid rgba(255,255,255,.14);padding:.38rem .9rem;border-radius:2px;cursor:pointer;background:none;transition:color .2s,border-color .2s}
#skip-btn:hover{color:#fff;border-color:rgba(255,255,255,.5)}
#site{opacity:0;transition:opacity .9s ease}
#site.show{opacity:1}
nav{position:sticky;top:0;z-index:500;background:rgba(255,255,255,.97);backdrop-filter:blur(16px);border-bottom:1px solid var(--bd)}
.nstrip{height:5px;background:repeating-linear-gradient(90deg,var(--n1) 0,var(--n1) 14.28%,var(--n2) 14.28%,var(--n2) 28.57%,var(--n3) 28.57%,var(--n3) 42.85%,var(--n4) 42.85%,var(--n4) 57.14%,#fff 57.14%,#fff 71.42%,var(--n6) 71.42%,var(--n6) 85.71%,var(--n7) 85.71%,var(--n7) 100%)}
.nav-w{max-width:1280px;margin:0 auto;padding:.65rem 2rem;display:flex;justify-content:space-between;align-items:center;gap:1rem}
.logo{font-family:'Cormorant Garamond',serif;font-weight:700;font-size:1.2rem;color:var(--ink);text-decoration:none;cursor:pointer}
.logo em{color:var(--orange);font-style:italic}
.nav-pills{display:flex;gap:.3rem;flex-wrap:wrap}
.npill{font-family:'Syne',sans-serif;font-size:.58rem;font-weight:700;letter-spacing:.09em;text-transform:uppercase;padding:.36rem .82rem;border-radius:20px;border:1.5px solid var(--bd);color:var(--i60);cursor:pointer;transition:all .2s;background:none}
.npill:hover,.npill.active{background:var(--orange);color:#fff;border-color:var(--orange)}
.npill.schools{border-color:var(--green);color:var(--green)}
.npill.schools:hover,.npill.schools.active{background:var(--green);color:#fff;border-color:var(--green)}
.world{display:none;animation:fadeIn .45s ease}
.world.active{display:block}
@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:none}}
.ctr{max-width:1280px;margin:0 auto;padding:0 2rem}
.sec{padding:4.5rem 0}
.sec-lbl{font-family:'JetBrains Mono',monospace;font-size:.54rem;letter-spacing:.26em;text-transform:uppercase;color:var(--i35);margin-bottom:.7rem;display:flex;align-items:center;gap:.6rem}
.sec-lbl::before{content:'';width:22px;height:1px;background:var(--orange)}
.sec-title{font-family:'Cormorant Garamond',serif;font-size:clamp(2rem,4vw,3.1rem);font-weight:700;color:var(--ink);line-height:1;letter-spacing:-.02em;margin-bottom:.5rem}
.sec-title em{font-style:italic;color:var(--orange)}
.sec-sub{font-size:.9rem;color:var(--i60);line-height:1.85;max-width:520px;font-weight:300;margin-bottom:1.8rem}
.btn{display:inline-flex;align-items:center;gap:.45rem;font-family:'Syne',sans-serif;font-size:.61rem;font-weight:700;letter-spacing:.1em;text-transform:uppercase;padding:.63rem 1.35rem;background:var(--orange);color:#fff;border:none;border-radius:2px;cursor:pointer;transition:all .2s;text-decoration:none}
.btn:hover{background:var(--ora-l);transform:translateY(-2px)}
.btn-out{background:transparent;color:var(--ink);border:1.5px solid var(--bd)}
.btn-out:hover{border-color:var(--orange);color:var(--orange);transform:translateY(-2px)}
.btn-grn{background:var(--green)}.btn-grn:hover{background:#27ae60}
.btn-blu{background:var(--blue)}.btn-blu:hover{background:var(--blu-l)}

/* HOME */
.home-hero{min-height:82vh;display:grid;grid-template-columns:1fr 1fr;background:var(--ink2);overflow:hidden}
.home-hero-l{padding:6rem 3.5rem 5rem;display:flex;flex-direction:column;justify-content:center}
.home-hero-tag{font-family:'JetBrains Mono',monospace;font-size:.54rem;letter-spacing:.2em;text-transform:uppercase;color:#F5A040;margin-bottom:1.2rem}
.home-hero h1{font-family:'Cormorant Garamond',serif;font-size:clamp(3rem,5vw,5.2rem);font-weight:300;line-height:.92;color:#fff;margin-bottom:1.2rem}
.home-hero h1 strong{font-weight:700;display:block}
.home-hero h1 em{font-style:italic;color:#F5A040}
.home-hero-sub{font-size:.92rem;color:rgba(255,255,255,.48);line-height:1.85;max-width:400px;margin-bottom:2rem;font-weight:300}
.worlds-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:1px;background:rgba(255,255,255,.07);margin-top:3rem}
.world-card{background:var(--ink2);padding:1.8rem 1.5rem;cursor:pointer;transition:background .2s;position:relative;overflow:hidden}
.world-card::after{content:'';position:absolute;bottom:0;left:0;right:0;height:3px;background:linear-gradient(90deg,var(--orange),#F5A040);transform:scaleX(0);transform-origin:left;transition:transform .3s}
.world-card:hover{background:var(--ink)}.world-card:hover::after{transform:scaleX(1)}
.wc-icon{font-size:1.8rem;margin-bottom:.7rem}
.wc-name{font-family:'Syne',sans-serif;font-size:.83rem;font-weight:700;color:#fff;margin-bottom:.35rem}
.wc-sub{font-size:.77rem;color:rgba(255,255,255,.32);line-height:1.58}
.wc-tag{font-family:'JetBrains Mono',monospace;font-size:.47rem;letter-spacing:.07em;text-transform:uppercase;color:#F5A040;margin-top:.55rem}
.home-hero-r{background:linear-gradient(160deg,#08111f,#1A507A,#0d1f32);display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden;min-height:300px}
.hero-quote{position:relative;z-index:2;text-align:center;padding:3rem 2.5rem}
.hero-quote blockquote{font-family:'Cormorant Garamond',serif;font-size:1.75rem;font-style:italic;color:rgba(255,255,255,.85);line-height:1.38;margin-bottom:1.2rem}
.hero-quote cite{font-family:'JetBrains Mono',monospace;font-size:.53rem;letter-spacing:.1em;color:#F5A040}
.firefly{position:absolute;border-radius:50%;background:#FFD700;animation:ff linear infinite}
@keyframes ff{0%{opacity:0;transform:translate(0,0)}20%{opacity:1}80%{opacity:.5}100%{opacity:0;transform:translate(var(--tx),var(--ty))}}

/* WALL */
.wall-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:1rem;margin-top:1.8rem}
.wall-post{background:rgba(255,255,255,.04);border-radius:6px;padding:1.1rem;border:1px solid rgba(255,255,255,.07);transition:border-color .2s}
.wall-post:hover{border-color:rgba(202,92,8,.3)}
.wp-type{font-family:'JetBrains Mono',monospace;font-size:.46rem;letter-spacing:.1em;text-transform:uppercase;padding:.17rem .48rem;border-radius:2px;width:fit-content;margin-bottom:.55rem;display:block}
.wp-music{background:rgba(202,92,8,.1);color:#F5A040;border:1px solid rgba(202,92,8,.2)}
.wp-story{background:rgba(26,110,168,.1);color:#64B5E8;border:1px solid rgba(26,110,168,.2)}
.wp-achieve{background:rgba(30,132,73,.1);color:#6EE78E;border:1px solid rgba(30,132,73,.2)}
.wp-name{font-family:'Syne',sans-serif;font-size:.76rem;font-weight:700;color:#fff;margin-bottom:.2rem}
.wp-content{font-size:.78rem;color:rgba(255,255,255,.38);line-height:1.55}
.wp-meta{font-family:'JetBrains Mono',monospace;font-size:.46rem;letter-spacing:.03em;color:rgba(255,255,255,.2);margin-top:.55rem}

/* SAVANNAH GAMES */
.savannah-hero{position:relative;height:320px;overflow:hidden;display:flex;align-items:flex-end;justify-content:center}
.sv-sky{position:absolute;inset:0;background:linear-gradient(180deg,#0a1220 0%,#1a2040 15%,#6B2000 50%,#E85000 72%,#FFB000 88%,#FF7000 100%)}
.sv-sun{position:absolute;bottom:85px;left:50%;transform:translateX(-50%);width:78px;height:78px;border-radius:50%;background:radial-gradient(circle,#FFF176,#FFD700 40%,#FF8C00 70%,transparent 100%);box-shadow:0 0 50px 25px rgba(255,160,0,.5),0 0 100px 50px rgba(255,80,0,.22);animation:sunpulse 3.5s ease-in-out infinite}
@keyframes sunpulse{0%,100%{box-shadow:0 0 50px 25px rgba(255,160,0,.5),0 0 100px 50px rgba(255,80,0,.22)}50%{box-shadow:0 0 70px 35px rgba(255,160,0,.6),0 0 130px 70px rgba(255,80,0,.28)}}
.sv-ground{position:absolute;bottom:0;left:0;right:0;height:95px;background:linear-gradient(180deg,#3a1800,#200e00)}
.sv-title{position:relative;z-index:2;text-align:center;padding-bottom:1.8rem}
.sv-title h2{font-family:'Cormorant Garamond',serif;font-size:clamp(2.4rem,5vw,3.8rem);font-weight:700;color:#FFD700;text-shadow:0 2px 20px rgba(0,0,0,.8);letter-spacing:-.02em}
.sv-title p{font-family:'JetBrains Mono',monospace;font-size:.53rem;letter-spacing:.18em;text-transform:uppercase;color:rgba(255,215,0,.55);margin-top:.35rem}
.ndebele-border{height:11px;background:repeating-linear-gradient(90deg,#C0392B 0,#C0392B 11%,#E6B32A 11%,#E6B32A 22%,#1B2A3A 22%,#1B2A3A 33%,#1E8449 33%,#1E8449 44%,#fff 44%,#fff 55%,#CA5C08 55%,#CA5C08 66%,#2E8FCC 66%,#2E8FCC 77%,#C0392B 77%,#C0392B 88%,#E6B32A 88%,#E6B32A 100%)}
.games-body{background:#f5efe6;padding:2.5rem 0}
.games-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:1.4rem;margin-top:2rem}
.game-tile{background:#fff;border-radius:8px;overflow:hidden;box-shadow:0 3px 18px rgba(139,69,19,.1);cursor:pointer;transition:transform .22s,box-shadow .22s,border-color .22s;border:2px solid transparent}
.game-tile:hover{transform:translateY(-4px);box-shadow:0 10px 36px rgba(139,69,19,.18);border-color:var(--orange)}
.game-tile-hero{height:150px;display:flex;align-items:center;justify-content:center}
.gt-mancala{background:linear-gradient(135deg,#3d1c00,#6B3A1F,#8B5E3C)}
.gt-diketo{background:linear-gradient(135deg,#0d2035,#1A507A,#2E8FCC)}
.gt-kgati{background:linear-gradient(135deg,#1B3A1B,#1E8449,#27AE60)}
.gt-ncuva{background:linear-gradient(135deg,#2C1654,#7B2D8B,#9B59B6)}
.game-tile-body{padding:1.3rem}
.gt-tag{font-family:'JetBrains Mono',monospace;font-size:.47rem;letter-spacing:.1em;text-transform:uppercase;padding:.18rem .55rem;border-radius:2px;background:rgba(202,92,8,.08);color:var(--orange);border:1px solid rgba(202,92,8,.18);width:fit-content;margin-bottom:.55rem}
.gt-name{font-family:'Cormorant Garamond',serif;font-size:1.25rem;font-weight:700;color:var(--ink);margin-bottom:.28rem}
.gt-origin{font-family:'JetBrains Mono',monospace;font-size:.5rem;letter-spacing:.05em;color:var(--i35);margin-bottom:.45rem}
.gt-desc{font-size:.8rem;color:var(--i60);line-height:1.62}
.gt-stats{display:flex;gap:.9rem;margin-top:.85rem;padding-top:.85rem;border-top:1px solid var(--bd)}
.gt-stat{font-family:'JetBrains Mono',monospace;font-size:.5rem;letter-spacing:.03em;color:var(--i35)}
.gt-stat strong{color:var(--orange);font-size:.7rem}

/* GAME OVERLAY */
.game-overlay{display:none;position:fixed;inset:0;z-index:800;background:rgba(0,0,0,.9);align-items:center;justify-content:center;padding:1rem}
.game-overlay.open{display:flex}
.game-modal{background:#1a0a00;border-radius:8px;width:100%;max-width:680px;max-height:90vh;overflow-y:auto;border:2px solid var(--orange)}
.gm-header{background:linear-gradient(135deg,#3d1c00,#6B3A1F);padding:1.1rem 1.4rem;display:flex;justify-content:space-between;align-items:center;border-bottom:2px solid var(--orange);position:sticky;top:0;z-index:2}
.gm-title{font-family:'Cormorant Garamond',serif;font-size:1.35rem;font-weight:700;color:#FFD700}
.gm-close{background:none;border:none;color:rgba(255,255,255,.5);font-size:1.3rem;cursor:pointer;padding:.2rem .5rem;line-height:1;transition:color .2s}
.gm-close:hover{color:#fff}
.gm-body{padding:1.4rem}
.gm-score-bar{display:flex;justify-content:space-around;background:rgba(255,255,255,.04);border-radius:4px;padding:.7rem 1rem;margin-bottom:1.1rem;border:1px solid rgba(255,255,255,.07)}
.gm-score-item{text-align:center}
.gm-score-item span{display:block;font-family:'JetBrains Mono',monospace;font-size:.48rem;letter-spacing:.09em;text-transform:uppercase;color:rgba(255,255,255,.3)}
.gm-score-item strong{font-family:'Cormorant Garamond',serif;font-size:1.5rem;font-weight:700;color:#F5A040}

/* MANCALA */
.mancala-board{background:linear-gradient(135deg,#2a1200,#4a2000);border-radius:10px;padding:1.3rem;border:3px solid #8B5E3C}
.mancala-row{display:flex;align-items:center;gap:.45rem;margin:.35rem 0}
.mancala-store{width:56px;height:110px;border-radius:28px;background:linear-gradient(180deg,#5a3000,#3a1a00);border:2px solid #8B5E3C;display:flex;align-items:center;justify-content:center;flex-direction:column;gap:.15rem}
.mancala-store strong{font-family:'Cormorant Garamond',serif;font-size:1.7rem;font-weight:700;color:#FFD700}
.mancala-store span{font-family:'JetBrains Mono',monospace;font-size:.4rem;letter-spacing:.04em;color:rgba(255,255,255,.35)}
.mancala-pits{display:flex;gap:.42rem;flex:1;justify-content:center}
.mancala-pit{width:48px;height:48px;border-radius:50%;background:linear-gradient(135deg,#5a3000,#3a1a00);border:2px solid #8B5E3C;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .18s;font-family:'Cormorant Garamond',serif;font-size:1.2rem;font-weight:700;color:#FFD700;position:relative}
.mancala-pit:hover{background:linear-gradient(135deg,#7a4500,#5a2500);transform:scale(1.08);border-color:var(--orange)}
.mancala-pit.disabled{cursor:default;opacity:.5}
.mancala-seeds{display:flex;flex-wrap:wrap;gap:2px;justify-content:center;align-items:center;width:32px}
.seed{width:5px;height:5px;border-radius:50%}
.seed.p1{background:#E6B32A}.seed.p2{background:#2E8FCC}
.mancala-lbl{font-family:'JetBrains Mono',monospace;font-size:.46rem;letter-spacing:.06em;text-transform:uppercase;color:rgba(255,255,255,.3);text-align:center;margin:.25rem 0}
.game-msg{font-family:'Cormorant Garamond',serif;font-size:.95rem;font-style:italic;color:#F5A040;text-align:center;margin:.9rem 0;min-height:1.4rem}

/* DIKETO */
.diketo-seq{display:flex;gap:.48rem;justify-content:center;margin:1rem 0;flex-wrap:wrap}
.dseq-item{width:42px;height:42px;border-radius:50%;border:2px solid rgba(255,255,255,.18);display:flex;align-items:center;justify-content:center;font-size:1.1rem;transition:all .25s}
.dseq-item.active{border-color:#FFD700;background:rgba(255,215,0,.15);transform:scale(1.2)}
.dseq-item.correct{border-color:#27AE60;background:rgba(39,174,96,.15)}
.diketo-tap-btn{width:112px;height:112px;border-radius:50%;background:linear-gradient(135deg,var(--orange),var(--ora-l));border:4px solid #FFD700;cursor:pointer;font-family:'Syne',sans-serif;font-size:.68rem;font-weight:700;letter-spacing:.09em;color:#fff;transition:all .14s;margin:1rem auto;display:block;box-shadow:0 0 18px rgba(255,165,0,.28)}
.diketo-tap-btn:active{transform:scale(.92)}

/* KGATI */
.kgati-rope-area{position:relative;height:160px;overflow:hidden;border-radius:6px;background:rgba(0,0,0,.3);margin:1rem 0}
.kgati-rope{position:absolute;left:0;right:0;top:48%;height:4px;background:linear-gradient(90deg,#8B5E3C,#FFD700,#8B5E3C);border-radius:2px;animation:ropeSwing 1s ease-in-out infinite}
@keyframes ropeSwing{0%,100%{transform:rotate(-4deg) scaleY(1)}50%{transform:rotate(4deg) scaleY(1.8)}}
.kgati-jumper{position:absolute;bottom:18px;left:50%;transform:translateX(-50%);font-size:2.2rem;transition:bottom .18s}
.kgati-jumper.jump{bottom:90px}
.kgati-pattern{display:flex;gap:.5rem;justify-content:center;margin:.8rem 0;flex-wrap:wrap}
.kp-item{padding:.38rem .82rem;border-radius:4px;border:2px solid rgba(255,255,255,.14);font-family:'Syne',sans-serif;font-size:.62rem;font-weight:700;letter-spacing:.07em;color:rgba(255,255,255,.55);cursor:pointer;transition:all .18s}
.kp-item:hover,.kp-item.sel{border-color:#FFD700;background:rgba(255,215,0,.09);color:#FFD700}

/* NCUVA */
.ncuva-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:.48rem;margin:1rem auto;max-width:272px}
.ncuva-cell{aspect-ratio:1;border-radius:6px;background:rgba(255,255,255,.04);border:2px solid rgba(255,255,255,.09);cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:1.3rem;transition:all .25s}
.ncuva-cell:hover{border-color:rgba(255,255,255,.28)}
.ncuva-cell.lit{border-color:#FFD700;background:rgba(255,215,0,.18);box-shadow:0 0 10px rgba(255,215,0,.28)}
.ncuva-cell.correct{border-color:#27AE60;background:rgba(39,174,96,.18)}
.ncuva-cell.wrong{border-color:#E74C3C;background:rgba(231,76,60,.18)}

/* INSTRUMENTS */
.inst-hero{background:linear-gradient(160deg,#0d1117,#1a2744,#0d2a1a);padding:4.5rem 0 2.5rem;text-align:center;position:relative;overflow:hidden}
.inst-hero::before{content:'';position:absolute;inset:0;background:radial-gradient(ellipse at 30% 50%,rgba(202,92,8,.07),transparent 55%),radial-gradient(ellipse at 70% 30%,rgba(26,110,168,.07),transparent 55%)}
.inst-hero h2{font-family:'Cormorant Garamond',serif;font-size:clamp(2.4rem,5vw,3.8rem);font-weight:700;color:#fff;letter-spacing:-.02em;position:relative;z-index:2}
.inst-hero h2 em{font-style:italic;color:#F5A040}
.inst-hero p{font-size:.9rem;color:rgba(255,255,255,.4);max-width:480px;margin:.7rem auto 0;line-height:1.85;position:relative;z-index:2}
.studio{display:grid;grid-template-columns:1fr 300px;gap:2rem;align-items:start;padding:2.5rem 0}
.inst-selector{display:grid;grid-template-columns:repeat(2,1fr);gap:.9rem;margin-bottom:1.8rem}
.inst-btn{background:rgba(255,255,255,.04);border:2px solid rgba(255,255,255,.07);border-radius:8px;padding:1.1rem;cursor:pointer;transition:all .22s;text-align:center}
.inst-btn:hover,.inst-btn.active{border-color:var(--orange);background:rgba(202,92,8,.07)}
.inst-emoji{font-size:2rem;display:block;margin-bottom:.42rem}
.inst-name{font-family:'Syne',sans-serif;font-size:.68rem;font-weight:700;color:#fff;letter-spacing:.07em;text-transform:uppercase;display:block}
.inst-origin{font-family:'JetBrains Mono',monospace;font-size:.48rem;letter-spacing:.05em;color:rgba(255,255,255,.28);margin-top:.18rem;display:block}
.inst-play-area{background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.07);border-radius:10px;padding:1.6rem;min-height:280px}
.inst-play-title{font-family:'Cormorant Garamond',serif;font-size:1.4rem;font-weight:700;color:#fff;margin-bottom:.35rem}
.inst-play-sub{font-size:.79rem;color:rgba(255,255,255,.32);margin-bottom:1.4rem;line-height:1.58}
.djembe-pads{display:grid;grid-template-columns:repeat(4,1fr);gap:.55rem}
.drum-pad{aspect-ratio:1;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:.58rem;font-family:'Syne',sans-serif;font-weight:700;letter-spacing:.05em;color:#fff;border:3px solid transparent;transition:all .1s;user-select:none;text-transform:uppercase}
.drum-pad:active,.drum-pad.hit{transform:scale(.91);filter:brightness(1.35)}
.dp1{background:linear-gradient(135deg,#5D1A00,#8B2500)}.dp2{background:linear-gradient(135deg,#1A3A5D,#1A6EA8)}
.dp3{background:linear-gradient(135deg,#1A3D1A,#1E8449)}.dp4{background:linear-gradient(135deg,#4D2A00,#7A4500)}
.dp5{background:linear-gradient(135deg,#3D0A2A,#8B1A4A)}.dp6{background:linear-gradient(135deg,#2A1A00,#5A3A00)}
.dp7{background:linear-gradient(135deg,#001A3D,#003D8A)}.dp8{background:linear-gradient(135deg,#1A001A,#5A0A5A)}
.mbira-keys{display:flex;gap:3px;align-items:flex-end;justify-content:center;height:170px;padding:.8rem 0}
.mbira-key{flex:1;max-width:34px;border-radius:4px 4px 8px 8px;cursor:pointer;transition:all .1s;position:relative;border:2px solid rgba(255,255,255,.09)}
.mbira-key:hover,.mbira-key:active,.mbira-key.hit{filter:brightness(1.6);transform:scaleY(.94);transform-origin:top}
.mkey-label{position:absolute;bottom:4px;left:50%;transform:translateX(-50%);font-family:'JetBrains Mono',monospace;font-size:.38rem;color:rgba(255,255,255,.45);white-space:nowrap}
.hosho-area{display:flex;flex-direction:column;align-items:center;gap:1.2rem;padding:.8rem}
.hosho-gourd{width:110px;height:130px;border-radius:50% 50% 40% 40%;background:radial-gradient(circle at 35% 30%,#D4A056,#8B6914,#5A4008);border:3px solid #6B4F12;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:2.8rem;transition:all .12s;box-shadow:0 7px 20px rgba(0,0,0,.38)}
.hosho-gourd:active,.hosho-gourd.shake{animation:hoshoShake .14s ease;filter:brightness(1.22)}
@keyframes hoshoShake{0%,100%{transform:rotate(0)}25%{transform:rotate(-14deg)}75%{transform:rotate(14deg)}}
.uhadi-strings{display:flex;gap:2rem;justify-content:center;align-items:stretch;height:190px;padding:.8rem}
.uhadi-string{display:flex;flex-direction:column;align-items:center;gap:.45rem;cursor:pointer}
.uhadi-stick{width:6px;flex:1;border-radius:3px;transition:all .12s;position:relative}
.uhadi-stick:hover,.uhadi-stick:active,.uhadi-stick.pluck{animation:uhadiPluck .28s ease;filter:brightness(1.5)}
@keyframes uhadiPluck{0%,100%{transform:scaleX(1)}50%{transform:scaleX(1.7)}}
.uhadi-label{font-family:'JetBrains Mono',monospace;font-size:.48rem;letter-spacing:.04em;color:rgba(255,255,255,.35)}
.recorder-panel{background:rgba(0,0,0,.42);border:1px solid rgba(255,255,255,.07);border-radius:10px;padding:1.4rem;position:sticky;top:76px}
.rec-title{font-family:'Syne',sans-serif;font-size:.68rem;font-weight:700;letter-spacing:.09em;text-transform:uppercase;color:#fff;margin-bottom:.9rem}
.rec-btn-main{width:60px;height:60px;border-radius:50%;background:#C0392B;border:4px solid rgba(255,255,255,.18);cursor:pointer;margin:0 auto .9rem;display:block;position:relative;transition:all .2s}
.rec-btn-main::after{content:'';position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:18px;height:18px;border-radius:50%;background:#fff}
.rec-btn-main.recording{animation:recPulse 1s ease-in-out infinite;border-color:rgba(255,0,0,.48)}
@keyframes recPulse{0%,100%{box-shadow:0 0 0 0 rgba(255,0,0,.35)}50%{box-shadow:0 0 0 10px rgba(255,0,0,0)}}
.rec-btn-main.recording::after{border-radius:3px;width:15px;height:15px}
.rec-status{font-family:'JetBrains Mono',monospace;font-size:.5rem;letter-spacing:.09em;text-transform:uppercase;color:rgba(255,255,255,.28);text-align:center;margin-bottom:.9rem}
.rec-timeline{height:38px;background:rgba(255,255,255,.03);border-radius:4px;margin-bottom:.9rem;overflow:hidden;position:relative;border:1px solid rgba(255,255,255,.05)}
.rec-wave{height:100%;display:flex;align-items:center;gap:2px;padding:0 3px}
.rec-bar{width:3px;border-radius:2px;background:var(--orange)}
.rec-controls{display:flex;gap:.45rem}
.rec-ctrl{flex:1;padding:.46rem;background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.07);border-radius:4px;cursor:pointer;font-family:'JetBrains Mono',monospace;font-size:.46rem;letter-spacing:.05em;text-transform:uppercase;color:rgba(255,255,255,.38);transition:all .2s;text-align:center}
.rec-ctrl:hover{border-color:rgba(255,255,255,.18);color:#fff}
.rec-ctrl.active{border-color:var(--orange);color:var(--orange)}
.post-wall-btn{width:100%;margin-top:.7rem;padding:.65rem;background:linear-gradient(135deg,var(--orange),var(--ora-l));border:none;border-radius:4px;cursor:pointer;font-family:'Syne',sans-serif;font-size:.58rem;font-weight:700;letter-spacing:.09em;text-transform:uppercase;color:#fff;transition:opacity .2s}
.post-wall-btn:hover{opacity:.84}
.posted-notif{font-family:'JetBrains Mono',monospace;font-size:.48rem;letter-spacing:.05em;color:#27AE60;text-align:center;margin-top:.45rem;display:none}

/* BRAIN TEASERS */
.brain-hero{background:linear-gradient(135deg,var(--ink2),#1a3a5d);padding:4.5rem 0 2.8rem;position:relative;overflow:hidden;text-align:center}
.brain-hero::before{content:'';position:absolute;inset:0;opacity:.04;background-image:repeating-linear-gradient(45deg,transparent,transparent 19px,#E6B32A 19px,#E6B32A 20px),repeating-linear-gradient(-45deg,transparent,transparent 19px,#CA5C08 19px,#CA5C08 20px)}
.brain-hero h2{font-family:'Cormorant Garamond',serif;font-size:clamp(2.4rem,5vw,3.8rem);font-weight:700;color:#fff;position:relative;z-index:2}
.brain-hero h2 em{color:#F5A040;font-style:italic}
.brain-hero p{font-size:.88rem;color:rgba(255,255,255,.4);max-width:440px;margin:.7rem auto 0;line-height:1.85;position:relative;z-index:2}
.streak-bar{background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.09);border-radius:8px;padding:.9rem 1.4rem;display:flex;align-items:center;gap:1.4rem;max-width:480px;margin:1.8rem auto 0;position:relative;z-index:2}
.streak-fire{font-size:1.9rem}
.streak-info strong{font-family:'Cormorant Garamond',serif;font-size:1.7rem;font-weight:700;color:#FFD700;display:block;line-height:1}
.streak-info span{font-family:'JetBrains Mono',monospace;font-size:.48rem;letter-spacing:.09em;text-transform:uppercase;color:rgba(255,255,255,.32)}
.streak-dots{display:flex;gap:.35rem;margin-left:auto}
.sd{width:9px;height:9px;border-radius:50%;background:rgba(255,255,255,.12);border:1.5px solid rgba(255,255,255,.12)}
.sd.done{background:#FFD700;border-color:#FFD700}
.sd.today{background:var(--orange);border-color:var(--orange);box-shadow:0 0 5px rgba(202,92,8,.45)}
.puzzle-tabs{display:flex;gap:.45rem;flex-wrap:wrap;margin:2.2rem 0 1.8rem}
.ptab{font-family:'Syne',sans-serif;font-size:.58rem;font-weight:700;letter-spacing:.07em;text-transform:uppercase;padding:.46rem 1rem;border-radius:20px;border:1.5px solid var(--bd);color:var(--i60);cursor:pointer;transition:all .2s;background:#fff}
.ptab:hover,.ptab.active{background:var(--ink2);color:#fff;border-color:var(--ink2)}
.puzzle-stage{background:#fff;border-radius:10px;padding:2.2rem;box-shadow:0 3px 20px rgba(27,42,58,.07);min-height:300px;border:1px solid var(--bd)}
.puzzle-q{font-family:'Cormorant Garamond',serif;font-size:1.4rem;font-weight:300;color:var(--ink);line-height:1.38;margin-bottom:1.4rem}
.puzzle-q strong{font-weight:700;color:var(--orange)}
.puzzle-options{display:grid;grid-template-columns:1fr 1fr;gap:.65rem;margin-bottom:1.1rem}
.p-opt{padding:.85rem 1.1rem;border-radius:6px;border:2px solid var(--bd);background:#fff;cursor:pointer;font-size:.86rem;color:var(--ink);transition:all .18s;text-align:left;font-family:'DM Sans',sans-serif;line-height:1.38}
.p-opt:hover{border-color:var(--orange);background:rgba(202,92,8,.02)}
.p-opt.correct{border-color:#27AE60;background:rgba(39,174,96,.07);color:#1a6b3a}
.p-opt.wrong{border-color:#E74C3C;background:rgba(231,76,60,.05);color:#7B0000}
.p-opt.disabled{cursor:default}
.puzzle-result{padding:.9rem 1.2rem;border-radius:6px;font-size:.88rem;margin:.9rem 0;display:none;line-height:1.6}
.puzzle-result.correct{background:rgba(39,174,96,.07);border:1px solid rgba(39,174,96,.18);color:#1a6b3a}
.puzzle-result.wrong{background:rgba(231,76,60,.05);border:1px solid rgba(231,76,60,.18);color:#7B0000}
.maths-scenario{background:linear-gradient(135deg,rgba(26,110,168,.05),rgba(30,132,73,.03));border:1px solid rgba(26,110,168,.14);border-radius:7px;padding:1.1rem;margin-bottom:1.1rem;border-left:3px solid var(--blue)}
.ms-lbl{font-family:'JetBrains Mono',monospace;font-size:.48rem;letter-spacing:.1em;text-transform:uppercase;color:var(--blue);margin-bottom:.42rem}
.ms-story{font-size:.88rem;color:var(--i60);line-height:1.73;font-style:italic}
.drum-sequence{display:flex;gap:.55rem;justify-content:center;margin:1rem 0;flex-wrap:wrap}
.drum-beat{width:38px;height:38px;border-radius:7px;border:2px solid rgba(27,42,58,.1);display:flex;align-items:center;justify-content:center;font-size:1.1rem;transition:all .25s}
.drum-beat.active{border-color:var(--orange);background:rgba(202,92,8,.09);transform:scale(1.18)}
.puzzle-nav{display:flex;justify-content:space-between;align-items:center;margin-top:1.4rem;padding-top:1.4rem;border-top:1px solid var(--bd)}
.puzzle-pts{font-family:'JetBrains Mono',monospace;font-size:.52rem;letter-spacing:.09em;color:var(--orange)}

/* ANCESTOR TREE */
.tree-canvas-wrap{position:relative;height:100vh;min-height:580px;display:flex;flex-direction:column;align-items:center;justify-content:center;overflow:hidden;background:#020d1a}
#tree-canvas{position:absolute;inset:0;width:100%;height:100%}
.tree-ui{position:relative;z-index:2;text-align:center;pointer-events:none}
.tree-ui h2{font-family:'Cormorant Garamond',serif;font-size:clamp(1.8rem,4vw,2.8rem);font-weight:700;color:#fff;text-shadow:0 0 36px rgba(100,181,232,.38);margin-bottom:.45rem}
.tree-ui h2 em{font-style:italic;color:#64B5E8}
.tree-ui p{font-size:.84rem;color:rgba(255,255,255,.38);line-height:1.82;max-width:360px;margin:0 auto 1.4rem}
.tree-tooltip{background:rgba(2,13,26,.82);border:1px solid rgba(100,181,232,.18);border-radius:5px;padding:.65rem .95rem;font-size:.76rem;color:rgba(255,255,255,.55);max-width:270px;margin:.7rem auto;line-height:1.58;pointer-events:none}
.tree-actions{pointer-events:all;display:flex;gap:.7rem;justify-content:center;flex-wrap:wrap;margin-top:.9rem}
.tree-stat-bar{position:absolute;bottom:1.8rem;left:50%;transform:translateX(-50%);z-index:2;display:flex;gap:1.8rem;background:rgba(2,13,26,.72);border:1px solid rgba(100,181,232,.12);border-radius:7px;padding:.8rem 1.8rem;backdrop-filter:blur(8px)}
.ts-item{text-align:center}
.ts-item strong{font-family:'Cormorant Garamond',serif;font-size:1.7rem;font-weight:700;color:#64B5E8;display:block;line-height:1}
.ts-item span{font-family:'JetBrains Mono',monospace;font-size:.43rem;letter-spacing:.09em;text-transform:uppercase;color:rgba(255,255,255,.28)}
.leaf-popup{position:absolute;background:rgba(2,13,26,.9);border:1px solid rgba(100,181,232,.22);border-radius:5px;padding:.55rem .82rem;font-size:.73rem;color:#fff;pointer-events:none;z-index:3;display:none;max-width:155px;line-height:1.38;backdrop-filter:blur(6px)}
.leaf-popup strong{color:#64B5E8;display:block}

/* SCHOOLS */
.schools-hero{background:linear-gradient(135deg,#0d2a1a,#1E8449,#145A32);padding:4.5rem 0 2.8rem;position:relative;overflow:hidden;text-align:center}
.schools-hero::before{content:'';position:absolute;inset:0;opacity:.05;background-image:repeating-linear-gradient(0deg,transparent,transparent 28px,rgba(255,255,255,.8) 28px,rgba(255,255,255,.8) 29px),repeating-linear-gradient(90deg,transparent,transparent 28px,rgba(255,255,255,.8) 28px,rgba(255,255,255,.8) 29px);background-size:29px 29px}
.schools-hero h2{font-family:'Cormorant Garamond',serif;font-size:clamp(2.3rem,5vw,3.8rem);font-weight:700;color:#fff;position:relative;z-index:2}
.schools-hero h2 em{color:#86EFAC;font-style:italic}
.schools-hero p{font-size:.88rem;color:rgba(255,255,255,.48);max-width:490px;margin:.7rem auto 1.4rem;line-height:1.85;position:relative;z-index:2}
.grade-pills{display:flex;gap:.45rem;justify-content:center;flex-wrap:wrap;position:relative;z-index:2}
.grade-pill{font-family:'Syne',sans-serif;font-size:.6rem;font-weight:700;letter-spacing:.07em;padding:.38rem .92rem;border-radius:20px;border:2px solid rgba(255,255,255,.18);color:rgba(255,255,255,.48);cursor:pointer;transition:all .2s;background:none}
.grade-pill:hover,.grade-pill.active{background:#fff;color:var(--green);border-color:#fff}
.grade-pill.priority{border-color:#86EFAC;color:#86EFAC}
.grade-pill.priority:hover,.grade-pill.priority.active{background:#86EFAC;color:#145A32}
.subjects-nav{display:flex;gap:.45rem;flex-wrap:wrap;margin:2.2rem 0 1.5rem}
.sub-tab{display:flex;align-items:center;gap:.45rem;font-family:'Syne',sans-serif;font-size:.58rem;font-weight:700;letter-spacing:.07em;text-transform:uppercase;padding:.46rem 1rem;border-radius:5px;border:2px solid var(--bd);color:var(--i60);cursor:pointer;transition:all .2s;background:#fff}
.sub-tab .sub-icon{font-size:.88rem}
.sub-tab:hover{border-color:var(--green);color:var(--green)}
.sub-tab.active,.sub-tab:hover{border-color:var(--green);color:var(--green)}
.sub-tab.maths.active,.sub-tab.maths:hover{border-color:var(--blue);background:var(--blue);color:#fff}
.sub-tab.science.active,.sub-tab.science:hover{border-color:#9B59B6;background:#9B59B6;color:#fff}
.sub-tab.active:not(.maths):not(.science){background:var(--green);color:#fff}
.topic-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:.95rem;margin-bottom:2rem}
.topic-card{background:#fff;border-radius:7px;padding:1.3rem;border:2px solid transparent;cursor:pointer;transition:all .2s;box-shadow:0 2px 10px rgba(30,132,73,.05)}
.topic-card:hover{border-color:var(--green);transform:translateY(-2px);box-shadow:0 7px 22px rgba(30,132,73,.09)}
.topic-card.maths:hover{border-color:var(--blue)}
.topic-card.science:hover{border-color:#9B59B6}
.tc-icon{font-family:'JetBrains Mono',monospace;font-size:1.1rem;font-weight:700;margin-bottom:.42rem}
.tc-name{font-family:'Syne',sans-serif;font-size:.76rem;font-weight:700;color:var(--ink);margin-bottom:.25rem}
.tc-sub{font-size:.73rem;color:var(--i60);line-height:1.52}
.tc-badge{font-family:'JetBrains Mono',monospace;font-size:.44rem;letter-spacing:.06em;text-transform:uppercase;padding:.14rem .45rem;border-radius:2px;background:rgba(30,132,73,.07);color:var(--green);border:1px solid rgba(30,132,73,.13);margin-top:.45rem;width:fit-content}
.tc-badge.maths{background:rgba(26,110,168,.07);color:var(--blue);border-color:rgba(26,110,168,.13)}
.tc-badge.science{background:rgba(155,89,182,.07);color:#9B59B6;border-color:rgba(155,89,182,.13)}

/* COURSES */
.course-tab{flex:1;min-width:120px;padding:.9rem .7rem;background:transparent;border:none;border-bottom:3px solid transparent;cursor:pointer;text-align:center;transition:all .2s;color:rgba(255,255,255,.45)}
.course-tab:hover{background:rgba(155,89,182,.06);color:rgba(255,255,255,.7)}
.course-tab.active{border-bottom-color:#9B59B6;color:#fff;background:rgba(155,89,182,.1)}
.module-item{display:flex;align-items:center;gap:.7rem;padding:.75rem 1.2rem;cursor:pointer;transition:background .18s;border-left:3px solid transparent}
.module-item:hover{background:rgba(255,255,255,.03)}
.module-item.active{background:rgba(155,89,182,.1);border-left-color:#9B59B6}
.module-item.done{border-left-color:#27AE60}
.module-num{font-family:'JetBrains Mono',monospace;font-size:.46rem;letter-spacing:.06em;color:rgba(255,255,255,.28);flex-shrink:0;width:18px}
.module-name{font-family:'Syne',sans-serif;font-size:.68rem;font-weight:700;color:#fff;flex:1;line-height:1.3}
.module-tick{font-size:.75rem;flex-shrink:0}
.lesson-header{margin-bottom:1.8rem}
.lesson-course-tag{font-family:'JetBrains Mono',monospace;font-size:.48rem;letter-spacing:.1em;text-transform:uppercase;color:#9B59B6;margin-bottom:.5rem}
.lesson-title{font-family:'Cormorant Garamond',serif;font-size:clamp(1.6rem,3vw,2.3rem);font-weight:700;color:#fff;line-height:1.1;margin-bottom:.6rem}
.lesson-meta{font-family:'JetBrains Mono',monospace;font-size:.48rem;letter-spacing:.05em;color:rgba(255,255,255,.28);display:flex;gap:1rem;flex-wrap:wrap}
.lesson-body{font-size:.9rem;color:rgba(255,255,255,.62);line-height:1.95;font-weight:300}
.lesson-body h3{font-family:'Syne',sans-serif;font-size:.75rem;font-weight:700;letter-spacing:.09em;text-transform:uppercase;color:#C39BD3;margin:1.6rem 0 .6rem;padding-bottom:.35rem;border-bottom:1px solid rgba(155,89,182,.18)}
.lesson-body p{margin-bottom:1rem}
.lesson-body strong{color:#fff;font-weight:600}
.lesson-body em{color:#C39BD3;font-style:italic}
.lesson-callout{background:rgba(155,89,182,.07);border:1px solid rgba(155,89,182,.18);border-left:3px solid #9B59B6;border-radius:5px;padding:1rem 1.2rem;margin:1.2rem 0}
.lesson-callout .lc-label{font-family:'JetBrains Mono',monospace;font-size:.46rem;letter-spacing:.09em;text-transform:uppercase;color:#9B59B6;margin-bottom:.35rem}
.lesson-callout p{margin-bottom:0;color:rgba(255,255,255,.65);font-style:italic}
.lesson-reflection{background:rgba(202,92,8,.06);border:1px solid rgba(202,92,8,.18);border-left:3px solid var(--orange);border-radius:5px;padding:1rem 1.2rem;margin:1.2rem 0}
.lesson-reflection .lr-label{font-family:'JetBrains Mono',monospace;font-size:.46rem;letter-spacing:.09em;text-transform:uppercase;color:var(--orange);margin-bottom:.35rem}
.quiz-wrap{background:rgba(255,255,255,.03);border:1px solid rgba(155,89,182,.18);border-radius:8px;padding:1.5rem;margin-top:1.8rem}
.quiz-title{font-family:'Syne',sans-serif;font-size:.68rem;font-weight:700;letter-spacing:.09em;text-transform:uppercase;color:#C39BD3;margin-bottom:1.1rem}
.quiz-q{font-size:.92rem;color:#fff;margin-bottom:.9rem;line-height:1.58}
.quiz-opts{display:flex;flex-direction:column;gap:.5rem;margin-bottom:1rem}
.quiz-opt{padding:.75rem 1rem;border-radius:5px;border:1.5px solid rgba(255,255,255,.1);background:rgba(255,255,255,.03);color:rgba(255,255,255,.65);cursor:pointer;font-size:.85rem;text-align:left;transition:all .18s;font-family:'DM Sans',sans-serif}
.quiz-opt:hover{border-color:#9B59B6;color:#fff}
.quiz-opt.correct{border-color:#27AE60;background:rgba(39,174,96,.1);color:#6EE78E}
.quiz-opt.wrong{border-color:#E74C3C;background:rgba(231,76,60,.08);color:#F1948A}
.quiz-opt.disabled{cursor:default}
.quiz-feedback{font-size:.84rem;padding:.7rem 1rem;border-radius:4px;margin-bottom:.9rem;display:none;line-height:1.6}
.quiz-feedback.correct{background:rgba(39,174,96,.08);border:1px solid rgba(39,174,96,.18);color:#6EE78E}
.quiz-feedback.wrong{background:rgba(231,76,60,.06);border:1px solid rgba(231,76,60,.18);color:#F1948A}
.lesson-nav{display:flex;gap:.7rem;margin-top:2rem;padding-top:1.5rem;border-top:1px solid rgba(255,255,255,.07);flex-wrap:wrap;align-items:center;justify-content:space-between}
.complete-btn{background:linear-gradient(135deg,#9B59B6,#7D3C98);border:none;border-radius:4px;padding:.65rem 1.4rem;font-family:'Syne',sans-serif;font-size:.62rem;font-weight:700;letter-spacing:.09em;text-transform:uppercase;color:#fff;cursor:pointer;transition:opacity .2s}
.complete-btn:hover{opacity:.84}
.complete-btn:disabled{opacity:.35;cursor:default}
@media(max-width:780px){#course-layout{grid-template-columns:1fr}#module-list-wrap{position:static}}

.zintsomi-section{background:linear-gradient(135deg,#1B2A3A,#22344A);padding:4rem 0}
.zintsomi-section .sec-lbl{color:rgba(255,255,255,.28)}
.zintsomi-section .sec-lbl::before{background:#F5A040}
.zintsomi-section .sec-title{color:#fff}
.zintsomi-section .sec-title em{color:#F5A040}
.zcourses-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:1.2rem;margin-top:2rem}
.zcourse{background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);border-radius:8px;padding:1.6rem;display:flex;flex-direction:column;gap:.8rem;transition:border-color .22s,background .22s;text-decoration:none;cursor:pointer}
.zcourse:hover{border-color:var(--orange);background:rgba(202,92,8,.06)}
.zcourse-img{width:100%;height:120px;border-radius:5px;overflow:hidden;background:linear-gradient(135deg,#3d1c00,#6B3A1F);display:flex;align-items:center;justify-content:center;font-size:2.5rem}
.zcourse-img.zi1{background:linear-gradient(135deg,#0d2035,#1A507A)}
.zcourse-img.zi2{background:linear-gradient(135deg,#1B3A1B,#1E8449)}
.zcourse-img.zi3{background:linear-gradient(135deg,#3d1c00,#8B5E3C)}
.zcourse-img.zi4{background:linear-gradient(135deg,#1B2A3A,#C0392B)}
.zcourse-level{font-family:'JetBrains Mono',monospace;font-size:.48rem;letter-spacing:.1em;text-transform:uppercase;padding:.18rem .52rem;border-radius:2px;width:fit-content;background:rgba(100,181,232,.1);color:#64B5E8;border:1px solid rgba(100,181,232,.2)}
.zcourse-name{font-family:'Cormorant Garamond',serif;font-size:1.18rem;font-weight:700;color:#fff;line-height:1.18}
.zcourse-desc{font-size:.8rem;color:rgba(255,255,255,.38);line-height:1.65}
.zcourse-footer{display:flex;align-items:center;justify-content:space-between;margin-top:auto;padding-top:.7rem;border-top:1px solid rgba(255,255,255,.07)}
.zcourse-dr{font-family:'JetBrains Mono',monospace;font-size:.48rem;letter-spacing:.04em;color:rgba(255,255,255,.28)}
.zcourse-cta{font-family:'Syne',sans-serif;font-size:.58rem;font-weight:700;letter-spacing:.07em;text-transform:uppercase;color:#F5A040;display:flex;align-items:center;gap:.35rem;transition:gap .18s}
.zcourse:hover .zcourse-cta{gap:.6rem}

/* NOTES MODAL */
.notes-overlay{display:none;position:fixed;inset:0;z-index:800;background:rgba(0,0,0,.68);align-items:center;justify-content:center;padding:1rem}
.notes-overlay.open{display:flex}
.notes-modal{background:#fff;border-radius:8px;width:100%;max-width:700px;max-height:87vh;overflow-y:auto;box-shadow:0 18px 55px rgba(0,0,0,.28)}
.nm-header{background:linear-gradient(135deg,#0d2a1a,#1E8449);padding:1.1rem 1.4rem;display:flex;justify-content:space-between;align-items:center;position:sticky;top:0;z-index:2}
.nm-title{font-family:'Cormorant Garamond',serif;font-size:1.25rem;font-weight:700;color:#fff}
.nm-close{background:none;border:none;color:rgba(255,255,255,.55);font-size:1.3rem;cursor:pointer;padding:.2rem .5rem;line-height:1}
.nm-close:hover{color:#fff}
.nm-body{padding:1.8rem}
.nm-section{margin-bottom:1.6rem}
.nm-section-title{font-family:'Syne',sans-serif;font-size:.62rem;font-weight:700;letter-spacing:.14em;text-transform:uppercase;color:var(--i35);margin-bottom:.75rem;padding-bottom:.45rem;border-bottom:1px solid var(--bd)}
.nm-section-title.maths{color:var(--blue);border-color:rgba(26,110,168,.18)}
.nm-section-title.science{color:#9B59B6;border-color:rgba(155,89,182,.18)}
.nm-body p{font-size:.88rem;color:var(--i60);line-height:1.88;margin-bottom:.75rem;font-weight:300}
.nm-body strong{color:var(--ink);font-weight:600}
.formula-box{background:linear-gradient(135deg,rgba(26,110,168,.04),rgba(155,89,182,.03));border:1px solid rgba(26,110,168,.13);border-radius:5px;padding:.9rem 1.1rem;margin:.75rem 0;border-left:3px solid var(--blue)}
.f-lbl{font-family:'JetBrains Mono',monospace;font-size:.48rem;letter-spacing:.09em;text-transform:uppercase;color:var(--blue);margin-bottom:.35rem}
.f-eq{font-family:'JetBrains Mono',monospace;font-size:.84rem;color:var(--ink);line-height:1.75}
.tip-box{background:rgba(202,92,8,.04);border:1px solid rgba(202,92,8,.13);border-radius:5px;padding:.9rem 1.1rem;margin:.75rem 0;border-left:3px solid var(--orange);display:flex;gap:.75rem}
.tip-icon{font-size:1.1rem;flex-shrink:0}
.tip-lbl{font-family:'JetBrains Mono',monospace;font-size:.46rem;letter-spacing:.09em;text-transform:uppercase;color:var(--orange);margin-bottom:.22rem}
.tip-text{font-size:.83rem;color:var(--i60);line-height:1.72;font-style:italic}
.practice-q{background:var(--paper);border-radius:5px;padding:.92rem;margin-bottom:.55rem;border-left:3px solid var(--bd)}
.pq-num{font-family:'JetBrains Mono',monospace;font-size:.48rem;letter-spacing:.07em;color:var(--i35);margin-bottom:.27rem}
.pq-q{font-size:.86rem;color:var(--ink);line-height:1.58;margin-bottom:.45rem}
.pq-toggle{font-family:'JetBrains Mono',monospace;font-size:.48rem;letter-spacing:.05em;text-transform:uppercase;color:var(--orange);cursor:pointer;background:none;border:none;padding:0;transition:color .18s}
.pq-toggle:hover{color:var(--ora-l)}
.pq-ans{font-size:.81rem;color:var(--green);line-height:1.63;margin-top:.45rem;display:none;padding:.45rem;background:rgba(30,132,73,.04);border-radius:3px}

/* AUDIO */
.audio-hero{background:linear-gradient(160deg,#1a0d00,#3d1c00,#0d1a2a);padding:4.5rem 0 2.8rem;text-align:center;position:relative;overflow:hidden}
.vinyl{position:absolute;right:-40px;top:-40px;width:220px;height:220px;border-radius:50%;background:conic-gradient(#1a0d00,#3d1c00,#1a0d00,#3d1c00,#1a0d00);border:3px solid rgba(255,215,0,.13);opacity:.28;animation:spin 22s linear infinite}
@keyframes spin{from{transform:rotate(0)}to{transform:rotate(360deg)}}
.audio-hero h2{font-family:'Cormorant Garamond',serif;font-size:clamp(2.4rem,5vw,3.8rem);font-weight:700;color:#FFD700;position:relative;z-index:2}
.audio-hero h2 em{font-style:italic;color:#F5A040}
.audio-hero p{font-size:.88rem;color:rgba(255,255,255,.38);max-width:440px;margin:.7rem auto 0;line-height:1.85;position:relative;z-index:2}
.audio-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:1.1rem;padding:2.5rem 0}
.audio-card{border-radius:9px;overflow:hidden;cursor:pointer;transition:transform .22s}
.audio-card:hover{transform:translateY(-3px)}
.ac-art{height:170px;display:flex;align-items:center;justify-content:center;position:relative}
.ac-art-1{background:linear-gradient(135deg,#5D1A00,#8B2500,#C0392B)}
.ac-art-2{background:linear-gradient(135deg,#0d2a1a,#1E8449,#27AE60)}
.ac-art-3{background:linear-gradient(135deg,#1A0D2E,#7B2D8B,#9B59B6)}
.ac-art-4{background:linear-gradient(135deg,#1a2744,#1A6EA8,#2E8FCC)}
.ac-art-5{background:linear-gradient(135deg,#2a1a00,#8B6914,#E6B32A)}
.ac-art-6{background:linear-gradient(135deg,#0d1117,#1B2A3A,#22344A)}
.ac-vinyl-icon{font-size:2.8rem;opacity:.55}
.ac-coming{position:absolute;top:.75rem;right:.75rem;font-family:'JetBrains Mono',monospace;font-size:.43rem;letter-spacing:.09em;text-transform:uppercase;padding:.18rem .55rem;border-radius:2px;background:rgba(255,215,0,.13);border:1px solid rgba(255,215,0,.22);color:#FFD700}
.ac-body{background:#2a1200;padding:1.1rem}
.ac-name{font-family:'Cormorant Garamond',serif;font-size:1.05rem;font-weight:700;color:#FFD700;margin-bottom:.22rem}
.ac-desc{font-size:.76rem;color:rgba(255,255,255,.32);line-height:1.58}
.ac-notify{display:inline-flex;align-items:center;gap:.42rem;margin-top:.7rem;font-family:'JetBrains Mono',monospace;font-size:.46rem;letter-spacing:.05em;text-transform:uppercase;color:var(--orange);cursor:pointer;background:none;border:none;padding:0;transition:color .2s}
.ac-notify:hover{color:#F5A040}

/* RESPONSIVE */
@media(max-width:900px){
  .home-hero{grid-template-columns:1fr}
  .home-hero-r{min-height:260px}
  .worlds-grid{grid-template-columns:repeat(2,1fr)}
  .studio{grid-template-columns:1fr}
  .games-grid{grid-template-columns:1fr}
  .topic-grid{grid-template-columns:repeat(2,1fr)}
  .zcourses-grid{grid-template-columns:1fr}
  .audio-grid{grid-template-columns:1fr 1fr}
  .wall-grid{grid-template-columns:1fr 1fr}
}
@media(max-width:600px){
  .nav-pills{display:none}
  .worlds-grid{grid-template-columns:1fr 1fr}
  .topic-grid{grid-template-columns:1fr}
  .puzzle-options{grid-template-columns:1fr}
  .wall-grid,.audio-grid{grid-template-columns:1fr}
  .inst-selector{grid-template-columns:repeat(2,1fr)}
  .djembe-pads{grid-template-columns:repeat(4,1fr)}
  .tree-stat-bar{gap:1rem;padding:.65rem 1.1rem}
}
</style>
</head>
<body>

<div id="intro">
  <canvas id="intro-canvas"></canvas>
  <div id="intro-logo">
    <h1><em>Zintsomi</em></h1>
    <p>Africa's Storytelling World ¬∑ 2026</p>
  </div>
  <button id="skip-btn">Skip Intro</button>
</div>

<div id="site">
  <nav>
    <div class="nstrip"></div>
    <div class="nav-w">
      <span class="logo" onclick="showWorld('home')"><em>Zintsomi</em></span>
      <div class="nav-pills">
        <button class="npill active" onclick="showWorld('home')">üè† Home</button>
        <button class="npill" onclick="showWorld('games')">üéÆ Games</button>
        <button class="npill" onclick="showWorld('instruments')">ü•Å Studio</button>
        <button class="npill" onclick="showWorld('brain')">üß† Teasers</button>
        <button class="npill" onclick="showWorld('tree')">üå≥ Ancestor Tree</button>
        <button class="npill schools" onclick="showWorld('schools')">üéì Schools</button>
        <button class="npill" onclick="showWorld('courses')" style="border-color:#9B59B6;color:#9B59B6">üìö Courses</button>
        <button class="npill" onclick="showWorld('audio')">üéµ Audio</button>
      </div>
      <div style="display:flex;align-items:center;gap:.7rem;flex-shrink:0">
        <span id="auth-nav-name" style="font-family:'JetBrains Mono',monospace;font-size:.5rem;letter-spacing:.05em;color:var(--i35);max-width:140px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap"></span>
        <button id="auth-nav-btn" class="btn" style="padding:.38rem .9rem;font-size:.55rem" onclick="openAuthModal()">Log In</button>
      </div>
    </div>
  </nav>

  <!-- AUTH MODAL -->
  <div id="auth-overlay" style="display:none;position:fixed;inset:0;z-index:9000;background:rgba(0,0,0,.75);align-items:center;justify-content:center;padding:1rem">
    <div style="background:#1B2A3A;border-radius:10px;width:100%;max-width:380px;overflow:hidden;border:1px solid rgba(255,255,255,.1);box-shadow:0 20px 60px rgba(0,0,0,.5)">
      <div style="background:var(--orange);padding:1.1rem 1.4rem;display:flex;justify-content:space-between;align-items:center">
        <div id="auth-mode-title" style="font-family:'Cormorant Garamond',serif;font-size:1.2rem;font-weight:700;color:#fff">Log In</div>
        <button onclick="closeAuthModal()" style="background:none;border:none;color:rgba(255,255,255,.6);font-size:1.2rem;cursor:pointer;line-height:1">‚úï</button>
      </div>
      <div style="padding:1.6rem;display:flex;flex-direction:column;gap:.75rem">
        <div id="auth-name-row" style="display:none">
          <label style="font-family:'JetBrains Mono',monospace;font-size:.48rem;letter-spacing:.08em;text-transform:uppercase;color:rgba(255,255,255,.35);display:block;margin-bottom:.3rem">Full Name</label>
          <input id="auth-name" type="text" placeholder="Your name" style="width:100%;padding:.65rem .9rem;border-radius:4px;border:1.5px solid rgba(255,255,255,.12);background:rgba(255,255,255,.05);color:#fff;font-family:'DM Sans',sans-serif;font-size:.88rem;outline:none">
        </div>
        <div>
          <label style="font-family:'JetBrains Mono',monospace;font-size:.48rem;letter-spacing:.08em;text-transform:uppercase;color:rgba(255,255,255,.35);display:block;margin-bottom:.3rem">Email</label>
          <input id="auth-email" type="email" placeholder="you@email.com" style="width:100%;padding:.65rem .9rem;border-radius:4px;border:1.5px solid rgba(255,255,255,.12);background:rgba(255,255,255,.05);color:#fff;font-family:'DM Sans',sans-serif;font-size:.88rem;outline:none">
        </div>
        <div>
          <label style="font-family:'JetBrains Mono',monospace;font-size:.48rem;letter-spacing:.08em;text-transform:uppercase;color:rgba(255,255,255,.35);display:block;margin-bottom:.3rem">Password</label>
          <input id="auth-password" type="password" placeholder="Min 6 characters" style="width:100%;padding:.65rem .9rem;border-radius:4px;border:1.5px solid rgba(255,255,255,.12);background:rgba(255,255,255,.05);color:#fff;font-family:'DM Sans',sans-serif;font-size:.88rem;outline:none">
        </div>
        <div id="auth-msg" style="display:none;font-size:.78rem;padding:.5rem .7rem;border-radius:3px;background:rgba(255,255,255,.04)"></div>
        <button id="auth-submit-btn" class="btn" style="width:100%;justify-content:center;margin-top:.3rem" onclick="handleAuthSubmit()">Log In</button>
        <button id="auth-toggle-link" onclick="toggleAuthMode()" style="background:none;border:none;font-family:'JetBrains Mono',monospace;font-size:.48rem;letter-spacing:.05em;color:rgba(255,255,255,.32);cursor:pointer;text-align:center;margin-top:-.2rem">No account? Sign up free</button>
        <div style="border-top:1px solid rgba(255,255,255,.07);padding-top:.8rem;text-align:center">
          <span style="font-family:'JetBrains Mono',monospace;font-size:.44rem;letter-spacing:.05em;color:rgba(255,255,255,.2)">Premium unlocks all courses, notes & audio ¬∑ R65/month</span>
        </div>
      </div>
    </div>
  </div>

  <!-- HOME -->
  <div class="world active" id="home-world">
    <div class="home-hero">
      <div class="home-hero-l">
        <div class="home-hero-tag">Zintsomi ¬∑ Africa's Oral Heritage Platform ¬∑ 2026</div>
        <h1>Where Every<br><strong>Story</strong><em>Belongs.</em></h1>
        <p class="home-hero-sub">Six interactive worlds. Free to explore. Rooted in African oral tradition ‚Äî built for every learner, storyteller and community.</p>
        <div style="display:flex;gap:.7rem;flex-wrap:wrap">
          <button class="btn" onclick="showWorld('schools')">Start Learning</button>
          <button class="btn btn-out" style="border-color:rgba(255,255,255,.18);color:rgba(255,255,255,.55)" onclick="showWorld('games')">Explore Games</button>
          <button class="btn btn-out" style="border-color:rgba(245,160,64,.35);color:#F5A040" onclick="showWorld('schools');setTimeout(function(){document.querySelector('.zintsomi-section').scrollIntoView({behavior:'smooth'})},400)">View 3-Year Plan</button>
        </div>
      </div>
      <div class="home-hero-r" id="heroR" style="position:relative;overflow:hidden;min-height:300px">
        <canvas id="home-canvas" style="position:absolute;inset:0;width:100%;height:100%"></canvas>
        <div class="hero-quote" style="position:relative;z-index:2">
          <blockquote>"The story does not begin with the storyteller. It begins the moment the listener leans in."</blockquote>
          <cite>‚Äî Dr. Nomsa Mdlalose "Dr. Sasa"</cite>
        </div>
      </div>
    </div>
    <div class="worlds-grid">
      <div class="world-card" onclick="showWorld('games')"><div class="wc-icon">üåç</div><div class="wc-name">Indigenous Games</div><div class="wc-sub">Mancala, Diketo, Kgati, Ncuva. Tradition meets digital play. Score. Level up.</div><div class="wc-tag">Savannah World ¬∑ 4 Games</div></div>
      <div class="world-card" onclick="showWorld('instruments')"><div class="wc-icon">ü•Å</div><div class="wc-name">Music Studio</div><div class="wc-sub">Djembe, Mbira, Hosho, Uhadi. Record your session. Post to the community.</div><div class="wc-tag">4 Instruments ¬∑ Record & Share</div></div>
      <div class="world-card" onclick="showWorld('brain')"><div class="wc-icon">üß†</div><div class="wc-name">Brain Teasers</div><div class="wc-sub">Daily puzzles. Proverbs, IQ patterns, Maths, Science. Build your streak.</div><div class="wc-tag">Daily Challenge ¬∑ 6 Types</div></div>
      <div class="world-card" onclick="showWorld('tree')"><div class="wc-icon">üå≥</div><div class="wc-name">Ancestor Tree</div><div class="wc-sub">A living tree growing with every story, game and lesson contributed.</div><div class="wc-tag">Community ¬∑ Living World</div></div>
      <div class="world-card" onclick="showWorld('schools')"><div class="wc-icon">üéì</div><div class="wc-name">Schools Hub</div><div class="wc-sub">Grade 12 study notes for Maths, Physical Sciences, English, isiZulu. CAPS 2025.</div><div class="wc-tag">Grade 12 Priority ¬∑ Free</div></div>
      <div class="world-card" onclick="showWorld('courses')" style="border-bottom:3px solid #9B59B6"><div class="wc-icon">üìö</div><div class="wc-name">Dr Sasa's Courses</div><div class="wc-sub">4 full courses. Storytelling, Folktales, Business Narrative, Heritage. Learn at your own pace.</div><div class="wc-tag" style="color:#C39BD3">Certificate of Attendance ¬∑ Self-Paced</div></div>
      <div class="world-card" onclick="showWorld('audio')"><div class="wc-icon">üéµ</div><div class="wc-name">Audio Archive</div><div class="wc-sub">Umemolo songs, izinganekwane, lullabies, folklore. Upload your own voice to Community Voices.</div><div class="wc-tag">Coming Soon ¬∑ Contribute</div></div>
    </div>
    <div style="background:var(--ink2);padding:3rem 0">
      <div class="ctr">
        <div class="sec-lbl" style="color:rgba(255,255,255,.25)">Community</div>
        <h2 class="sec-title" style="color:#fff;margin-bottom:.4rem">Community <em>Wall</em></h2>
        <p style="font-size:.86rem;color:rgba(255,255,255,.35);margin-bottom:0;line-height:1.82">Music created here. Stories shared. Achievements celebrated.</p>
        <div class="wall-grid">
          <div class="wall-post"><span class="wp-type wp-music">üéµ Music</span><div class="wp-name">Thandi K. ‚Äî Durban</div><div class="wp-content">My first mbira composition ‚Äî a lullaby for my daughter</div><div class="wp-meta">2 hours ago ¬∑ 12 ‚ô•</div></div>
          <div class="wall-post"><span class="wp-type wp-achieve">üèÖ Achievement</span><div class="wp-name">Sipho M. ‚Äî Johannesburg</div><div class="wp-content">30-day brain teaser streak complete! üî• Thanks Dr Sasa</div><div class="wp-meta">Yesterday ¬∑ 34 ‚ô•</div></div>
          <div class="wall-post"><span class="wp-type wp-story">üìñ Story</span><div class="wp-name">Nomvula D. ‚Äî Cape Town</div><div class="wp-content">My grandmother's version of the Hare and the Tortoise ‚Äî a Xhosa retelling</div><div class="wp-meta">3 days ago ¬∑ 28 ‚ô•</div></div>
        </div>
      </div>
    </div>
  </div>

  <!-- GAMES -->
  <div class="world" id="games-world">
    <div class="savannah-hero">
      <div class="sv-sky"></div><div class="sv-sun"></div>
      <svg style="position:absolute;left:5%;bottom:60px" width="85" height="95" viewBox="0 0 85 95"><rect x="38" y="28" width="7" height="67" fill="#1a0800"/><ellipse cx="42" cy="24" rx="38" ry="19" fill="#0f2200" opacity=".92"/><ellipse cx="18" cy="30" rx="21" ry="11" fill="#0f2200" opacity=".7"/><ellipse cx="66" cy="27" rx="22" ry="12" fill="#0f2200" opacity=".74"/></svg>
      <svg style="position:absolute;right:9%;bottom:60px" width="68" height="78" viewBox="0 0 68 78"><rect x="29" y="23" width="7" height="55" fill="#1a0800"/><ellipse cx="32" cy="19" rx="29" ry="15" fill="#0f2200" opacity=".88"/><ellipse cx="53" cy="25" rx="17" ry="9" fill="#0f2200" opacity=".7"/></svg>
      <div class="sv-ground"></div>
      <div class="sv-title"><h2>Indigenous Games</h2><p>African tradition ¬∑ digital play ¬∑ real competition</p></div>
    </div>
    <div class="ndebele-border"></div>
    <div class="games-body">
      <div class="ctr">
        <div style="margin:2rem 0"><div class="sec-lbl">Play & Learn</div><h2 class="sec-title">Choose Your <em>Game</em></h2><p class="sec-sub">Each game rooted in African tradition. Read the teaser, then dive in and play.</p></div>
        <div class="games-grid">
          <div class="game-tile" onclick="openGame('mancala')">
            <div class="game-tile-hero gt-mancala"><svg width="130" height="75" viewBox="0 0 130 75"><rect x="8" y="18" width="114" height="38" rx="19" fill="rgba(255,255,255,.07)" stroke="rgba(255,215,0,.28)" stroke-width="1.5"/><circle cx="32" cy="37" r="11" fill="rgba(255,215,0,.13)" stroke="rgba(255,215,0,.38)" stroke-width="1.5"/><circle cx="60" cy="37" r="11" fill="rgba(255,215,0,.13)" stroke="rgba(255,215,0,.38)" stroke-width="1.5"/><circle cx="88" cy="37" r="11" fill="rgba(255,215,0,.13)" stroke="rgba(255,215,0,.38)" stroke-width="1.5"/><text x="32" y="41" text-anchor="middle" fill="#FFD700" font-size="10" font-weight="bold">4</text><text x="60" y="41" text-anchor="middle" fill="#FFD700" font-size="10" font-weight="bold">4</text><text x="88" y="41" text-anchor="middle" fill="#FFD700" font-size="10" font-weight="bold">4</text><circle cx="20" cy="37" r="7" fill="rgba(202,92,8,.28)" stroke="rgba(202,92,8,.55)" stroke-width="1.5"/><circle cx="110" cy="37" r="7" fill="rgba(46,143,204,.28)" stroke="rgba(46,143,204,.55)" stroke-width="1.5"/></svg></div>
            <div class="game-tile-body"><div class="gt-tag">Strategy</div><div class="gt-name">Mancala / Umlabalaba</div><div class="gt-origin">üåç Sub-Saharan Africa ¬∑ 7,000+ years old</div><p class="gt-desc">Sow seeds, capture stones, outsmart your opponent. One of the oldest strategy games on Earth ‚Äî born in Africa.</p><div class="gt-stats"><div class="gt-stat"><strong>10</strong> Levels</div><div class="gt-stat"><strong>AI</strong> Opponent</div><div class="gt-stat"><strong>‚òÖ</strong> Scoring</div></div></div>
          </div>
          <div class="game-tile" onclick="openGame('diketo')">
            <div class="game-tile-hero gt-diketo"><div style="text-align:center;color:#FFD700;font-size:2.2rem">ü™®ü™®ü™®<br><span style="font-size:1rem;opacity:.5;display:block;margin-top:.3rem">tap the rhythm</span></div></div>
            <div class="game-tile-body"><div class="gt-tag">Rhythm</div><div class="gt-name">Diketo</div><div class="gt-origin">üáøüá¶ Sotho tradition ¬∑ South Africa</div><p class="gt-desc">Watch the pattern flash. Tap it back in exact order. Faster every round. Deeply addictive.</p><div class="gt-stats"><div class="gt-stat"><strong>20</strong> Levels</div><div class="gt-stat"><strong>‚Üë</strong> Speed</div><div class="gt-stat"><strong>‚òÖ</strong> Scoring</div></div></div>
          </div>
          <div class="game-tile" onclick="openGame('kgati')">
            <div class="game-tile-hero gt-kgati"><div style="text-align:center;color:#fff;font-size:2.5rem;padding:1rem">ü™¢<br><span style="font-size:.9rem;opacity:.5;display:block;margin-top:.4rem">read pattern ¬∑ jump in time</span></div></div>
            <div class="game-tile-body"><div class="gt-tag">Pattern Logic</div><div class="gt-name">Kgati</div><div class="gt-origin">üáøüá¶ Sotho & Tswana tradition</div><p class="gt-desc">The digital rope never stops. Read the jump sequence. Input it before the rope catches you.</p><div class="gt-stats"><div class="gt-stat"><strong>15</strong> Levels</div><div class="gt-stat"><strong>‚ö°</strong> Speed+</div><div class="gt-stat"><strong>3</strong> Lives</div></div></div>
          </div>
          <div class="game-tile" onclick="openGame('ncuva')">
            <div class="game-tile-hero gt-ncuva"><div style="display:grid;grid-template-columns:repeat(3,1fr);gap:.45rem;padding:1.4rem;width:fit-content;margin:auto"><div style="width:30px;height:30px;border-radius:4px;background:rgba(255,215,0,.28);border:1.5px solid rgba(255,215,0,.48)"></div><div style="width:30px;height:30px;border-radius:4px;background:rgba(202,92,8,.28);border:1.5px solid rgba(202,92,8,.48)"></div><div style="width:30px;height:30px;border-radius:4px;background:rgba(255,215,0,.28);border:1.5px solid rgba(255,215,0,.48)"></div><div style="width:30px;height:30px;border-radius:4px;background:rgba(255,255,255,.06)"></div><div style="width:30px;height:30px;border-radius:4px;background:rgba(202,92,8,.28);border:1.5px solid rgba(202,92,8,.48)"></div><div style="width:30px;height:30px;border-radius:4px;background:rgba(255,255,255,.06)"></div></div></div>
            <div class="game-tile-body"><div class="gt-tag">Memory</div><div class="gt-name">Ncuva</div><div class="gt-origin">üáøüá¶ Venda tradition ¬∑ Limpopo</div><p class="gt-desc">Patterns flash. Memorise them. Recreate perfectly. Each round grows more complex. Trains focus and visual memory.</p><div class="gt-stats"><div class="gt-stat"><strong>12</strong> Levels</div><div class="gt-stat"><strong>Memory</strong></div><div class="gt-stat"><strong>+</strong> Complexity</div></div></div>
          </div>
        </div>
      </div>
    </div>
    <div class="ndebele-border"></div>
  </div>

  <!-- GAME OVERLAYS -->
  <div class="game-overlay" id="mancala-overlay">
    <div class="game-modal">
      <div class="gm-header"><div class="gm-title">üåç Mancala / Umlabalaba</div><button class="gm-close" onclick="closeGame('mancala')">‚úï</button></div>
      <div class="gm-body">
        <div class="gm-score-bar"><div class="gm-score-item"><span>Your Store</span><strong id="p1-store">0</strong></div><div class="gm-score-item"><span>Moves</span><strong id="m-moves">0</strong></div><div class="gm-score-item"><span>AI Store</span><strong id="p2-store">0</strong></div></div>
        <div class="mancala-board">
          <div class="mancala-lbl">AI (North)</div>
          <div class="mancala-row"><div class="mancala-store"><strong id="store-p2">0</strong><span>AI</span></div><div class="mancala-pits" id="ai-pits"></div><div class="mancala-store"><strong id="store-p1">0</strong><span>You</span></div></div>
          <div class="mancala-row"><div class="mancala-store" style="visibility:hidden"></div><div class="mancala-pits" id="player-pits"></div><div class="mancala-store" style="visibility:hidden"></div></div>
          <div class="mancala-lbl">You (South)</div>
        </div>
        <div class="game-msg" id="m-msg">Your turn ‚Äî click a pit</div>
        <div style="display:flex;gap:.7rem;justify-content:center;margin-top:1rem"><button class="btn" onclick="initMancala()">New Game</button><button class="btn btn-out" style="color:#fff;border-color:rgba(255,255,255,.2)" onclick="closeGame('mancala')">Exit</button></div>
      </div>
    </div>
  </div>

  <div class="game-overlay" id="diketo-overlay">
    <div class="game-modal">
      <div class="gm-header"><div class="gm-title">ü™® Diketo ‚Äî Rhythm Challenge</div><button class="gm-close" onclick="closeGame('diketo')">‚úï</button></div>
      <div class="gm-body">
        <div class="gm-score-bar"><div class="gm-score-item"><span>Score</span><strong id="d-score">0</strong></div><div class="gm-score-item"><span>Level</span><strong id="d-level">1</strong></div><div class="gm-score-item"><span>Best</span><strong id="d-best">0</strong></div></div>
        <div style="color:rgba(255,255,255,.48);font-size:.83rem;margin-bottom:.9rem;line-height:1.62;text-align:center">Watch the pattern light up ‚Äî then tap the stones in the same order.</div>
        <div class="diketo-seq" id="diketo-seq"></div>
        <div class="game-msg" id="d-msg">Press Start to play</div>
        <button class="diketo-tap-btn" id="diketo-main-btn" onclick="diketoTap()">TAP</button>
        <div style="display:flex;gap:.7rem;justify-content:center"><button class="btn" onclick="startDiketo()">Start</button><button class="btn btn-out" style="color:#fff;border-color:rgba(255,255,255,.2)" onclick="closeGame('diketo')">Exit</button></div>
      </div>
    </div>
  </div>

  <div class="game-overlay" id="kgati-overlay">
    <div class="game-modal">
      <div class="gm-header"><div class="gm-title">ü™¢ Kgati ‚Äî Jump the Pattern</div><button class="gm-close" onclick="closeGame('kgati')">‚úï</button></div>
      <div class="gm-body">
        <div class="gm-score-bar"><div class="gm-score-item"><span>Score</span><strong id="k-score">0</strong></div><div class="gm-score-item"><span>Level</span><strong id="k-level">1</strong></div><div class="gm-score-item"><span>Lives</span><strong id="k-lives">3</strong></div></div>
        <div class="kgati-rope-area"><div class="kgati-rope"></div><div class="kgati-jumper" id="kgati-jumper">üßí</div></div>
        <p style="color:rgba(255,255,255,.42);font-size:.8rem;text-align:center;margin:.5rem 0">Memorise the jump sequence then tap the matching options:</p>
        <div class="kgati-pattern" id="kgati-pattern"></div>
        <div class="game-msg" id="k-msg">Press Start</div>
        <div style="display:flex;gap:.7rem;justify-content:center;margin-top:.8rem"><button class="btn" onclick="startKgati()">Start</button><button class="btn btn-out" style="color:#fff;border-color:rgba(255,255,255,.2)" onclick="closeGame('kgati')">Exit</button></div>
      </div>
    </div>
  </div>

  <div class="game-overlay" id="ncuva-overlay">
    <div class="game-modal">
      <div class="gm-header"><div class="gm-title">‚ú¶ Ncuva ‚Äî Remember the Pattern</div><button class="gm-close" onclick="closeGame('ncuva')">‚úï</button></div>
      <div class="gm-body">
        <div class="gm-score-bar"><div class="gm-score-item"><span>Score</span><strong id="n-score">0</strong></div><div class="gm-score-item"><span>Level</span><strong id="n-level">1</strong></div><div class="gm-score-item"><span>Best</span><strong id="n-best">0</strong></div></div>
        <div class="game-msg" id="n-msg">Press Start ‚Äî memorise the pattern!</div>
        <div class="ncuva-grid" id="ncuva-grid"></div>
        <div style="display:flex;gap:.7rem;justify-content:center;margin-top:.9rem"><button class="btn" onclick="startNcuva()">Start</button><button class="btn btn-out" style="color:#fff;border-color:rgba(255,255,255,.2)" onclick="closeGame('ncuva')">Exit</button></div>
      </div>
    </div>
  </div>

  <!-- INSTRUMENTS -->
  <div class="world" id="instruments-world">
    <div class="inst-hero" style="padding:0;height:320px;position:relative;overflow:hidden">
      <canvas id="inst-canvas" style="position:absolute;inset:0;width:100%;height:100%"></canvas>
      <div style="position:relative;z-index:2;text-align:center;display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;padding:2rem">
        <div class="sec-lbl" style="color:rgba(255,255,255,.28);justify-content:center">Music Studio</div>
        <h2 style="font-family:'Cormorant Garamond',serif;font-size:clamp(2.4rem,5vw,3.8rem);font-weight:700;color:#fff;letter-spacing:-.02em">African <em style="font-style:italic;color:#F5A040">Instrument Studio</em></h2>
        <p style="font-size:.9rem;color:rgba(255,255,255,.55);max-width:480px;margin:.7rem auto 0;line-height:1.85">Play. Record. Loop. Share. Four instruments, one recording session, one community wall.</p>
      </div>
    </div>
    <div style="background:#0d1117">
    <div class="ctr">
      <div class="studio">
        <div>
          <div class="inst-selector">
            <button class="inst-btn active" onclick="selectInst('djembe',this)"><span class="inst-emoji">ü•Å</span><span class="inst-name">Djembe</span><span class="inst-origin">West Africa ¬∑ Percussion</span></button>
            <button class="inst-btn" onclick="selectInst('mbira',this)"><span class="inst-emoji">üéπ</span><span class="inst-name">Mbira</span><span class="inst-origin">Zimbabwe ¬∑ Thumb Piano</span></button>
            <button class="inst-btn" onclick="selectInst('hosho',this)"><span class="inst-emoji">ü™ò</span><span class="inst-name">Hosho</span><span class="inst-origin">Zimbabwe ¬∑ Gourd Shaker</span></button>
            <button class="inst-btn" onclick="selectInst('uhadi',this)"><span class="inst-emoji">üéª</span><span class="inst-name">Uhadi</span><span class="inst-origin">Xhosa ¬∑ Musical Bow</span></button>
          </div>
          <div class="inst-play-area" id="inst-play-area">
            <div class="inst-play-title">ü•Å Djembe</div>
            <p class="inst-play-sub">8 zones ‚Äî bass, tone, slap. The heartbeat of West Africa. Click or tap to play.</p>
            <div class="djembe-pads">
              <div class="drum-pad dp1" onclick="playDrum(this,'bass')">Bass L</div>
              <div class="drum-pad dp2" onclick="playDrum(this,'tone')">Tone L</div>
              <div class="drum-pad dp3" onclick="playDrum(this,'slap')">Slap L</div>
              <div class="drum-pad dp4" onclick="playDrum(this,'open')">Open</div>
              <div class="drum-pad dp5" onclick="playDrum(this,'slap')">Slap R</div>
              <div class="drum-pad dp6" onclick="playDrum(this,'tone')">Tone R</div>
              <div class="drum-pad dp7" onclick="playDrum(this,'bass')">Bass R</div>
              <div class="drum-pad dp8" onclick="playDrum(this,'mute')">Mute</div>
            </div>
          </div>
        </div>
        <div class="recorder-panel">
          <div class="rec-title">üî¥ Recording Studio</div>
          <button class="rec-btn-main" id="rec-btn" onclick="toggleRecord()"></button>
          <div class="rec-status" id="rec-status">READY</div>
          <div class="rec-timeline"><div class="rec-wave" id="rec-wave"></div></div>
          <div class="rec-controls">
            <button class="rec-ctrl" id="play-ctrl" onclick="playback()">‚ñ∂ Play</button>
            <button class="rec-ctrl" id="loop-ctrl" onclick="toggleLoop()">‚Ü∫ Loop</button>
            <button class="rec-ctrl" onclick="clearRec()">‚úï Clear</button>
          </div>
          <button class="post-wall-btn" onclick="postToWall()">üì§ Post to Community Wall</button>
          <div class="posted-notif" id="posted-notif">‚úì Posted to Community Wall!</div>
        </div>
      </div>
    </div>
    </div>
  </div>

  <!-- BRAIN TEASERS -->
  <div class="world" id="brain-world">
    <div class="brain-hero" style="padding:0;height:340px;position:relative;overflow:hidden">
      <canvas id="brain-canvas" style="position:absolute;inset:0;width:100%;height:100%"></canvas>
      <div style="position:relative;z-index:2;text-align:center;display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;padding:2rem">
        <div class="sec-lbl" style="color:rgba(255,255,255,.28);justify-content:center">Daily Challenge</div>
        <h2 style="font-family:'Cormorant Garamond',serif;font-size:clamp(2.4rem,5vw,3.8rem);font-weight:700;color:#fff">Brain <em style="color:#F5A040;font-style:italic">Teasers</em></h2>
        <p style="font-size:.88rem;color:rgba(255,255,255,.52);max-width:440px;margin:.7rem auto 0;line-height:1.85">Six puzzle types. New challenge every day. Build your streak and train your mind.</p>
        <div class="streak-bar"><div class="streak-fire">üî•</div><div class="streak-info"><strong id="streak-count">7</strong><span>Day Streak</span></div><div class="streak-dots" id="streak-dots"></div></div>
      </div>
    </div>
    <div class="ctr">
      <div class="puzzle-tabs">
        <button class="ptab active" onclick="setPuzzleType('proverb')">üìñ Proverbs</button>
        <button class="ptab" onclick="setPuzzleType('pattern')">‚ú¶ Patterns</button>
        <button class="ptab" onclick="setPuzzleType('logic')">üß© Logic</button>
        <button class="ptab" onclick="setPuzzleType('maths')">üìê Maths</button>
        <button class="ptab" onclick="setPuzzleType('science')">üî¨ Science</button>
        <button class="ptab" onclick="setPuzzleType('drum')">ü•Å Drum Memory</button>
      </div>
      <div class="puzzle-stage" id="puzzle-stage"></div>
    </div>
  </div>

  <!-- ANCESTOR TREE -->
  <div class="world" id="tree-world">
    <div class="tree-canvas-wrap">
      <canvas id="tree-canvas"></canvas>
      <div class="tree-ui">
        <h2>The <em>Ancestor Tree</em></h2>
        <p>Every story told, game played, puzzle solved ‚Äî grows this tree.<br>Your leaf lives here. Forever.</p>
        <div class="tree-tooltip">üå± Hover over a glowing leaf to see who contributed. Every leaf is a real learner in the Zintsomi community.</div>
        <div class="tree-actions">
          <button class="btn btn-blu" onclick="growLeaf()">üåø Add Your Leaf</button>
          <button class="btn btn-out" style="border-color:rgba(100,181,232,.28);color:#64B5E8" onclick="showWorld('schools')">Learn ‚Üí Earn Leaves</button>
        </div>
      </div>
      <div class="tree-stat-bar">
        <div class="ts-item"><strong id="leaf-count">247</strong><span>Leaves</span></div>
        <div class="ts-item"><strong id="branch-count">8</strong><span>Branches</span></div>
        <div class="ts-item"><strong id="story-count">143</strong><span>Stories</span></div>
      </div>
      <div class="leaf-popup" id="leaf-popup"></div>
    </div>
  </div>

  <!-- SCHOOLS -->
  <div class="world" id="schools-world">
    <div class="schools-hero" style="padding:0;height:340px;position:relative;overflow:hidden">
      <canvas id="schools-canvas" style="position:absolute;inset:0;width:100%;height:100%"></canvas>
      <div style="position:relative;z-index:2;text-align:center;display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;padding:2rem">
        <div class="sec-lbl" style="color:rgba(134,239,172,.45);justify-content:center">CAPS Aligned 2025</div>
        <h2 style="font-family:'Cormorant Garamond',serif;font-size:clamp(2.3rem,5vw,3.8rem);font-weight:700;color:#fff">Schools <em style="color:#86EFAC;font-style:italic">Hub</em></h2>
        <p style="font-size:.88rem;color:rgba(255,255,255,.52);max-width:490px;margin:.7rem auto 1.4rem;line-height:1.85">Study notes, key formulas, practice questions and Dr Sasa's exam tips. Free for every South African learner.</p>
        <div class="grade-pills"><button class="grade-pill priority active" onclick="setGrade(12)">Grade 12 ‚òÖ</button><button class="grade-pill" onclick="setGrade(11)">Grade 11</button><button class="grade-pill" onclick="setGrade(10)">Grade 10</button></div>
      </div>
    </div>
    <div class="ctr" style="padding-top:2.2rem">
      <div class="subjects-nav">
        <button class="sub-tab maths active" onclick="setSubject('maths')"><span class="sub-icon">üìê</span>Mathematics</button>
        <button class="sub-tab science" onclick="setSubject('science')"><span class="sub-icon">üî¨</span>Physical Sciences</button>
        <button class="sub-tab" onclick="setSubject('english')"><span class="sub-icon">üìù</span>English HL</button>
        <button class="sub-tab" onclick="setSubject('zulu')"><span class="sub-icon">üó£Ô∏è</span>isiZulu</button>
        <button class="sub-tab" onclick="setSubject('lifesci')"><span class="sub-icon">üß¨</span>Life Sciences</button>
      </div>
      <div class="topic-grid" id="topic-grid"></div>
    </div>

    <!-- ZINTSOMI COURSES SECTION -->
    <div class="zintsomi-section">
      <div class="ctr">
        <div class="sec-lbl" style="color:rgba(255,255,255,.25)">Zintsomi Learning Platform</div>
        <h2 class="sec-title">Online <em>Courses</em> by Dr. Sasa</h2>
        <p class="sec-sub" style="color:rgba(255,255,255,.42)">Storytelling and heritage courses hosted on zintsomicourses.co.za. Students receive a <strong style="color:#F5A040">certificate of attendance</strong> upon completion. Enrol directly ‚Äî login, payment and certificates all handled on the platform.</p>
        <div class="zcourses-grid">
          <a class="zcourse" href="https://zintsomicourses.co.za/courses-details/fundamentals-of-storytelling" target="_blank">
            <div class="zcourse-img zi1">üìñ</div>
            <div class="zcourse-level">Beginner</div>
            <div class="zcourse-name">Fundamentals of Storytelling</div>
            <div class="zcourse-desc">Master the art of storytelling ‚Äî African narrative structures, voice, performance technique and the oral tradition. The perfect starting point for aspiring storytellers.</div>
            <div class="zcourse-footer"><span class="zcourse-dr">Dr Sasa ¬∑ Zintsomi</span><span class="zcourse-cta">Enrol Now ‚Üí</span></div>
          </a>
          <a class="zcourse" href="https://zintsomicourses.co.za/courses-details/folktale-studies" target="_blank">
            <div class="zcourse-img zi2">üåø</div>
            <div class="zcourse-level">Beginner</div>
            <div class="zcourse-name">Folktale Studies</div>
            <div class="zcourse-desc">The cultural significance and evolving role of folktales in African societies. Understand izinganekwane deeply ‚Äî their structure, purpose and power in communities.</div>
            <div class="zcourse-footer"><span class="zcourse-dr">Dr Sasa ¬∑ Zintsomi</span><span class="zcourse-cta">Enrol Now ‚Üí</span></div>
          </a>
          <a class="zcourse" href="https://zintsomicourses.co.za/courses-details/storytelling-in-business" target="_blank">
            <div class="zcourse-img zi3">üíº</div>
            <div class="zcourse-level">Intermediate</div>
            <div class="zcourse-name">Storytelling in Business</div>
            <div class="zcourse-desc">Apply African storytelling ‚Äî especially folktales ‚Äî to business communication, branding and strategic leadership. An African lens on corporate narrative.</div>
            <div class="zcourse-footer"><span class="zcourse-dr">Dr Sasa ¬∑ Zintsomi</span><span class="zcourse-cta">Enrol Now ‚Üí</span></div>
          </a>
          <a class="zcourse" href="https://zintsomicourses.co.za/courses-details/from-the-frontlines-preserving-south-africa-s-living-freedom-heritage" target="_blank">
            <div class="zcourse-img zi4">üèõÔ∏è</div>
            <div class="zcourse-level">Beginner</div>
            <div class="zcourse-name">From the Frontlines: Preserving South Africa's Living Freedom Heritage</div>
            <div class="zcourse-desc">Transform memory into movement. Merges history, creativity and enterprise to preserve South Africa's liberation heritage through storytelling and community action.</div>
            <div class="zcourse-footer"><span class="zcourse-dr">Dr Sasa ¬∑ Zintsomi</span><span class="zcourse-cta">Enrol Now ‚Üí</span></div>
          </a>
        </div>
        <div style="text-align:center;margin-top:2rem"><a href="https://zintsomicourses.co.za/courses" target="_blank" class="btn btn-out" style="border-color:rgba(255,255,255,.2);color:rgba(255,255,255,.6)">Browse All Courses on Zintsomi ‚Üí</a></div>
      </div>
    </div>

    <!-- SUBSCRIPTION TIERS -->
    <div style="background:#F0F7F0;padding:4rem 0">
      <div class="ctr">
        <div class="sec-lbl">Membership</div>
        <h2 class="sec-title">Choose Your <em>Plan</em></h2>
        <p class="sec-sub">Start free. Grow at your own pace. Every tier supports the preservation of African oral heritage.</p>
        <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:1.2rem;margin-top:1.5rem">
          <!-- FREE -->
          <div style="background:#fff;border-radius:10px;padding:2rem;border:2px solid var(--bd);display:flex;flex-direction:column;gap:.8rem">
            <div style="font-family:'JetBrains Mono',monospace;font-size:.5rem;letter-spacing:.12em;text-transform:uppercase;color:var(--i35)">Free Forever</div>
            <div style="font-family:'Cormorant Garamond',serif;font-size:2.2rem;font-weight:700;color:var(--ink)">R0<span style="font-size:1rem;font-weight:300;color:var(--i35)">/month</span></div>
            <div style="font-family:'Syne',sans-serif;font-size:.9rem;font-weight:700;color:var(--ink)">Explorer</div>
            <ul style="list-style:none;font-size:.83rem;color:var(--i60);line-height:2;flex:1">
              <li>‚úì All 4 interactive games</li>
              <li>‚úì Music studio (play only)</li>
              <li>‚úì Daily brain teasers</li>
              <li>‚úì Sample study notes</li>
              <li>‚úì Community wall (view)</li>
              <li>‚úì Folktale introductions</li>
              <li style="color:var(--i35)">‚úó Full Schools Hub notes</li>
              <li style="color:var(--i35)">‚úó Audio archive</li>
              <li style="color:var(--i35)">‚úó Record & share music</li>
            </ul>
            <button class="btn btn-out" style="width:100%;justify-content:center">Get Started Free</button>
          </div>
          <!-- PREMIUM -->
          <div style="background:var(--ink2);border-radius:10px;padding:2rem;border:2px solid var(--orange);display:flex;flex-direction:column;gap:.8rem;position:relative">
            <div style="position:absolute;top:-12px;left:50%;transform:translateX(-50%);background:var(--orange);font-family:'Syne',sans-serif;font-size:.55rem;font-weight:700;letter-spacing:.1em;text-transform:uppercase;color:#fff;padding:.28rem .9rem;border-radius:20px;white-space:nowrap">Most Popular</div>
            <div style="font-family:'JetBrains Mono',monospace;font-size:.5rem;letter-spacing:.12em;text-transform:uppercase;color:rgba(255,255,255,.35)">Premium</div>
            <div style="font-family:'Cormorant Garamond',serif;font-size:2.2rem;font-weight:700;color:#FFD700">R65<span style="font-size:1rem;font-weight:300;color:rgba(255,255,255,.38)">/month</span></div>
            <div style="font-family:'Syne',sans-serif;font-size:.9rem;font-weight:700;color:#fff">Community Member</div>
            <ul style="list-style:none;font-size:.83rem;color:rgba(255,255,255,.62);line-height:2;flex:1">
              <li style="color:#FFD700">‚úì Everything in Free</li>
              <li>‚úì Full Schools Hub (all grades)</li>
              <li>‚úì Complete audio archive</li>
              <li>‚úì Record & share music</li>
              <li>‚úì Upload to Community Voices</li>
              <li>‚úì Ancestor Tree leaf</li>
              <li>‚úì Monthly live storytelling event</li>
              <li>‚úì Certificate of attendance (courses)</li>
              <li>‚úì Priority support</li>
            </ul>
            <button class="btn" style="width:100%;justify-content:center;background:var(--orange)">Join Premium</button>
          </div>
          <!-- INSTITUTIONAL -->
          <div style="background:#fff;border-radius:10px;padding:2rem;border:2px solid var(--green);display:flex;flex-direction:column;gap:.8rem">
            <div style="font-family:'JetBrains Mono',monospace;font-size:.5rem;letter-spacing:.12em;text-transform:uppercase;color:var(--green)">Schools & Libraries</div>
            <div style="font-family:'Cormorant Garamond',serif;font-size:2.2rem;font-weight:700;color:var(--ink)">Custom<span style="font-size:1rem;font-weight:300;color:var(--i35)"> pricing</span></div>
            <div style="font-family:'Syne',sans-serif;font-size:.9rem;font-weight:700;color:var(--ink)">Institutional</div>
            <ul style="list-style:none;font-size:.83rem;color:var(--i60);line-height:2;flex:1">
              <li style="color:var(--green)">‚úì Everything in Premium</li>
              <li>‚úì Bulk learner licences</li>
              <li>‚úì Classroom dashboard</li>
              <li>‚úì Teacher admin tools</li>
              <li>‚úì CAPS curriculum integration</li>
              <li>‚úì Custom storytelling workshops</li>
              <li>‚úì School branding options</li>
              <li>‚úì NGO & library rates available</li>
            </ul>
            <button class="btn btn-grn" style="width:100%;justify-content:center" onclick="alert('Email us at hello@zintsomicourses.co.za for institutional pricing.')">Contact Us</button>
          </div>
        </div>
        <p style="text-align:center;font-family:'JetBrains Mono',monospace;font-size:.5rem;letter-spacing:.07em;color:var(--i35);margin-top:1.2rem">üì∂ Low-bandwidth? All free content is available in audio-first, text-summary format ‚Äî accessible on any connection.</p>
      </div>
    </div>

    <!-- COMMUNITY VOICES -->
    <div style="background:var(--ink2);padding:4rem 0">
      <div class="ctr">
        <div class="sec-lbl" style="color:rgba(255,255,255,.25)">Community Voices</div>
        <h2 class="sec-title" style="color:#fff">Share Your <em>Voice</em></h2>
        <p style="font-size:.9rem;color:rgba(255,255,255,.42);max-width:520px;margin:.5rem 0 2rem;line-height:1.85;font-weight:300">Upload your songs, riddles, lullabies, proverbs and oral stories. Build Africa's living archive ‚Äî together.</p>
        <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:1rem;margin-bottom:2rem">
          <div style="background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);border-radius:8px;padding:1.4rem;text-align:center;cursor:pointer;transition:border-color .2s" onmouseover="this.style.borderColor='rgba(202,92,8,.5)'" onmouseout="this.style.borderColor='rgba(255,255,255,.08)'">
            <div style="font-size:2rem;margin-bottom:.6rem">üéµ</div>
            <div style="font-family:'Syne',sans-serif;font-size:.72rem;font-weight:700;color:#fff;margin-bottom:.3rem">Songs & Lullabies</div>
            <div style="font-size:.72rem;color:rgba(255,255,255,.32);line-height:1.55">Umemolo, izihlabelelo, work songs, ceremonial</div>
          </div>
          <div style="background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);border-radius:8px;padding:1.4rem;text-align:center;cursor:pointer;transition:border-color .2s" onmouseover="this.style.borderColor='rgba(202,92,8,.5)'" onmouseout="this.style.borderColor='rgba(255,255,255,.08)'">
            <div style="font-size:2rem;margin-bottom:.6rem">üìñ</div>
            <div style="font-family:'Syne',sans-serif;font-size:.72rem;font-weight:700;color:#fff;margin-bottom:.3rem">Stories & Folktales</div>
            <div style="font-size:.72rem;color:rgba(255,255,255,.32);line-height:1.55">Izinganekwane in any African language</div>
          </div>
          <div style="background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);border-radius:8px;padding:1.4rem;text-align:center;cursor:pointer;transition:border-color .2s" onmouseover="this.style.borderColor='rgba(202,92,8,.5)'" onmouseout="this.style.borderColor='rgba(255,255,255,.08)'">
            <div style="font-size:2rem;margin-bottom:.6rem">üß©</div>
            <div style="font-family:'Syne',sans-serif;font-size:.72rem;font-weight:700;color:#fff;margin-bottom:.3rem">Riddles & Proverbs</div>
            <div style="font-size:.72rem;color:rgba(255,255,255,.32);line-height:1.55">Izaga, iziphicaphicwano, sayings from your community</div>
          </div>
          <div style="background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);border-radius:8px;padding:1.4rem;text-align:center;cursor:pointer;transition:border-color .2s" onmouseover="this.style.borderColor='rgba(202,92,8,.5)'" onmouseout="this.style.borderColor='rgba(255,255,255,.08)'">
            <div style="font-size:2rem;margin-bottom:.6rem">üéÆ</div>
            <div style="font-family:'Syne',sans-serif;font-size:.72rem;font-weight:700;color:#fff;margin-bottom:.3rem">Children's Games</div>
            <div style="font-size:.72rem;color:rgba(255,255,255,.32);line-height:1.55">Oral games, clapping songs, playground traditions</div>
          </div>
        </div>
        <div style="background:rgba(255,255,255,.04);border:1px dashed rgba(202,92,8,.35);border-radius:8px;padding:2rem;text-align:center">
          <p style="font-family:'Cormorant Garamond',serif;font-size:1.15rem;font-style:italic;color:rgba(255,255,255,.55);margin-bottom:1.2rem">Upload portal opening Year 1. Register your interest to be first in line.</p>
          <div style="display:flex;gap:.7rem;max-width:420px;margin:0 auto">
            <input id="cv-email" type="email" placeholder="your@email.com" style="flex:1;padding:.65rem 1rem;border-radius:4px;border:1.5px solid rgba(255,255,255,.15);background:rgba(255,255,255,.06);color:#fff;font-family:'DM Sans',sans-serif;font-size:.88rem;outline:none">
            <button class="btn" onclick="registerCV()" style="white-space:nowrap">Register Interest</button>
          </div>
          <div id="cv-confirm" style="display:none;font-family:'JetBrains Mono',monospace;font-size:.52rem;letter-spacing:.07em;color:#6EE78E;margin-top:.8rem">‚úì Registered! We'll notify you when Community Voices launches.</div>
        </div>
        <div style="margin-top:2rem;padding-top:2rem;border-top:1px solid rgba(255,255,255,.07)">
          <div style="font-family:'JetBrains Mono',monospace;font-size:.5rem;letter-spacing:.1em;text-transform:uppercase;color:rgba(255,255,255,.25);margin-bottom:.8rem">Supported Languages (Year 2+)</div>
          <div style="display:flex;gap:.5rem;flex-wrap:wrap">
            <span style="font-family:'Syne',sans-serif;font-size:.62rem;font-weight:700;padding:.28rem .75rem;border-radius:20px;border:1.5px solid rgba(255,255,255,.15);color:rgba(255,255,255,.55)">isiZulu</span>
            <span style="font-family:'Syne',sans-serif;font-size:.62rem;font-weight:700;padding:.28rem .75rem;border-radius:20px;border:1.5px solid rgba(255,255,255,.15);color:rgba(255,255,255,.55)">isiXhosa</span>
            <span style="font-family:'Syne',sans-serif;font-size:.62rem;font-weight:700;padding:.28rem .75rem;border-radius:20px;border:1.5px solid rgba(255,255,255,.15);color:rgba(255,255,255,.55)">Sesotho</span>
            <span style="font-family:'Syne',sans-serif;font-size:.62rem;font-weight:700;padding:.28rem .75rem;border-radius:20px;border:1.5px solid rgba(255,255,255,.15);color:rgba(255,255,255,.55)">Setswana</span>
            <span style="font-family:'Syne',sans-serif;font-size:.62rem;font-weight:700;padding:.28rem .75pm;border-radius:20px;border:1.5px solid rgba(255,255,255,.15);color:rgba(255,255,255,.55)">Sepedi</span>
            <span style="font-family:'Syne',sans-serif;font-size:.62rem;font-weight:700;padding:.28rem .75rem;border-radius:20px;border:1.5px solid rgba(255,255,255,.15);color:rgba(255,255,255,.55)">Tshivenda</span>
            <span style="font-family:'Syne',sans-serif;font-size:.62rem;font-weight:700;padding:.28rem .75rem;border-radius:20px;border:1.5px solid rgba(255,255,255,.15);color:rgba(255,255,255,.55)">Xitsonga</span>
            <span style="font-family:'Syne',sans-serif;font-size:.62rem;font-weight:700;padding:.28rem .75rem;border-radius:20px;border:1.5px solid rgba(255,255,255,.15);color:rgba(255,255,255,.55)">SiSwati</span>
            <span style="font-family:'Syne',sans-serif;font-size:.62rem;font-weight:700;padding:.28rem .75rem;border-radius:20px;border:1.5px solid rgba(255,255,255,.15);color:rgba(255,255,255,.55)">Afrikaans</span>
            <span style="font-family:'Syne',sans-serif;font-size:.62rem;font-weight:700;padding:.28rem .75rem;border-radius:20px;border:1.5px solid rgba(255,255,255,.15);color:rgba(255,255,255,.55)">+ More</span>
          </div>
        </div>
      </div>
    </div>

    <!-- 3-YEAR ROADMAP -->
    <div style="background:#fff;padding:4rem 0">
      <div class="ctr">
        <div class="sec-lbl">Vision</div>
        <h2 class="sec-title">Our 3-Year <em>Roadmap</em></h2>
        <p class="sec-sub">From foundation to Africa's premier oral heritage platform ‚Äî step by step.</p>
        <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:1.5rem;margin-top:1.5rem">
          <!-- YEAR 1 -->
          <div style="border-radius:10px;overflow:hidden;border:2px solid var(--orange)">
            <div style="background:var(--orange);padding:1.2rem 1.5rem">
              <div style="font-family:'JetBrains Mono',monospace;font-size:.5rem;letter-spacing:.12em;text-transform:uppercase;color:rgba(255,255,255,.65);margin-bottom:.3rem">2025 ‚Äì 2026</div>
              <div style="font-family:'Cormorant Garamond',serif;font-size:1.5rem;font-weight:700;color:#fff">Year 1</div>
              <div style="font-family:'Syne',sans-serif;font-size:.72rem;font-weight:700;color:rgba(255,255,255,.75)">Foundation & Early Growth</div>
            </div>
            <div style="padding:1.4rem;background:#fff">
              <ul style="list-style:none;font-size:.8rem;color:var(--i60);line-height:2.1">
                <li>üéØ Launch free intro content (folktales, riddles, audio clips)</li>
                <li>üéØ Community Voices submission portal</li>
                <li>üéØ Low-bandwidth audio-first formats</li>
                <li>üéØ 1,000‚Äì3,000 free users</li>
                <li>üéØ 100‚Äì300 paid subscribers</li>
                <li>üéØ 2‚Äì3 school partnerships</li>
                <li>üéØ Expand lullabies, proverbs, children's games</li>
              </ul>
              <div style="margin-top:1rem;padding:.8rem;background:rgba(202,92,8,.05);border-radius:5px;border-left:3px solid var(--orange)">
                <div style="font-family:'JetBrains Mono',monospace;font-size:.48rem;letter-spacing:.07em;text-transform:uppercase;color:var(--orange)">Subscriber Target</div>
                <div style="font-family:'Cormorant Garamond',serif;font-size:1.1rem;font-weight:700;color:var(--ink)">100‚Äì300 paid ¬∑ 3,000 free</div>
              </div>
            </div>
          </div>
          <!-- YEAR 2 -->
          <div style="border-radius:10px;overflow:hidden;border:2px solid var(--blue)">
            <div style="background:var(--blue);padding:1.2rem 1.5rem">
              <div style="font-family:'JetBrains Mono',monospace;font-size:.5rem;letter-spacing:.12em;text-transform:uppercase;color:rgba(255,255,255,.65);margin-bottom:.3rem">2026 ‚Äì 2027</div>
              <div style="font-family:'Cormorant Garamond',serif;font-size:1.5rem;font-weight:700;color:#fff">Year 2</div>
              <div style="font-family:'Syne',sans-serif;font-size:.72rem;font-weight:700;color:rgba(255,255,255,.75)">Expansion & Partnerships</div>
            </div>
            <div style="padding:1.4rem;background:#fff">
              <ul style="list-style:none;font-size:.8rem;color:var(--i60);line-height:2.1">
                <li>üöÄ University & school curriculum integration</li>
                <li>üöÄ Multilingual content: isiZulu, isiXhosa, Sesotho</li>
                <li>üöÄ Live storytelling forums & discussion spaces</li>
                <li>üöÄ Premium tier + institutional licences</li>
                <li>üöÄ 10‚Äì15 school/university partnerships</li>
                <li>üöÄ Expand VR worlds with multilingual narration</li>
                <li>üöÄ 10,000‚Äì15,000 free users</li>
              </ul>
              <div style="margin-top:1rem;padding:.8rem;background:rgba(26,110,168,.05);border-radius:5px;border-left:3px solid var(--blue)">
                <div style="font-family:'JetBrains Mono',monospace;font-size:.48rem;letter-spacing:.07em;text-transform:uppercase;color:var(--blue)">Subscriber Target</div>
                <div style="font-family:'Cormorant Garamond',serif;font-size:1.1rem;font-weight:700;color:var(--ink)">1,500‚Äì2,000 paid ¬∑ 15,000 free</div>
              </div>
            </div>
          </div>
          <!-- YEAR 3 -->
          <div style="border-radius:10px;overflow:hidden;border:2px solid var(--green)">
            <div style="background:var(--green);padding:1.2rem 1.5rem">
              <div style="font-family:'JetBrains Mono',monospace;font-size:.5rem;letter-spacing:.12em;text-transform:uppercase;color:rgba(255,255,255,.65);margin-bottom:.3rem">2027 ‚Äì 2028</div>
              <div style="font-family:'Cormorant Garamond',serif;font-size:1.5rem;font-weight:700;color:#fff">Year 3</div>
              <div style="font-family:'Syne',sans-serif;font-size:.72rem;font-weight:700;color:rgba(255,255,255,.75)">Full Oral Heritage Platform</div>
            </div>
            <div style="padding:1.4rem;background:#fff">
              <ul style="list-style:none;font-size:.8rem;color:var(--i60);line-height:2.1">
                <li>üåç Searchable African oral heritage archive</li>
                <li>üåç Global reach ‚Äî worldwide accessibility</li>
                <li>üåç AI-assisted storytelling in African languages</li>
                <li>üåç 50+ school, university & NGO partnerships</li>
                <li>üåç Government & cultural institution collaborations</li>
                <li>üåç Licensing, events, educational partnerships revenue</li>
                <li>üåç 50,000‚Äì70,000 free users worldwide</li>
              </ul>
              <div style="margin-top:1rem;padding:.8rem;background:rgba(30,132,73,.05);border-radius:5px;border-left:3px solid var(--green)">
                <div style="font-family:'JetBrains Mono',monospace;font-size:.48rem;letter-spacing:.07em;text-transform:uppercase;color:var(--green)">Subscriber Target</div>
                <div style="font-family:'Cormorant Garamond',serif;font-size:1.1rem;font-weight:700;color:var(--ink)">8,000‚Äì12,000 paid ¬∑ 70,000 free</div>
              </div>
            </div>
          </div>
        </div>
        <!-- GROWTH TABLE -->
        <div style="margin-top:2.5rem;overflow-x:auto">
          <table style="width:100%;border-collapse:collapse;font-size:.82rem">
            <thead>
              <tr style="background:var(--ink2)">
                <th style="padding:.8rem 1.2rem;text-align:left;font-family:'Syne',sans-serif;font-size:.58rem;font-weight:700;letter-spacing:.1em;text-transform:uppercase;color:rgba(255,255,255,.5)">Year</th>
                <th style="padding:.8rem 1.2rem;text-align:left;font-family:'Syne',sans-serif;font-size:.58rem;font-weight:700;letter-spacing:.1em;text-transform:uppercase;color:rgba(255,255,255,.5)">Free Users</th>
                <th style="padding:.8rem 1.2rem;text-align:left;font-family:'Syne',sans-serif;font-size:.58rem;font-weight:700;letter-spacing:.1em;text-transform:uppercase;color:rgba(255,255,255,.5)">Paid Subscribers</th>
                <th style="padding:.8rem 1.2rem;text-align:left;font-family:'Syne',sans-serif;font-size:.58rem;font-weight:700;letter-spacing:.1em;text-transform:uppercase;color:rgba(255,255,255,.5)">Institutional Partners</th>
              </tr>
            </thead>
            <tbody>
              <tr style="border-bottom:1px solid var(--bd)"><td style="padding:.9rem 1.2rem;font-family:'Syne',sans-serif;font-weight:700;color:var(--orange)">Year 1</td><td style="padding:.9rem 1.2rem;color:var(--i60)">1,000 ‚Äì 3,000</td><td style="padding:.9rem 1.2rem;color:var(--i60)">100 ‚Äì 300</td><td style="padding:.9rem 1.2rem;color:var(--i60)">2 ‚Äì 3</td></tr>
              <tr style="border-bottom:1px solid var(--bd);background:var(--paper)"><td style="padding:.9rem 1.2rem;font-family:'Syne',sans-serif;font-weight:700;color:var(--blue)">Year 2</td><td style="padding:.9rem 1.2rem;color:var(--i60)">10,000 ‚Äì 15,000</td><td style="padding:.9rem 1.2rem;color:var(--i60)">1,500 ‚Äì 2,000</td><td style="padding:.9rem 1.2rem;color:var(--i60)">10 ‚Äì 15</td></tr>
              <tr style="border-bottom:1px solid var(--bd)"><td style="padding:.9rem 1.2rem;font-family:'Syne',sans-serif;font-weight:700;color:var(--green)">Year 3</td><td style="padding:.9rem 1.2rem;color:var(--i60)">50,000 ‚Äì 70,000</td><td style="padding:.9rem 1.2rem;color:var(--i60)">8,000 ‚Äì 12,000</td><td style="padding:.9rem 1.2rem;color:var(--i60)">50+</td></tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <!-- NOTES OVERLAY -->
  <div class="notes-overlay" id="notes-overlay">
    <div class="notes-modal">
      <div class="nm-header"><div class="nm-title" id="nm-title">Topic Notes</div><button class="nm-close" onclick="closeNotes()">‚úï</button></div>
      <div class="nm-body" id="nm-body"></div>
    </div>
  </div>

  <!-- COURSES -->
  <div class="world" id="courses-world">
    <!-- Hero canvas -->
    <div style="height:300px;position:relative;overflow:hidden">
      <canvas id="courses-canvas" style="position:absolute;inset:0;width:100%;height:100%"></canvas>
      <div style="position:relative;z-index:2;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:2rem">
        <div style="font-family:'JetBrains Mono',monospace;font-size:.54rem;letter-spacing:.22em;text-transform:uppercase;color:rgba(255,255,255,.28);margin-bottom:.7rem;display:flex;align-items:center;gap:.6rem"><span style="width:22px;height:1px;background:#C39BD3;display:inline-block"></span>Self-Paced ¬∑ Certificate of Attendance</div>
        <h2 style="font-family:'Cormorant Garamond',serif;font-size:clamp(2.4rem,5vw,3.8rem);font-weight:700;color:#fff;letter-spacing:-.02em">Dr Sasa's <em style="font-style:italic;color:#C39BD3">Courses</em></h2>
        <p style="font-size:.9rem;color:rgba(255,255,255,.48);max-width:500px;margin:.7rem auto 0;line-height:1.85">Four complete storytelling and heritage courses. Work through lessons at your pace. Earn your certificate when you finish.</p>
      </div>
    </div>

    <!-- Course selector -->
    <div style="background:#0d0118;border-bottom:1px solid rgba(155,89,182,.2)">
      <div class="ctr" style="padding-top:0;padding-bottom:0">
        <div style="display:flex;gap:0;overflow-x:auto" id="course-tabs">
          <button class="course-tab active" onclick="selectCourse(0)" data-idx="0">
            <span style="font-size:1.1rem;display:block;margin-bottom:.3rem">üìñ</span>
            <span style="font-family:'Syne',sans-serif;font-size:.6rem;font-weight:700;display:block">Fundamentals</span>
            <span style="font-family:'JetBrains Mono',monospace;font-size:.44rem;color:rgba(255,255,255,.28)">5 modules</span>
          </button>
          <button class="course-tab" onclick="selectCourse(1)" data-idx="1">
            <span style="font-size:1.1rem;display:block;margin-bottom:.3rem">üåø</span>
            <span style="font-family:'Syne',sans-serif;font-size:.6rem;font-weight:700;display:block">Folktale Studies</span>
            <span style="font-family:'JetBrains Mono',monospace;font-size:.44rem;color:rgba(255,255,255,.28)">5 modules</span>
          </button>
          <button class="course-tab" onclick="selectCourse(2)" data-idx="2">
            <span style="font-size:1.1rem;display:block;margin-bottom:.3rem">üíº</span>
            <span style="font-family:'Syne',sans-serif;font-size:.6rem;font-weight:700;display:block">Story in Business</span>
            <span style="font-family:'JetBrains Mono',monospace;font-size:.44rem;color:rgba(255,255,255,.28)">5 modules</span>
          </button>
          <button class="course-tab" onclick="selectCourse(3)" data-idx="3">
            <span style="font-size:1.1rem;display:block;margin-bottom:.3rem">üèõÔ∏è</span>
            <span style="font-family:'Syne',sans-serif;font-size:.6rem;font-weight:700;display:block">Frontlines Heritage</span>
            <span style="font-family:'JetBrains Mono',monospace;font-size:.44rem;color:rgba(255,255,255,.28)">5 modules</span>
          </button>
        </div>
      </div>
    </div>

    <!-- Course body -->
    <div style="background:#0a0115;min-height:600px">
      <div class="ctr" style="padding-top:2.5rem;padding-bottom:3rem">
        <div style="display:grid;grid-template-columns:280px 1fr;gap:2rem;align-items:start" id="course-layout">
          <!-- Module sidebar -->
          <div style="background:rgba(255,255,255,.03);border:1px solid rgba(155,89,182,.15);border-radius:8px;overflow:hidden;position:sticky;top:76px">
            <div style="background:rgba(155,89,182,.12);padding:1rem 1.2rem;border-bottom:1px solid rgba(155,89,182,.15)">
              <div style="font-family:'Syne',sans-serif;font-size:.62rem;font-weight:700;letter-spacing:.09em;text-transform:uppercase;color:#C39BD3">Course Modules</div>
            </div>
            <div id="module-list" style="padding:.5rem 0"></div>
            <!-- Progress bar -->
            <div style="padding:1rem 1.2rem;border-top:1px solid rgba(155,89,182,.12)">
              <div style="font-family:'JetBrains Mono',monospace;font-size:.46rem;letter-spacing:.07em;text-transform:uppercase;color:rgba(255,255,255,.28);margin-bottom:.5rem">Your Progress</div>
              <div style="background:rgba(255,255,255,.08);border-radius:20px;height:6px;overflow:hidden">
                <div id="progress-bar" style="height:100%;background:linear-gradient(90deg,#9B59B6,#C39BD3);border-radius:20px;transition:width .5s ease;width:0%"></div>
              </div>
              <div id="progress-label" style="font-family:'JetBrains Mono',monospace;font-size:.46rem;color:rgba(255,255,255,.35);margin-top:.4rem">0 of 5 complete</div>
            </div>
          </div>
          <!-- Lesson content -->
          <div id="lesson-content"></div>
        </div>
      </div>
    </div>

    <!-- Certificate overlay -->
    <div id="cert-overlay" style="display:none;position:fixed;inset:0;z-index:900;background:rgba(0,0,0,.85);align-items:center;justify-content:center;padding:1rem">
      <div style="background:#fff;border-radius:10px;width:100%;max-width:640px;overflow:hidden;box-shadow:0 20px 60px rgba(0,0,0,.5)">
        <canvas id="cert-canvas" style="width:100%;display:block"></canvas>
        <div style="padding:1.4rem;display:flex;gap:.7rem;justify-content:center;flex-wrap:wrap">
          <button class="btn" onclick="downloadCert()">‚¨á Download Certificate</button>
          <button class="btn btn-out" onclick="document.getElementById('cert-overlay').style.display='none'">Close</button>
        </div>
      </div>
    </div>
  </div>

  <!-- AUDIO -->
  <div class="world" id="audio-world">
    <div class="audio-hero" style="padding:0;height:320px;position:relative;overflow:hidden">
      <canvas id="audio-canvas" style="position:absolute;inset:0;width:100%;height:100%"></canvas>
      <div style="position:relative;z-index:2;display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;padding:2rem;text-align:center">
        <div class="sec-lbl" style="color:rgba(255,215,0,.32);justify-content:center">Folklore & Song</div>
        <h2 style="font-family:'Cormorant Garamond',serif;font-size:clamp(2.4rem,5vw,3.8rem);font-weight:700;color:#FFD700">Audio <em style="font-style:italic;color:#F5A040">Archive</em></h2>
        <p style="font-size:.88rem;color:rgba(255,255,255,.45);max-width:440px;margin:.7rem auto 0;line-height:1.85">Umemolo songs, izinganekwane, lullabies, ceremonial songs and Dr Sasa's lectures. Launching soon.</p>
      </div>
    </div>
    <div style="background:#1a0d00"><div class="ctr">
      <div class="audio-grid">
        <div class="audio-card"><div class="ac-art ac-art-1"><span class="ac-vinyl-icon">üíÉ</span><span class="ac-coming">Coming Soon</span></div><div class="ac-body"><div class="ac-name">Umemolo Songs</div><div class="ac-desc">Celebration songs at coming-of-age ceremonies.</div><button class="ac-notify">üîî Notify me when live</button></div></div>
        <div class="audio-card"><div class="ac-art ac-art-2"><span class="ac-vinyl-icon">üìñ</span><span class="ac-coming">Coming Soon</span></div><div class="ac-body"><div class="ac-name">Izinganekwane</div><div class="ac-desc">Folktales told in oral tradition ‚Äî Dr Sasa's voice.</div><button class="ac-notify">üîî Notify me when live</button></div></div>
        <div class="audio-card"><div class="ac-art ac-art-3"><span class="ac-vinyl-icon">üåô</span><span class="ac-coming">Coming Soon</span></div><div class="ac-body"><div class="ac-name">Lullabies</div><div class="ac-desc">Izihlabelelo ‚Äî gentle songs carrying children to sleep.</div><button class="ac-notify">üîî Notify me when live</button></div></div>
        <div class="audio-card"><div class="ac-art ac-art-4"><span class="ac-vinyl-icon">‚öíÔ∏è</span><span class="ac-coming">Coming Soon</span></div><div class="ac-body"><div class="ac-name">Work Songs</div><div class="ac-desc">Songs that turned labour into music and community.</div><button class="ac-notify">üîî Notify me when live</button></div></div>
        <div class="audio-card"><div class="ac-art ac-art-5"><span class="ac-vinyl-icon">üåø</span><span class="ac-coming">Coming Soon</span></div><div class="ac-body"><div class="ac-name">Ceremonial Songs</div><div class="ac-desc">Sacred songs for weddings, funerals and initiations.</div><button class="ac-notify">üîî Notify me when live</button></div></div>
        <div class="audio-card"><div class="ac-art ac-art-6"><span class="ac-vinyl-icon">üéì</span><span class="ac-coming">Coming Soon</span></div><div class="ac-body"><div class="ac-name">Dr Sasa Lectures</div><div class="ac-desc">Audio versions of Dr Sasa's cultural talks and storytelling lectures.</div><button class="ac-notify">üîî Notify me when live</button></div></div>
      </div>
    </div></div>
  </div>
</div>

<script>
// ‚ïê‚ïê‚ïê‚ïê SUPABASE ‚ïê‚ïê‚ïê‚ïê
const SUPA_URL = 'https://natjezquifgddzzawhgo.supabase.co';
const SUPA_KEY = 'sb_publishable_cF6cT_pyFJiO4kfsg_a5Ow_Pd-qx7Ix';
const supa = supabase.createClient(SUPA_URL, SUPA_KEY);
let currentUser = null;

// Check session on every page load
supa.auth.onAuthStateChange(async (event, session) => {
  if (session) {
    currentUser = session.user;
    await loadUserProfile();
  } else {
    currentUser = null;
    updateNavForUser(null);
  }
});

async function signUp(email, password, fullName) {
  const { data, error } = await supa.auth.signUp({ email, password, options: { data: { full_name: fullName } } });
  if (error) { showAuthMsg(error.message, 'error'); return; }
  // Try to create profile row ‚Äî won't fail even if table doesn't exist yet
  try {
    await supa.from('profiles').insert({ id: data.user.id, email, full_name: fullName, is_premium: false });
  } catch(e) {}
  currentUser = data.user;
  currentUser.profile = { email, full_name: fullName, is_premium: false };
  updateNavForUser(currentUser.profile);
  closeAuthModal();
  showAuthMsg('Welcome to Zintsomi!', 'ok');
}

async function logIn(email, password) {
  const { data, error } = await supa.auth.signInWithPassword({ email, password });
  if (error) { showAuthMsg(error.message, 'error'); return; }
  currentUser = data.user;
  await loadUserProfile();
  closeAuthModal();
}

async function logOut() {
  await supa.auth.signOut();
  currentUser = null;
  updateNavForUser(null);
}

async function loadUserProfile() {
  if (!currentUser) return;
  // Try to get profile from table
  try {
    const { data } = await supa.from('profiles').select('*').eq('id', currentUser.id).single();
    if (data) {
      currentUser.profile = data;
      updateNavForUser(data);
      await loadAllProgress();
      return;
    }
  } catch(e) {}
  // Fallback ‚Äî use auth metadata if profiles table not set up yet
  const meta = currentUser.user_metadata || {};
  currentUser.profile = {
    email: currentUser.email,
    full_name: meta.full_name || currentUser.email,
    is_premium: false
  };
  updateNavForUser(currentUser.profile);
}

function isPremium() {
  return currentUser && currentUser.profile && currentUser.profile.is_premium;
}

function updateNavForUser(profile) {
  const btn = document.getElementById('auth-nav-btn');
  const nameEl = document.getElementById('auth-nav-name');
  if (!btn) return;
  if (profile) {
    btn.textContent = 'Log Out';
    btn.onclick = function(){ logOut(); };
    if (nameEl) nameEl.textContent = (profile.full_name || profile.email || '') + (profile.is_premium ? ' ‚≠ê' : '');
  } else {
    btn.textContent = 'Log In';
    btn.onclick = function(){ openAuthModal(); };
    if (nameEl) nameEl.textContent = '';
  }
}

function showAuthMsg(msg, type) {
  const el = document.getElementById('auth-msg');
  if (!el) return;
  el.textContent = msg;
  el.style.color = type === 'error' ? '#F1948A' : '#6EE78E';
  el.style.display = 'block';
}

function openAuthModal() {
  document.getElementById('auth-overlay').style.display = 'flex';
}

function closeAuthModal() {
  document.getElementById('auth-overlay').style.display = 'none';
}

function toggleAuthMode() {
  const isLogin = document.getElementById('auth-mode-title').textContent === 'Log In';
  document.getElementById('auth-mode-title').textContent = isLogin ? 'Sign Up' : 'Log In';
  document.getElementById('auth-name-row').style.display = isLogin ? 'block' : 'none';
  document.getElementById('auth-submit-btn').textContent = isLogin ? 'Create Account' : 'Log In';
  document.getElementById('auth-toggle-link').textContent = isLogin ? 'Already have an account? Log in' : 'No account? Sign up free';
  document.getElementById('auth-msg').style.display = 'none';
}

function handleAuthSubmit() {
  const email = document.getElementById('auth-email').value.trim();
  const password = document.getElementById('auth-password').value;
  const isSignup = document.getElementById('auth-mode-title').textContent === 'Sign Up';
  if (isSignup) {
    const name = document.getElementById('auth-name').value.trim();
    signUp(email, password, name);
  } else {
    logIn(email, password);
  }
}

async function saveProgress(courseIndex, completedArray) {
  if (!currentUser) return;
  await supa.from('course_progress').upsert({
    user_id: currentUser.id,
    course_index: courseIndex,
    completed_modules: JSON.stringify(completedArray),
    updated_at: new Date().toISOString()
  }, { onConflict: 'user_id,course_index' });
}

async function loadAllProgress() {
  if (!currentUser) return;
  const { data } = await supa.from('course_progress').select('*').eq('user_id', currentUser.id);
  if (data) {
    data.forEach(row => {
      completedModules[row.course_index] = JSON.parse(row.completed_modules || '[]');
    });
  }
}

// ‚ïê‚ïê‚ïê‚ïê INTRO ‚ïê‚ïê‚ïê‚ïê
var introCanvas=document.getElementById('intro-canvas');
var ictx=introCanvas.getContext('2d');
var introT=0,introAnimId,introStarted=false;
var introAnimals=[{x:-.05,s:'ü¶í',speed:.0010},{x:.1,s:'ü¶è',speed:.0007}];

function resizeIC(){introCanvas.width=window.innerWidth;introCanvas.height=window.innerHeight}
resizeIC();
window.addEventListener('resize',resizeIC);

function drawSavannahFrame(t){
  var W=introCanvas.width,H=introCanvas.height;
  var p=Math.min(t/2.8,1),sp=Math.min(t/3.8,1);
  var sky=ictx.createLinearGradient(0,0,0,H);
  var r=Math.round(10+p*245),g=Math.round(12+p*100),b=Math.round(30-p*24);
  sky.addColorStop(0,'rgb('+Math.max(0,r-70)+','+Math.max(0,g-40)+','+Math.max(0,b)+')');
  sky.addColorStop(.38,'rgb('+r+','+g+','+b+')');
  sky.addColorStop(.7,'rgb('+Math.min(255,r+55)+','+Math.min(255,g+90)+','+Math.max(0,b-20)+')');
  sky.addColorStop(1,'rgb(20,7,0)');
  ictx.fillStyle=sky;ictx.fillRect(0,0,W,H);
  if(p<.65){
    ictx.fillStyle='rgba(255,255,255,'+((.65-p)/.65*.45)+')';
    for(var i=0;i<140;i++){var sx=(Math.sin(i*137.5)*.5+.5)*W,sy=(Math.sin(i*97.3)*.5+.5)*H*.48;ictx.fillRect(sx,sy,i%7===0?2:1,i%7===0?2:1)}
  }
  var gy=H*.76,sunY=gy-(sp*H*.46),sunR=Math.max(0,42+sp*22);
  if(sp>.05){
    var sg=ictx.createRadialGradient(W/2,sunY,0,W/2,sunY,sunR*3.2);
    sg.addColorStop(0,'rgba(255,248,120,.88)');sg.addColorStop(.28,'rgba(255,160,30,.55)');sg.addColorStop(1,'rgba(255,70,0,0)');
    ictx.fillStyle=sg;ictx.beginPath();ictx.arc(W/2,sunY,sunR*3.2,0,Math.PI*2);ictx.fill();
    ictx.fillStyle='rgba(255,220,60,.95)';ictx.beginPath();ictx.arc(W/2,sunY,sunR,0,Math.PI*2);ictx.fill();
  }
  var grd=ictx.createLinearGradient(0,gy,0,H);
  grd.addColorStop(0,'rgba(55,22,2,'+(0.4+p*0.55)+')');grd.addColorStop(1,'rgba(15,5,0,'+(0.5+p*0.5)+')');
  ictx.fillStyle=grd;ictx.fillRect(0,gy,W,H-gy);
  var trees=[{x:.1,h:105,w:78},{x:.25,h:78,w:58},{x:.6,h:98,w:72},{x:.77,h:68,w:52},{x:.91,h:86,w:62}];
  var op=Math.min(1,Math.max(0,(p-.08)/.55));
  trees.forEach(function(a){
    var ax=a.x*W;ictx.fillStyle='rgba(10,3,0,'+op+')';
    ictx.fillRect(ax-3.5,gy-a.h,7,a.h);
    ictx.beginPath();ictx.ellipse(ax,gy-a.h,a.w/2,a.h*.2,0,0,Math.PI*2);ictx.fill();
    ictx.beginPath();ictx.ellipse(ax-a.w*.24,gy-a.h+10,a.w*.3,a.h*.13,0,0,Math.PI*2);ictx.fill();
    ictx.beginPath();ictx.ellipse(ax+a.w*.24,gy-a.h+8,a.w*.27,a.h*.12,0,0,Math.PI*2);ictx.fill();
  });
  introAnimals.forEach(function(a){
    a.x+=a.speed;if(a.x>1.12)a.x=-.1;
    ictx.font=(H*.052)+'px serif';ictx.fillText(a.s,a.x*W,gy+8);
  });
}

function introLoop(ts){
  if(!introLoop.start)introLoop.start=ts;
  introT=(ts-introLoop.start)/1000;
  ictx.clearRect(0,0,introCanvas.width,introCanvas.height);
  drawSavannahFrame(introT);
  if(introT>1.8)document.getElementById('intro-logo').classList.add('show');
  if(introT>5.2){endIntro();return}
  introAnimId=requestAnimationFrame(introLoop);
}

function endIntro(){
  cancelAnimationFrame(introAnimId);
  document.getElementById('intro').classList.add('hide');
  document.getElementById('site').classList.add('show');
  setTimeout(function(){document.getElementById('intro').style.display='none'},1500);
  initAll();
}

document.getElementById('skip-btn').onclick=function(){endIntro()};
requestAnimationFrame(introLoop);

// ‚ïê‚ïê‚ïê‚ïê WORLDS ‚ïê‚ïê‚ïê‚ïê
function showWorld(id){
  document.querySelectorAll('.world').forEach(function(w){w.classList.remove('active')});
  document.querySelectorAll('.npill').forEach(function(p){p.classList.remove('active')});
  var w=document.getElementById(id+'-world');if(w)w.classList.add('active');
  var map={home:0,games:1,instruments:2,brain:3,tree:4,schools:5,courses:6,audio:7};
  var pills=document.querySelectorAll('.npill');
  if(pills[map[id]])pills[map[id]].classList.add('active');
  window.scrollTo({top:0,behavior:'smooth'});
  if(id==='tree')initTree();
  if(id==='brain'){initStreakDots();setPuzzleType('proverb')}
  if(id==='schools'){setSubject('maths')}
}

function initAll(){
  initFireflies();
  initStreakDots();
  setSubject('maths');
  setPuzzleType('proverb');
  initAllCanvases();
}

// ‚ïê‚ïê‚ïê‚ïê FIREFLIES ‚ïê‚ïê‚ïê‚ïê
function initFireflies(){
  var c=document.getElementById('heroR');
  for(var i=0;i<16;i++){
    var f=document.createElement('div');f.className='firefly';
    var tx=(Math.random()-.5)*180,ty=(Math.random()-.5)*180;
    f.style.cssText='left:'+(10+Math.random()*80)+'%;top:'+(10+Math.random()*80)+'%;--tx:'+tx+'px;--ty:'+ty+'px;animation:ff '+(6+Math.random()*8)+'s '+(Math.random()*6)+'s linear infinite;width:'+(2+Math.random()*2)+'px;height:'+(2+Math.random()*2)+'px;border-radius:50%;position:absolute;background:#FFD700';
    c.appendChild(f);
  }
}

// ‚ïê‚ïê‚ïê‚ïê MANCALA ‚ïê‚ïê‚ïê‚ïê
var board,mTurn,mMoves;
function initMancala(){
  board={pits:[[4,4,4,4,4,4],[4,4,4,4,4,4]],stores:[0,0]};mTurn=0;mMoves=0;
  setMMsg('Your turn ‚Äî click a pit to sow seeds');renderMancala();
  document.getElementById('m-moves').textContent='0';
  document.getElementById('p1-store').textContent='0';
  document.getElementById('p2-store').textContent='0';
}
function renderMancala(){
  var pp=document.getElementById('player-pits'),ap=document.getElementById('ai-pits');
  pp.innerHTML='';ap.innerHTML='';
  document.getElementById('store-p1').textContent=board.stores[0];
  document.getElementById('store-p2').textContent=board.stores[1];
  document.getElementById('p1-store').textContent=board.stores[0];
  document.getElementById('p2-store').textContent=board.stores[1];
  board.pits[0].forEach(function(seeds,i){
    var pit=document.createElement('div');pit.className='mancala-pit';
    if(mTurn!==0||seeds===0)pit.classList.add('disabled');
    var sd=document.createElement('div');sd.className='mancala-seeds';
    for(var s=0;s<Math.min(seeds,9);s++){var se=document.createElement('div');se.className='seed p1';sd.appendChild(se)}
    if(seeds>9){pit.textContent=seeds}else{pit.appendChild(sd)}
    if(seeds>0&&mTurn===0){(function(idx){pit.onclick=function(){sowSeeds(0,idx)}})(i)}
    pp.appendChild(pit);
  });
  var rev=[...board.pits[1]].reverse();
  rev.forEach(function(seeds){
    var pit=document.createElement('div');pit.className='mancala-pit disabled';
    var sd=document.createElement('div');sd.className='mancala-seeds';
    for(var s=0;s<Math.min(seeds,9);s++){var se=document.createElement('div');se.className='seed p2';sd.appendChild(se)}
    if(seeds>9){pit.textContent=seeds}else{pit.appendChild(sd)}
    ap.appendChild(pit);
  });
}
function sowSeeds(row,pit){
  if(mTurn!==0||board.pits[row][pit]===0)return;
  var seeds=board.pits[row][pit];board.pits[row][pit]=0;
  var curRow=row,curPit=pit,extra=false;
  while(seeds>0){
    curPit++;
    if(curRow===0&&curPit===6){board.stores[0]++;seeds--;if(seeds===0){extra=true;break}curPit=-1;curRow=1;continue}
    if(curRow===1&&curPit===6){curPit=-1;curRow=0;continue}
    board.pits[curRow][curPit]++;seeds--;
    if(seeds===0&&curRow===0&&board.pits[0][curPit]===1&&board.pits[1][5-curPit]>0){board.stores[0]+=1+board.pits[1][5-curPit];board.pits[0][curPit]=0;board.pits[1][5-curPit]=0}
  }
  mMoves++;document.getElementById('m-moves').textContent=mMoves;
  if(checkMEnd())return;
  if(extra){setMMsg('Extra turn! You landed in your store üéâ');renderMancala()}
  else{mTurn=1;setMMsg('AI is thinking...');renderMancala();setTimeout(aiMove,850)}
}
function aiMove(){
  var valid=board.pits[1].map(function(s,i){return{s:s,i:i}}).filter(function(p){return p.s>0});
  if(!valid.length){mTurn=0;renderMancala();return}
  var best=null;valid.forEach(function(p){if(p.s===6-p.i)best=p});
  if(!best)best=valid[Math.floor(Math.random()*valid.length)];
  var seeds=board.pits[1][best.i];board.pits[1][best.i]=0;
  var curRow=1,curPit=best.i,extra=false;
  while(seeds>0){
    curPit++;
    if(curRow===1&&curPit===6){board.stores[1]++;seeds--;if(seeds===0){extra=true;break}curPit=-1;curRow=0;continue}
    if(curRow===0&&curPit===6){curPit=-1;curRow=1;continue}
    board.pits[curRow][curPit]++;seeds--;
  }
  if(checkMEnd())return;
  if(extra){setTimeout(aiMove,700)}else{mTurn=0;setMMsg('Your turn ‚Äî click a pit')}
  renderMancala();
}
function checkMEnd(){
  if(board.pits[0].every(function(s){return s===0})||board.pits[1].every(function(s){return s===0})){
    board.pits.forEach(function(row,ri){row.forEach(function(s){board.stores[ri]+=s});board.pits[ri]=[0,0,0,0,0,0]});
    var w=board.stores[0]>board.stores[1]?'You win! üéâ':board.stores[0]<board.stores[1]?'AI wins ‚Äî try again!':'Draw!';
    setMMsg(w);mTurn=-1;renderMancala();return true;
  }return false;
}
function setMMsg(m){var el=document.getElementById('m-msg');if(el)el.textContent=m}

// ‚ïê‚ïê‚ïê‚ïê DIKETO ‚ïê‚ïê‚ïê‚ïê
var dSeq=[],dPlayer=[],dState='idle',dScore=0,dBest=0,dLevel=1;
var dEmojis=['ü™®','üü†','üîµ','üü¢','üü°'];
function startDiketo(){dSeq=[];dPlayer=[];dState='showing';dScore=0;dLevel=1;document.getElementById('d-score').textContent=0;document.getElementById('d-level').textContent=1;buildDiketoRound()}
function buildDiketoRound(){
  var len=2+dLevel;while(dSeq.length<len)dSeq.push(Math.floor(Math.random()*5));
  var el=document.getElementById('diketo-seq');el.innerHTML='';
  dSeq.forEach(function(v){var d=document.createElement('div');d.className='dseq-item';d.textContent=dEmojis[v];el.appendChild(d)});
  document.getElementById('d-msg').textContent='Watch carefully...';
  var idx=0,items=el.querySelectorAll('.dseq-item');
  function flash(){
    if(idx>0)items[idx-1].classList.remove('active');
    if(idx>=items.length){setTimeout(function(){dState='player';dPlayer=[];document.getElementById('d-msg').textContent='Tap in order!'},350);return}
    items[idx].classList.add('active');idx++;setTimeout(flash,Math.max(300,620-dLevel*20));
  }
  setTimeout(flash,500);
}
function diketoTap(){
  if(dState!=='player')return;
  var items=document.getElementById('diketo-seq').querySelectorAll('.dseq-item');
  var pos=dPlayer.length;
  items[pos].classList.add('correct');
  dPlayer.push(dSeq[pos]);
  if(dPlayer.length===dSeq.length){
    dScore+=dLevel*10;dBest=Math.max(dScore,dBest);dLevel++;
    document.getElementById('d-score').textContent=dScore;document.getElementById('d-best').textContent=dBest;document.getElementById('d-level').textContent=dLevel;
    dState='showing';dPlayer=[];
    setTimeout(function(){document.getElementById('d-msg').textContent='Well done! Next round...';buildDiketoRound()},700);
  }
}

// ‚ïê‚ïê‚ïê‚ïê KGATI ‚ïê‚ïê‚ïê‚ïê
var kMoves=['Jump','Skip','Step','Hop','Pause'],kAns=[],kSel=[],kLevel=1,kScore=0,kLives=3;
function startKgati(){kLives=3;kScore=0;kLevel=1;document.getElementById('k-lives').textContent=3;document.getElementById('k-score').textContent=0;buildKgati()}
function buildKgati(){
  document.getElementById('k-level').textContent=kLevel;
  var len=2+Math.min(kLevel,5);kAns=[];kSel=[];
  for(var i=0;i<len;i++)kAns.push(Math.floor(Math.random()*kMoves.length));
  var pat=document.getElementById('kgati-pattern');pat.innerHTML='';
  kMoves.forEach(function(o){
    var b=document.createElement('div');b.className='kp-item';b.textContent=o;
    b.onclick=function(){kgatiSel(o,b)};pat.appendChild(b);
  });
  document.getElementById('k-msg').textContent='Memorise: '+kAns.map(function(a){return kMoves[a]}).join(' ‚Üí ');
  setTimeout(function(){document.getElementById('k-msg').textContent='Now select the sequence!'},Math.max(1500,2000+kLevel*200));
}
function kgatiSel(move,el){
  el.classList.add('sel');kSel.push(move);
  if(kSel.length===kAns.length){
    var ok=kSel.every(function(m,i){return m===kMoves[kAns[i]]});
    if(ok){
      var j=document.getElementById('kgati-jumper');j.classList.add('jump');setTimeout(function(){j.classList.remove('jump')},280);
      kScore+=kLevel*15;kLevel++;document.getElementById('k-score').textContent=kScore;document.getElementById('k-level').textContent=kLevel;
      document.getElementById('k-msg').textContent='‚úì Perfect! Next level!';setTimeout(buildKgati,900);
    }else{
      kLives--;document.getElementById('k-lives').textContent=kLives;
      document.getElementById('k-msg').textContent=kLives>0?'‚úó Wrong ‚Äî try again!':'Game over!';
      if(kLives>0)setTimeout(buildKgati,1100);
    }
  }
}

// ‚ïê‚ïê‚ïê‚ïê NCUVA ‚ïê‚ïê‚ïê‚ïê
var nPat=[],nPicks=[],nLevel=1,nScore=0,nBest=0,nState='idle';
var nEmojis=['üî¥','üü°','üîµ','üü¢','üü†','‚ö™'];
function initNcuvaGrid(){
  var g=document.getElementById('ncuva-grid');g.innerHTML='';
  for(var i=0;i<16;i++){
    var c=document.createElement('div');c.className='ncuva-cell';c.setAttribute('data-idx',i);
    c.textContent=nEmojis[Math.floor(Math.random()*4)];
    (function(idx,cell){cell.onclick=function(){ncuvaPick(idx,cell)}})(i,c);
    g.appendChild(c);
  }
}
function startNcuva(){nLevel=1;nScore=0;nState='showing';initNcuvaGrid();showNcuvaPat()}
function showNcuvaPat(){
  var len=2+nLevel;nPat=[];nPicks=[];
  var cells=document.querySelectorAll('.ncuva-cell');
  while(nPat.length<len){var idx=Math.floor(Math.random()*16);if(!nPat.includes(idx))nPat.push(idx)}
  document.getElementById('n-msg').textContent='Memorise!';
  nPat.forEach(function(idx,i){
    setTimeout(function(){cells[idx].classList.add('lit');setTimeout(function(){cells[idx].classList.remove('lit')},460)},i*580);
  });
  setTimeout(function(){nState='player';document.getElementById('n-msg').textContent='Tap the same cells!'},nPat.length*580+380);
}
function ncuvaPick(idx,el){
  if(nState!=='player')return;
  nPicks.push(idx);
  var expected=nPat[nPicks.length-1];
  if(idx===expected){
    el.classList.add('correct');
    if(nPicks.length===nPat.length){
      nScore+=nLevel*12;nLevel++;nBest=Math.max(nScore,nBest);
      document.getElementById('n-score').textContent=nScore;document.getElementById('n-best').textContent=nBest;document.getElementById('n-level').textContent=nLevel;
      document.getElementById('n-msg').textContent='‚úì Perfect memory!';nState='idle';
      setTimeout(function(){initNcuvaGrid();showNcuvaPat()},900);
    }
  }else{el.classList.add('wrong');document.getElementById('n-msg').textContent='‚úó Wrong! Try again.';nState='idle';setTimeout(startNcuva,1100)}
}

function openGame(g){var ov=document.getElementById(g+'-overlay');if(!ov)return;ov.classList.add('open');if(g==='mancala')initMancala();if(g==='ncuva')initNcuvaGrid()}
function closeGame(g){document.getElementById(g+'-overlay').classList.remove('open')}

// ‚ïê‚ïê‚ïê‚ïê AUDIO ENGINE ‚ïê‚ïê‚ïê‚ïê
var AudioCtx=window.AudioContext||window.webkitAudioContext;
var aCtx=null;
function getAC(){if(!aCtx)aCtx=new AudioCtx();if(aCtx.state==='suspended')aCtx.resume();return aCtx}
var isRec=false,recData=[],loopOn=false;
function playDrum(el,zone){
  el.classList.add('hit');setTimeout(function(){el.classList.remove('hit')},110);
  var ac=getAC(),o=ac.createOscillator(),g=ac.createGain();
  var fmap={bass:55,tone:110,slap:220,open:80,mute:70};
  var tmap={bass:'sine',tone:'triangle',slap:'sawtooth',open:'sine',mute:'square'};
  o.frequency.setValueAtTime(fmap[zone]||100,ac.currentTime);
  o.type=tmap[zone]||'sine';
  g.gain.setValueAtTime(.7,ac.currentTime);g.gain.exponentialRampToValueAtTime(.001,ac.currentTime+.28);
  o.connect(g);g.connect(ac.destination);o.start();o.stop(ac.currentTime+.28);
  if(isRec){recData.push({t:Date.now(),z:zone});addWaveBar()}
}
function playMbira(el,freq){
  el.classList.add('hit');setTimeout(function(){el.classList.remove('hit')},190);
  var ac=getAC(),o=ac.createOscillator(),g=ac.createGain();
  o.type='triangle';o.frequency.setValueAtTime(freq,ac.currentTime);
  g.gain.setValueAtTime(.48,ac.currentTime);g.gain.exponentialRampToValueAtTime(.001,ac.currentTime+1.1);
  o.connect(g);g.connect(ac.destination);o.start();o.stop(ac.currentTime+1.1);
  if(isRec){recData.push({t:Date.now(),f:freq});addWaveBar()}
}
function playHosho(el){
  if(el){el.classList.add('shake');setTimeout(function(){el.classList.remove('shake')},140)}
  var ac=getAC();var buf=ac.createBuffer(1,Math.floor(ac.sampleRate*.14),ac.sampleRate);
  var d=buf.getChannelData(0);for(var i=0;i<d.length;i++)d[i]=(Math.random()*2-1)*Math.exp(-i/2800);
  var src=ac.createBufferSource(),g=ac.createGain();src.buffer=buf;g.gain.setValueAtTime(.55,ac.currentTime);
  src.connect(g);g.connect(ac.destination);src.start();
  if(isRec){recData.push({t:Date.now(),z:'hosho'});addWaveBar()}
}
function playUhadi(el,freq){
  el.classList.add('pluck');setTimeout(function(){el.classList.remove('pluck')},280);
  var ac=getAC(),o=ac.createOscillator(),g=ac.createGain();
  o.type='sawtooth';o.frequency.setValueAtTime(freq,ac.currentTime);
  g.gain.setValueAtTime(.38,ac.currentTime);g.gain.exponentialRampToValueAtTime(.001,ac.currentTime+2.3);
  o.connect(g);g.connect(ac.destination);o.start();o.stop(ac.currentTime+2.3);
  if(isRec){recData.push({t:Date.now(),f:freq});addWaveBar()}
}
function addWaveBar(){
  var wave=document.getElementById('rec-wave');var b=document.createElement('div');
  b.className='rec-bar';b.style.height=(18+Math.random()*18)+'px';wave.appendChild(b);
  if(wave.children.length>58)wave.removeChild(wave.firstChild);
}
function toggleRecord(){
  isRec=!isRec;var btn=document.getElementById('rec-btn');
  btn.classList.toggle('recording',isRec);
  document.getElementById('rec-status').textContent=isRec?'‚óè RECORDING':'READY';
  if(isRec){recData=[];document.getElementById('rec-wave').innerHTML=''}
}
function playback(){document.getElementById('play-ctrl').classList.add('active');setTimeout(function(){document.getElementById('play-ctrl').classList.remove('active')},550)}
function toggleLoop(){loopOn=!loopOn;document.getElementById('loop-ctrl').classList.toggle('active',loopOn)}
function clearRec(){recData=[];document.getElementById('rec-wave').innerHTML='';document.getElementById('posted-notif').style.display='none'}
function postToWall(){var n=document.getElementById('posted-notif');n.style.display='block';setTimeout(function(){n.style.display='none'},2800)}

function selectInst(inst,btn){
  document.querySelectorAll('.inst-btn').forEach(function(b){b.classList.remove('active')});
  if(btn)btn.classList.add('active');
  var area=document.getElementById('inst-play-area');
  var mFreqs=[130,146,165,175,196,220,247,262,294,330,350,392];
  var mNames=['C3','D3','E3','F3','G3','A3','B3','C4','D4','E4','F4','G4'];
  var uFreqs=[82,110,146],uNames=['Low','Mid','High'];
  var uColors=['#E6B32A','#CA5C08','#2E8FCC'];
  if(inst==='djembe'){
    area.innerHTML='<div class="inst-play-title">ü•Å Djembe</div><p class="inst-play-sub">8 zones ‚Äî bass, tone, slap. The heartbeat of West Africa.</p><div class="djembe-pads"><div class="drum-pad dp1" onclick="playDrum(this,\'bass\')">Bass L</div><div class="drum-pad dp2" onclick="playDrum(this,\'tone\')">Tone L</div><div class="drum-pad dp3" onclick="playDrum(this,\'slap\')">Slap L</div><div class="drum-pad dp4" onclick="playDrum(this,\'open\')">Open</div><div class="drum-pad dp5" onclick="playDrum(this,\'slap\')">Slap R</div><div class="drum-pad dp6" onclick="playDrum(this,\'tone\')">Tone R</div><div class="drum-pad dp7" onclick="playDrum(this,\'bass\')">Bass R</div><div class="drum-pad dp8" onclick="playDrum(this,\'mute\')">Mute</div></div>';
  } else if(inst==='mbira'){
    var keys='';mFreqs.forEach(function(f,i){var h=100+i*5;var bg=i%2===0?'linear-gradient(180deg,#8B6914,#5A4008)':'linear-gradient(180deg,#5A4008,#3A2800)';keys+='<div class="mbira-key" style="height:'+h+'px;background:'+bg+'" onclick="playMbira(this,'+f+')"><span class="mkey-label">'+mNames[i]+'</span></div>'});
    area.innerHTML='<div class="inst-play-title">üéπ Mbira</div><p class="inst-play-sub">The thumb piano of Zimbabwe. 12 keys ‚Äî each a voice speaking to the ancestors.</p><div class="mbira-keys">'+keys+'</div>';
  } else if(inst==='hosho'){
    area.innerHTML='<div class="inst-play-title">ü™ò Hosho</div><p class="inst-play-sub">The gourd shaker of Zimbabwe. Shake the rhythm that holds everything together.</p><div class="hosho-area"><div class="hosho-gourd" onclick="playHosho(this)">ü™ò</div><p style="color:rgba(255,255,255,.32);font-size:.76rem;text-align:center">Tap the gourd to shake it.</p></div>';
  } else if(inst==='uhadi'){
    var strs='';uFreqs.forEach(function(f,i){strs+='<div class="uhadi-string" onclick="playUhadi(this.querySelector(\'.uhadi-stick\'),'+f+')"><div class="uhadi-stick" style="background:linear-gradient(180deg,'+uColors[i]+',rgba(255,255,255,.08));height:'+(120+i*22)+'px"></div><div class="uhadi-label">'+uNames[i]+'</div></div>'});
    area.innerHTML='<div class="inst-play-title">üéª Uhadi</div><p class="inst-play-sub">The Xhosa musical bow. Three tones ‚Äî mournful, searching, hopeful.</p><div class="uhadi-strings">'+strs+'</div>';
  }
}

// ‚ïê‚ïê‚ïê‚ïê BRAIN TEASERS ‚ïê‚ïê‚ïê‚ïê
var streakDays=7,puzzleType='proverb',puzzleIdx=0;
function initStreakDots(){
  var d=document.getElementById('streak-dots');if(!d)return;d.innerHTML='';
  for(var i=0;i<7;i++){var s=document.createElement('div');s.className='sd'+(i<streakDays?' done':'')+(i===streakDays-1?' today':'');d.appendChild(s)}
}
function setPuzzleType(t){
  puzzleType=t;puzzleIdx=0;
  document.querySelectorAll('.ptab').forEach(function(p){p.classList.remove('active')});
  var types=['proverb','pattern','logic','maths','science','drum'];
  var tabs=document.querySelectorAll('.ptab');
  var idx=types.indexOf(t);if(tabs[idx])tabs[idx].classList.add('active');
  renderPuzzle();
}
var PZ={
  proverb:[
    {q:'Complete the Zulu proverb: <strong>"Umuntu ngumuntu nga___"</strong>',opts:['muntu','ntu','bantu','untu'],ans:'muntu',exp:'A person is a person through other people ‚Äî Ubuntu.'},
    {q:'Complete: <strong>"Izandla ziyahlambana"</strong> ‚Äî Hands wash each ___',opts:['other','themselves','alone','together'],ans:'other',exp:'We need each other ‚Äî cooperation.'},
    {q:'Fill in: <strong>"Isandla sihlamba esinye"</strong> ‚Äî One hand washes the ___',opts:['other','face','body','ground'],ans:'other',exp:'Reciprocity and mutual help.'},
    {q:'Complete: <strong>"Umuntu akaphili ______"</strong> ‚Äî A person does not live ___',opts:['alone','forever','in peace','in silence'],ans:'alone',exp:'No one thrives in isolation ‚Äî community is survival.'}
  ],
  pattern:[
    {q:'What comes next? <strong>üî∫ üî∑ üî∫ üî∑ üî∫ ___</strong>',opts:['üî∑','üî∫','üü°','‚¨õ'],ans:'üî∑',exp:'Alternating pattern: triangle, diamond repeating.'},
    {q:'Complete the sequence: <strong>2, 4, 8, 16, ___</strong>',opts:['24','32','30','28'],ans:'32',exp:'Multiply by 2 each time ‚Äî geometric sequence.'},
    {q:'What is next: <strong>1, 1, 2, 3, 5, 8, ___</strong>',opts:['11','12','13','14'],ans:'13',exp:'Fibonacci ‚Äî add the two numbers before it: 5+8=13.'},
    {q:'Next: <strong>A, C, E, G, ___</strong>',opts:['H','I','J','K'],ans:'I',exp:'Every second letter of the alphabet.'}
  ],
  logic:[
    {q:'Nandi has 3 calabashes. A boat holds only 2. Minimum trips to cross the river?',opts:['2','3','4','5'],ans:'3',exp:'Trip 1: carry 2. Return with 1. Trip 3: carry the remaining 2.'},
    {q:'A storyteller tells 2 people. Each tells 2 more. Each of those tells 2 more. After 3 rounds, how many NEW people have heard it?',opts:['6','14','8','12'],ans:'14',exp:'Round 1: 2, Round 2: 4, Round 3: 8. Total new: 2+4+8=14.'},
    {q:'All izinganekwane are stories. All stories teach lessons. Do all izinganekwane teach lessons?',opts:['Yes, always','No, never','Sometimes','Cannot tell'],ans:'Yes, always',exp:'Logical syllogism ‚Äî transitive property applies here.'}
  ],
  maths:[
    {q:'<div class="maths-scenario"><div class="ms-lbl">üìê Real World Maths</div><div class="ms-story">A baobab grows 2.3cm/year and is 14m tall. Approximately how old is it?</div></div>',opts:['600 years','609 years','570 years','650 years'],ans:'609 years',exp:'1400cm √∑ 2.3 ‚âà 608.7 ‚âà 609 years.'},
    {q:'<div class="maths-scenario"><div class="ms-lbl">üìä Statistics</div><div class="ms-story">In a village of 240 people, 3 out of every 8 attend the weekly storytelling circle. How many attend?</div></div>',opts:['80','90','100','75'],ans:'90',exp:'240 √ó (3/8) = 90 people.'},
    {q:'<div class="maths-scenario"><div class="ms-lbl">üí∞ Financial Maths</div><div class="ms-story">A course costs R3 500. A student saves R250/month. Price increases 8% per year. Can they afford it after 12 months?</div></div>',opts:['Yes, R3000 vs R3500','No, R3000 vs R3780','Yes, exactly enough','Need more info'],ans:'No, R3000 vs R3780',exp:'Saved: R250√ó12=R3000. New price: R3500√ó1.08=R3780. Short by R780.'},
    {q:'<div class="maths-scenario"><div class="ms-lbl">üìê Calculus</div><div class="ms-story">f(x) = 3x¬≥ - 2x + 5. What is f\'(x)?</div></div>',opts:["9x¬≤ - 2","9x¬≤ + 5","3x¬≤ - 2","9x - 2"],ans:"9x¬≤ - 2",exp:"Power rule: d/dx[3x¬≥] = 9x¬≤, d/dx[-2x] = -2, d/dx[5] = 0."}
  ],
  science:[
    {q:'<div class="maths-scenario"><div class="ms-lbl">‚ö° Physics ‚Äî Momentum</div><div class="ms-story">A 0.2kg drum stick moves at 8 m/s and stops in 0.05s. What is the impulse?</div></div>',opts:['1.6 N¬∑s','0.8 N¬∑s','3.2 N¬∑s','0.4 N¬∑s'],ans:'1.6 N¬∑s',exp:'Impulse = mŒîv = 0.2 √ó 8 = 1.6 N¬∑s'},
    {q:'<div class="maths-scenario"><div class="ms-lbl">üß™ Chemistry ‚Äî pH</div><div class="ms-story">A solution has [H‚Å∫] = 1√ó10‚Åª¬π¬≤ mol/L. Is it acid, base, or neutral?</div></div>',opts:['Acid (pH=12)','Base (pH=12)','Neutral (pH=7)','Cannot tell'],ans:'Base (pH=12)',exp:'pH = -log(10‚Åª¬π¬≤) = 12. Above 7 = basic/alkaline.'},
    {q:'A gene is autosomal. Both parents are Aa √ó Aa. What % of offspring are homozygous recessive (aa)?',opts:['25%','50%','75%','0%'],ans:'25%',exp:'Punnett square: AA(25%) Aa(50%) aa(25%).'},
    {q:'<div class="maths-scenario"><div class="ms-lbl">‚ö° Physics ‚Äî Work</div><div class="ms-story">A 15kg drum is carried 100m up a 30¬∞ incline. How much work against gravity? (g=9.8)</div></div>',opts:['14 700 J','7 350 J','29 400 J','3 675 J'],ans:'7 350 J',exp:'W = mgh = 15 √ó 9.8 √ó (100 √ó sin30¬∞) = 15 √ó 9.8 √ó 50 = 7350 J'}
  ],
  drum:[
    {pat:['ü•Å','¬∑','ü•Å','ü•Å','¬∑','ü•Å'],ans:4,q:'Count only the drum HITS (ü•Å), not the rests (¬∑):'},
    {pat:['ü•Å','ü•Å','¬∑','ü•Å','¬∑','¬∑','ü•Å'],ans:4,q:'How many drum hits in this sequence?'},
    {pat:['ü•Å','¬∑','¬∑','ü•Å','ü•Å','¬∑','ü•Å','¬∑','ü•Å'],ans:5,q:'Count the beats (ü•Å):'}
  ]
};

function renderPuzzle(){
  var stage=document.getElementById('puzzle-stage');
  if(puzzleType==='drum'){renderDrum();return}
  var arr=PZ[puzzleType];if(!arr){stage.innerHTML='<p style="color:var(--i60);font-style:italic;padding:2rem">More puzzles coming soon...</p>';return}
  var p=arr[puzzleIdx%arr.length];
  var html='<div class="puzzle-q">'+p.q+'</div><div class="puzzle-options" id="popts"></div><div class="puzzle-result" id="presult"></div><div class="puzzle-nav"><div class="puzzle-pts">+'+(puzzleType==='maths'||puzzleType==='science'?25:15)+' pts per correct</div><div style="display:flex;gap:.55rem"><button class="btn btn-out" onclick="puzzleNav(-1)">‚Üê Prev</button><button class="btn" onclick="puzzleNav(1)">Next ‚Üí</button></div></div>';
  stage.innerHTML=html;
  var opts=document.getElementById('popts');
  p.opts.forEach(function(o){
    var b=document.createElement('button');b.className='p-opt';b.textContent=o;
    b.onclick=function(){checkAns(o,p.ans,p.exp,b,opts)};
    opts.appendChild(b);
  });
}
function checkAns(chosen,correct,exp,el,opts){
  opts.querySelectorAll('.p-opt').forEach(function(b){b.classList.add('disabled');b.onclick=null});
  var res=document.getElementById('presult');
  if(chosen===correct){el.classList.add('correct');res.className='puzzle-result correct';res.innerHTML='<strong>‚úì Correct!</strong> '+exp}
  else{el.classList.add('wrong');res.className='puzzle-result wrong';res.innerHTML='<strong>‚úó Not quite.</strong> The answer is "'+correct+'". '+exp;opts.querySelectorAll('.p-opt').forEach(function(b){if(b.textContent===correct)b.classList.add('correct')})}
  res.style.display='block';
}
function puzzleNav(dir){puzzleIdx=Math.max(0,puzzleIdx+dir);renderPuzzle()}
function renderDrum(){
  var p=PZ.drum[puzzleIdx%PZ.drum.length];
  var beats=p.pat.map(function(b){return '<div class="drum-beat">'+b+'</div>'}).join('');
  var stage=document.getElementById('puzzle-stage');
  stage.innerHTML='<div class="puzzle-q">'+p.q+'</div><div class="drum-sequence">'+beats+'</div><div class="puzzle-options" id="popts"></div><div class="puzzle-result" id="presult"></div><div class="puzzle-nav"><div class="puzzle-pts">+20 pts</div><div style="display:flex;gap:.55rem"><button class="btn btn-out" onclick="puzzleNav(-1)">‚Üê Prev</button><button class="btn" onclick="puzzleNav(1)">Next ‚Üí</button></div></div>';
  var opts=document.getElementById('popts');
  var choices=[p.ans-1,p.ans,p.ans+1,p.ans+2].sort(function(){return Math.random()-.5});
  choices.forEach(function(n){
    var b=document.createElement('button');b.className='p-opt';b.textContent=n;
    b.onclick=function(){checkAns(String(n),String(p.ans),'Count only the ü•Å symbols.',b,opts)};
    opts.appendChild(b);
  });
  var dbeats=stage.querySelectorAll('.drum-beat');var bi=0;
  var anim=setInterval(function(){if(bi>0)dbeats[bi-1].classList.remove('active');if(bi>=dbeats.length){clearInterval(anim);return}dbeats[bi].classList.add('active');bi++},380);
}

// ‚ïê‚ïê‚ïê‚ïê ANCESTOR TREE ‚ïê‚ïê‚ïê‚ïê
var treeCanvas,treeCtx,treeLeaves=[],treeFF=[],treeRunning=false;
var leafNames=['Thandi ¬∑ Durban','Sipho ¬∑ JHB','Nomvula ¬∑ CT','Lerato ¬∑ Pretoria','Ayanda ¬∑ PE','Bongani ¬∑ Soweto','Zanele ¬∑ Bloemfontein','Kagiso ¬∑ Kimberley','Mihlali ¬∑ EL'];
function initTree(){
  treeCanvas=document.getElementById('tree-canvas');if(!treeCanvas||treeRunning)return;
  treeCtx=treeCanvas.getContext('2d');treeRunning=true;
  treeCanvas.width=treeCanvas.offsetWidth;treeCanvas.height=treeCanvas.offsetHeight;
  var cx=treeCanvas.width/2,cy=treeCanvas.height*.55;
  treeLeaves=[];
  for(var i=0;i<247;i++){
    var a=Math.random()*Math.PI*2,d=45+Math.random()*115;
    treeLeaves.push({x:cx+Math.cos(a)*d,y:cy-75-Math.random()*d*.82,sz:3+Math.random()*4.5,glow:Math.random()>.82,name:leafNames[Math.floor(Math.random()*leafNames.length)],hue:80+Math.random()*70,al:.48+Math.random()*.5});
  }
  treeFF=[];
  for(var j=0;j<28;j++)treeFF.push({x:Math.random()*treeCanvas.width,y:Math.random()*treeCanvas.height,vx:(Math.random()-.5)*.7,vy:(Math.random()-.5)*.7,ph:Math.random()*Math.PI*2});
  treeCanvas.onmousemove=treeHover;
  treeAnimLoop();
}
function treeAnimLoop(){
  if(!treeCanvas)return;
  treeCanvas.width=treeCanvas.offsetWidth;treeCanvas.height=treeCanvas.offsetHeight;
  var W=treeCanvas.width,H=treeCanvas.height,cx=W/2,cy=H*.58;
  var tc=treeCtx;
  var skGrad=tc.createRadialGradient(cx,cy*.25,0,cx,cy*.25,W*.82);
  skGrad.addColorStop(0,'#020d1a');skGrad.addColorStop(.55,'#030f20');skGrad.addColorStop(1,'#010810');
  tc.fillStyle=skGrad;tc.fillRect(0,0,W,H);
  tc.fillStyle='rgba(255,255,255,0.55)';
  for(var i=0;i<180;i++){var sx=(Math.sin(i*137.5)*.5+.5)*W,sy=(Math.sin(i*97.3)*.5+.5)*H*.48;tc.fillRect(sx,sy,i%9===0?2:1,i%9===0?2:1)}
  var rg=tc.createRadialGradient(cx,cy,0,cx,cy,130);
  var t=Date.now()/1000;
  rg.addColorStop(0,'rgba(0,90,30,'+(0.12+Math.sin(t*.7)*.04)+')');rg.addColorStop(1,'transparent');
  tc.fillStyle=rg;tc.beginPath();tc.ellipse(cx,cy,130,44,0,0,Math.PI*2);tc.fill();
  drawTreeBranch(tc,cx,cy,W*.013,88,-Math.PI/2,6);
  var now=Date.now()/1000;
  treeLeaves.forEach(function(l){
    var pulse=l.glow?(Math.sin(now*1.8+l.hue)*.5+.5):0;
    tc.shadowBlur=l.glow?12+pulse*8:0;tc.shadowColor='hsl('+l.hue+',80%,60%)';
    tc.globalAlpha=l.al;
    tc.fillStyle='hsl('+l.hue+','+(55+pulse*22)+'%,'+(28+pulse*22)+'%)';
    tc.beginPath();tc.arc(l.x,l.y,l.sz*(1+pulse*.28),0,Math.PI*2);tc.fill();
    tc.globalAlpha=1;tc.shadowBlur=0;
  });
  treeFF.forEach(function(f){
    f.x+=f.vx;f.y+=f.vy;f.ph+=.038;
    if(f.x<0||f.x>W)f.vx*=-1;if(f.y<0||f.y>H)f.vy*=-1;
    tc.globalAlpha=Math.sin(f.ph)*.45+.28;tc.fillStyle='#FFD700';tc.shadowBlur=7;tc.shadowColor='#FFD700';
    tc.beginPath();tc.arc(f.x,f.y,1.4,0,Math.PI*2);tc.fill();
    tc.globalAlpha=1;tc.shadowBlur=0;
  });
  requestAnimationFrame(treeAnimLoop);
}
function drawTreeBranch(ctx,x,y,w,len,angle,depth){
  if(depth===0||w<.8)return;
  var nx=x+Math.cos(angle)*len,ny=y+Math.sin(angle)*len;
  ctx.strokeStyle='rgba('+(105-depth*8)+','+(62+depth*4)+',18,'+(0.68+depth*.04)+')';
  ctx.lineWidth=w;ctx.shadowBlur=depth===6?6:0;ctx.shadowColor='rgba(100,181,232,.18)';
  ctx.beginPath();ctx.moveTo(x,y);ctx.lineTo(nx,ny);ctx.stroke();ctx.shadowBlur=0;
  var sp=.34+Math.random()*.09,lr=.67+Math.random()*.08;
  drawTreeBranch(ctx,nx,ny,w*.64,len*lr,angle-sp,depth-1);
  drawTreeBranch(ctx,nx,ny,w*.64,len*lr,angle+sp,depth-1);
  if(depth===2&&Math.random()>.42)drawTreeBranch(ctx,nx,ny,w*.38,len*.48,angle+(Math.random()-.5)*.75,depth-2);
}
function treeHover(e){
  var rect=treeCanvas.getBoundingClientRect(),mx=e.clientX-rect.left,my=e.clientY-rect.top;
  var pop=document.getElementById('leaf-popup'),near=null;
  treeLeaves.forEach(function(l){if(!near&&Math.hypot(l.x-mx,l.y-my)<l.sz*2.8)near=l});
  if(near){pop.style.display='block';pop.style.left=(mx+12)+'px';pop.style.top=(my-44)+'px';pop.innerHTML='<strong>'+near.name+'</strong>Contributed to Zintsomi'}
  else pop.style.display='none';
}
function growLeaf(){
  var name=prompt('Enter your name to add your leaf to the Ancestor Tree:');if(!name)return;
  var tc=treeCanvas,cx=tc.width/2,cy=tc.height*.55;
  var a=Math.random()*Math.PI*2,d=50+Math.random()*110;
  treeLeaves.push({x:cx+Math.cos(a)*d,y:cy-75-Math.random()*d*.8,sz:5,glow:true,name:name+' ¬∑ Just now',hue:90+Math.random()*60,al:1});
  document.getElementById('leaf-count').textContent=treeLeaves.length;
}

// ‚ïê‚ïê‚ïê‚ïê SCHOOLS ‚ïê‚ïê‚ïê‚ïê
var curGrade=12,curSubject='maths';
function setGrade(g){
  curGrade=g;
  document.querySelectorAll('.grade-pill').forEach(function(p){p.classList.remove('active')});
  var pills=document.querySelectorAll('.grade-pill');
  var map={12:0,11:1,10:2};if(pills[map[g]])pills[map[g]].classList.add('active');
  setSubject(curSubject);
}
function setSubject(s){
  curSubject=s;
  document.querySelectorAll('.sub-tab').forEach(function(t){t.classList.remove('active')});
  var tabs=document.querySelectorAll('.sub-tab');
  var map={maths:0,science:1,english:2,zulu:3,lifesci:4};
  if(tabs[map[s]])tabs[map[s]].classList.add('active');
  renderTopics(s);
}
var TOPICS={
  maths:[
    {ic:'‚àë',n:'Sequences & Series',s:'Arithmetic, geometric, sigma notation',b:'Paper 1',cl:'maths'},
    {ic:"f'",n:'Differential Calculus',s:'Limits, rules, optimisation, rates of change',b:'Paper 1 ‚Äî High Value',cl:'maths'},
    {ic:'f(x)',n:'Functions & Inverses',s:'Parabola, hyperbola, exponential, logarithm',b:'Paper 1',cl:'maths'},
    {ic:'%',n:'Finance & Growth',s:'Compound interest, annuities, depreciation',b:'Paper 1',cl:'maths'},
    {ic:'P()',n:'Probability',s:'Counting, Venn diagrams, tree diagrams',b:'Paper 1',cl:'maths'},
    {ic:'sin',n:'Trigonometry',s:'Compound angles, general solutions, 3D',b:'Paper 2',cl:'maths'},
    {ic:'‚äô',n:'Euclidean Geometry',s:'Circle theorems, proportionality theorem',b:'Paper 2 ‚Äî High Value',cl:'maths'},
    {ic:'xy',n:'Analytical Geometry',s:'Lines, circles, perpendicular distance',b:'Paper 2',cl:'maths'},
    {ic:'r',n:'Statistics & Regression',s:'Scatter plots, correlation, regression line',b:'Paper 2',cl:'maths'}
  ],
  science:[
    {ic:'p',n:'Momentum & Impulse',s:"Newton's laws, collisions, impulse-momentum",b:'Physics P1',cl:'science'},
    {ic:'‚Üë‚Üì',n:'Vertical Projectile Motion',s:'Free-fall, v-t graphs, air resistance',b:'Physics P1',cl:'science'},
    {ic:'W',n:'Work, Energy & Power',s:'Work-energy theorem, conservation',b:'Physics P1 ‚Äî Key',cl:'science'},
    {ic:'~',n:'Electrodynamics',s:'Generators, motors, AC vs DC, transformers',b:'Physics P1',cl:'science'},
    {ic:'üåä',n:'Doppler Effect',s:'Moving sources, frequency shift',b:'Physics P1',cl:'science'},
    {ic:'‚öó',n:'Organic Chemistry',s:'Alkanes, alkenes, alcohols, carboxylic acids',b:'Chemistry P2 ‚Äî Key',cl:'science'},
    {ic:'‚áå',n:'Chemical Equilibrium',s:"Le Chatelier's principle, Kc calculations",b:'Chemistry P2',cl:'science'},
    {ic:'pH',n:'Acids & Bases',s:'pH, titrations, buffer solutions',b:'Chemistry P2',cl:'science'},
    {ic:'e‚Åª',n:'Electrochemistry',s:'Galvanic & electrolytic cells, standard potentials',b:'Chemistry P2',cl:'science'}
  ],
  english:[
    {ic:'‚úç',n:'Essay Writing',s:'Argumentative, discursive, narrative, descriptive',b:'Paper 3 ‚Äî 100 marks',cl:''},
    {ic:'üìñ',n:'Comprehension',s:'Tone, inference, vocabulary, reading strategies',b:'Paper 1',cl:''},
    {ic:'üìö',n:'Literature ‚Äî Set Works',s:'Themes, characters, language devices analysis',b:'Paper 2',cl:''},
    {ic:'üó£',n:'Oral Presentation',s:'Structure, delivery, language use, confidence',b:'Continuous',cl:''},
    {ic:'‚úè',n:'Language & Editing',s:'Grammar, punctuation, sentence structure',b:'Paper 1',cl:''}
  ],
  zulu:[
    {ic:'üìú',n:'Izinganekwane (Folktales)',s:'Analysis, oral performance, structure',b:'Iphepha 2 ‚Äî Key',cl:''},
    {ic:'üéô',n:'Iziqongo (Poetry)',s:'Devices, themes, tone, performance',b:'Iphepha 2',cl:''},
    {ic:'‚úç',n:'Indaba & Inkondlo',s:'Narrative essay and poetry writing',b:'Iphepha 3',cl:''},
    {ic:'üìù',n:'Ulimi ‚Äî Grammar',s:'Izincwadi, izinkondlo, izimo zezindaba',b:'Iphepha 1',cl:''},
    {ic:'üëÇ',n:'Ukuphipha (Oral)',s:'Listening, speaking, reading aloud',b:'Continuous',cl:''}
  ],
  lifesci:[
    {ic:'üß¨',n:'DNA, RNA & Protein Synthesis',s:'Transcription, translation, mutations',b:'Paper 1 ‚Äî Key',cl:'science'},
    {ic:'üß´',n:'Genetics & Inheritance',s:"Mendel's laws, codominance, sex-linked traits",b:'Paper 1 ‚Äî Key',cl:'science'},
    {ic:'ü¶é',n:'Evolution',s:'Natural selection, speciation, evidence',b:'Paper 1',cl:'science'},
    {ic:'üíä',n:'Human Endocrine System',s:'Hormones, feedback loops, diabetes',b:'Paper 1',cl:'science'},
    {ic:'üåø',n:'Ecosystems & Biodiversity',s:'Food webs, nutrient cycles, conservation',b:'Paper 2',cl:'science'}
  ]
};
function renderTopics(s){
  var g=document.getElementById('topic-grid');if(!g)return;
  var arr=TOPICS[s]||[];
  g.innerHTML=arr.map(function(t){
    var col=s==='maths'?'var(--blue)':s==='science'?'#9B59B6':'var(--green)';
    return '<div class="topic-card '+t.cl+'" onclick="openNotes(\''+t.n+'\',\''+s+'\')"><div class="tc-icon" style="color:'+col+'">'+t.ic+'</div><div class="tc-name">'+t.n+'</div><div class="tc-sub">'+t.s+'</div><div class="tc-badge '+t.cl+'">'+t.b+'</div></div>';
  }).join('');
}

var NOTES={
  'Differential Calculus':{
    secs:[
      {t:'KEY CONCEPTS',cl:'maths',body:'<p><strong>Calculus</strong> deals with rates of change. The derivative f\'(x) tells you the <strong>gradient of the tangent</strong> at any point and the <strong>rate of change</strong> of f(x).</p><div class="formula-box"><div class="f-lbl">First Principles Definition</div><div class="f-eq">f\'(x) = lim[h‚Üí0] [f(x+h) - f(x)] / h</div></div><div class="formula-box"><div class="f-lbl">Power Rule (Use this every time)</div><div class="f-eq">If f(x) = ax‚Åø then f\'(x) = an¬∑x‚Åø‚Åª¬π<br>If f(x) = constant then f\'(x) = 0</div></div>'},
      {t:'APPLICATIONS',cl:'maths',body:'<p><strong>1.</strong> Gradient of tangent ‚Üí find f\'(x), substitute x-value<br><strong>2.</strong> Equation of tangent ‚Üí use y - y‚ÇÅ = m(x - x‚ÇÅ)<br><strong>3.</strong> Stationary points ‚Üí set f\'(x) = 0, solve for x</p><div class="formula-box"><div class="f-lbl">Nature of Stationary Points</div><div class="f-eq">f\'\'(x) &lt; 0 ‚Üí Local MAXIMUM<br>f\'\'(x) &gt; 0 ‚Üí Local MINIMUM<br>f\'\'(x) = 0 ‚Üí Point of inflection</div></div><p><strong>Optimisation:</strong> Write equation for what you maximise/minimise, differentiate, set = 0.</p>'},
      {t:'PRACTICE QUESTIONS',cl:'',body:'<div class="practice-q"><div class="pq-num">Q1</div><div class="pq-q">Find f\'(x) if f(x) = 3x‚Å¥ - 2x¬≥ + 5x - 7</div><button class="pq-toggle" onclick="toggleAns(this)">Show Answer</button><div class="pq-ans">f\'(x) = 12x¬≥ - 6x¬≤ + 5. Apply power rule to each term. Constants vanish.</div></div><div class="practice-q"><div class="pq-num">Q2</div><div class="pq-q">Find the equation of the tangent to f(x) = x¬≥ - 3x at x = 2</div><button class="pq-toggle" onclick="toggleAns(this)">Show Answer</button><div class="pq-ans">f(2) = 8-6 = 2. Point: (2,2). f\'(x) = 3x¬≤-3, f\'(2) = 9. Tangent: y - 2 = 9(x - 2) ‚Üí y = 9x - 16</div></div>'}
    ],
    tip:{tx:'Always show EVERY step. Even wrong answers earn method marks. Write f\'(x) = ... clearly before substituting. Examiners award marks for correct process, not just the final answer.'}
  },
  'Momentum & Impulse':{
    secs:[
      {t:'KEY CONCEPTS',cl:'science',body:'<p><strong>Momentum</strong> (p) = mass √ó velocity. It is a <strong>vector</strong> ‚Äî direction matters!</p><div class="formula-box"><div class="f-lbl">Core Formulas</div><div class="f-eq">p = mv (kg¬∑m/s)<br>Impulse = FŒît = Œîp = mŒîv<br>Œîp = p_final - p_initial</div></div><div class="formula-box"><div class="f-lbl">Conservation of Momentum</div><div class="f-eq">Œ£p_before = Œ£p_after<br>m‚ÇÅv‚ÇÅ·µ¢ + m‚ÇÇv‚ÇÇ·µ¢ = m‚ÇÅv‚ÇÅf + m‚ÇÇv‚ÇÇf<br>Perfectly inelastic: = (m‚ÇÅ+m‚ÇÇ)vf</div></div>'},
      {t:'COLLISION TYPES',cl:'science',body:'<p><strong>Elastic:</strong> KE AND momentum conserved.<br><strong>Inelastic:</strong> Momentum conserved, KE NOT fully conserved.<br><strong>Perfectly inelastic:</strong> Objects stick together after.</p><p>‚ö†Ô∏è <strong>Sign convention is critical.</strong> Define positive direction FIRST. Write it down. Stick to it.</p>'},
      {t:'PRACTICE QUESTIONS',cl:'',body:'<div class="practice-q"><div class="pq-num">Q1</div><div class="pq-q">A 1500kg car at 20m/s east collides with a 1000kg car at 15m/s west. They stick together. Find final velocity.</div><button class="pq-toggle" onclick="toggleAns(this)">Show Answer</button><div class="pq-ans">East = positive. p = 1500(20) + 1000(-15) = 30000 - 15000 = 15000. vf = 15000/2500 = 6 m/s east.</div></div><div class="practice-q"><div class="pq-num">Q2</div><div class="pq-q">A 0.3kg ball hits a wall at 12m/s and bounces at 10m/s. Contact time = 0.02s. Find the force.</div><button class="pq-toggle" onclick="toggleAns(this)">Show Answer</button><div class="pq-ans">Toward wall = positive. Œîp = 0.3(-10-12) = -6.6 N¬∑s. F = -6.6/0.02 = -330N. Wall exerts 330N on ball.</div></div>'}
    ],
    tip:{tx:'The #1 mistake is ignoring direction. Before writing any formula, DRAW the situation and define which direction is positive. Write "+ve = east" at the top of your working and never deviate. This simple habit saves 4-6 marks every exam.'}
  },
  'DNA, RNA & Protein Synthesis':{
    secs:[
      {t:'DNA STRUCTURE',cl:'science',body:'<p>DNA is a <strong>double helix</strong> made of nucleotides. Each has: sugar (deoxyribose) + phosphate + one nitrogenous base.</p><div class="formula-box"><div class="f-lbl">Base Pairing (DNA)</div><div class="f-eq">A ‚Üî T (2 hydrogen bonds)<br>G ‚Üî C (3 hydrogen bonds)<br>Memory: "AppleTart, Good Cookie"</div></div><p><strong>Chargaff\'s Rule:</strong> %A = %T and %G = %C in any DNA sample.</p>'},
      {t:'PROTEIN SYNTHESIS',cl:'science',body:'<p><strong>Stage 1 ‚Äî Transcription</strong> (nucleus): DNA ‚Üí mRNA<br>DNA unwinds. mRNA built using base pairing. U replaces T in RNA.</p><div class="formula-box"><div class="f-lbl">RNA Base Pairing</div><div class="f-eq">DNA A ‚Üí RNA U (Uracil, NOT Thymine)<br>DNA T ‚Üí RNA A<br>DNA G ‚Üí RNA C<br>DNA C ‚Üí RNA G</div></div><p><strong>Stage 2 ‚Äî Translation</strong> (ribosome): mRNA ‚Üí Protein<br>tRNA brings amino acids. Each codon (3 bases) matches an anticodon. Chain forms a polypeptide (protein).</p>'},
      {t:'PRACTICE QUESTIONS',cl:'',body:'<div class="practice-q"><div class="pq-num">Q1</div><div class="pq-q">DNA template strand: 3\'-ATCGGTACCA-5\'. Write the mRNA sequence (5\'‚Üí3\').</div><button class="pq-toggle" onclick="toggleAns(this)">Show Answer</button><div class="pq-ans">mRNA (5\'‚Üí3\'): UAGCCAUGGU. Remember: T‚ÜíA, A‚ÜíU, G‚ÜíC, C‚ÜíG. T in DNA becomes U in mRNA.</div></div><div class="practice-q"><div class="pq-num">Q2</div><div class="pq-q">A gene has 24% Adenine. What % is Guanine?</div><button class="pq-toggle" onclick="toggleAns(this)">Show Answer</button><div class="pq-ans">A=T=24%, so A+T=48%. G+C=52%. G=C=26%.</div></div>'}
    ],
    tip:{tx:'Students lose marks confusing template strand direction. Always check if the question gives you the template (3\'‚Üí5\') or coding (5\'‚Üí3\') strand. The mRNA is complementary and antiparallel to the TEMPLATE strand. Draw a quick diagram ‚Äî 10 seconds, saves marks.'}
  },
  'Essay Writing':{
    secs:[
      {t:'ESSAY TYPES',cl:'',body:'<p><strong>Argumentative:</strong> One clear stance, defend with evidence. Persuasive voice. No "on the other hand."<br><strong>Discursive:</strong> Balanced both sides. Analytical voice. Conclude with informed view.<br><strong>Narrative:</strong> Story with vivid detail, dialogue, rising action, climax, resolution.<br><strong>Descriptive:</strong> Create scene/mood. Five senses. Show, don\'t tell.</p><div class="formula-box"><div class="f-lbl">Universal Essay Structure</div><div class="f-eq">Intro: Hook + context + thesis (3-5 sentences)<br>Body 1: Topic sentence + evidence + explanation<br>Body 2: Topic sentence + evidence + explanation<br>Body 3: Topic sentence + evidence + explanation<br>Conclusion: Restate thesis + clincher statement</div></div>'},
      {t:'LANGUAGE MARKS',cl:'',body:'<p>Markers score <strong>content</strong> and <strong>language</strong> separately. Strong language with weak content still earns good language marks.</p><p><strong>Upgrade your vocabulary:</strong><br>good ‚Üí compelling, poignant, astute<br>said ‚Üí asserted, remarked, declared, whispered<br>big ‚Üí substantial, considerable, monumental</p><p><strong>Mix sentence lengths:</strong> Short sentences hit hard. Longer, more elaborate sentences provide depth, context and demonstrate sophistication to the examiner marking your work.</p>'},
      {t:'PRACTICE',cl:'',body:'<div class="practice-q"><div class="pq-num">Q1</div><div class="pq-q">Plan (point form): "Social media does more harm than good for SA youth." Argumentative essay.</div><button class="pq-toggle" onclick="toggleAns(this)">Show Answer</button><div class="pq-ans">Intro: Position ‚Äî agree. Hook: SA teen mental health stat.<br>P1: Mental health ‚Äî anxiety, comparison culture<br>P2: Misinformation spreads ‚Äî election/health dangers<br>P3: Academic distraction ‚Äî screen time, poor performance<br>Conc: Benefits cannot offset mental health crisis</div></div>'}
    ],
    tip:{tx:'Your first sentence is everything. I\'ve marked hundreds of essays ‚Äî the introduction tells me the final mark immediately. Spend 3 minutes on your opening line. Start with a surprising fact, a question, or a vivid image. Never start with "In this essay I will discuss..."'}
  },
  'Izinganekwane (Folktales)':{
    secs:[
      {t:'WHAT YOU MUST KNOW',cl:'',body:'<p><strong>Izinganekwane</strong> (folktales) serve to entertain, teach values, explain phenomena and transmit cultural wisdom.</p><p><strong>Key structural features:</strong><br>‚Ä¢ Opening formula: "Kwasukasukela..." ‚Äî signals story begins<br>‚Ä¢ Characters: animals with human traits (anthropomorphism), heroes, tricksters, izilwane (ogres)<br>‚Ä¢ Conflict: moral ‚Äî wisdom vs foolishness, courage vs cowardice<br>‚Ä¢ Resolution: always teaches isifundo (moral lesson)<br>‚Ä¢ Closing: call and response with audience</p>'},
      {t:'LITERARY DEVICES',cl:'',body:'<p><strong>Inhlonipho</strong> ‚Äî respectful language used to elders<br><strong>Izaga</strong> (proverbs) ‚Äî woven in to reinforce the lesson<br><strong>Izifengqo</strong> (similes & metaphors) ‚Äî comparing to animals, nature<br><strong>Repetition</strong> ‚Äî events repeat in 3s, building tension and rhythm<br><strong>Onomatopoeia</strong> ‚Äî sound words mimicking animals and nature</p><p>Always link device ‚Üí purpose ‚Üí effect. Not just identification.</p>'}
    ],
    tip:{tx:'Izinganekwane exam questions always ask you to analyse AND evaluate. Don\'t just retell the story. Analyse the LANGUAGE and its effect. Then evaluate whether the storytelling achieves its purpose. Connect the folktale to contemporary society ‚Äî it shows deep cultural understanding and earns top marks.'}
  }
};

function openNotes(topic,subject){
  var overlay=document.getElementById('notes-overlay'),data=NOTES[topic];
  document.getElementById('nm-title').textContent=topic;
  if(!data){
    document.getElementById('nm-body').innerHTML='<div style="padding:2rem;text-align:center"><p style="color:var(--i60);font-style:italic;font-family:Cormorant Garamond,serif;font-size:1.1rem">Full notes for <strong>'+topic+'</strong> are being prepared by Dr Sasa\'s team. Check back soon!</p><div class="tip-box" style="margin:1.5rem 0"><div class="tip-icon">üë©‚Äçüè´</div><div><div class="tip-lbl">Dr Sasa says</div><div class="tip-text">Work through past papers and your formula sheet while these notes are finalised. The DBE website has papers from 2015-2024.</div></div></div></div>';
    overlay.classList.add('open');return;
  }
  var html='';
  data.secs.forEach(function(s){html+='<div class="nm-section"><div class="nm-section-title '+s.cl+'">'+s.t+'</div>'+s.body+'</div>'});
  if(data.tip)html+='<div class="tip-box"><div class="tip-icon">üë©‚Äçüè´</div><div><div class="tip-lbl">Dr Sasa\'s Exam Tip</div><div class="tip-text">'+data.tip.tx+'</div></div></div>';
  document.getElementById('nm-body').innerHTML=html;
  overlay.classList.add('open');
}
function closeNotes(){document.getElementById('notes-overlay').classList.remove('open')}
function toggleAns(btn){var a=btn.nextElementSibling;var sh=a.style.display==='block';a.style.display=sh?'none':'block';btn.textContent=sh?'Show Answer':'Hide Answer'}

// ‚ïê‚ïê‚ïê‚ïê AUDIO NOTIFICATIONS ‚ïê‚ïê‚ïê‚ïê
document.querySelectorAll('.ac-notify').forEach(function(b){b.addEventListener('click',function(){this.textContent='‚úì Will notify you!';this.style.color='#27AE60'})});

// ‚ïê‚ïê‚ïê‚ïê COURSES ENGINE ‚ïê‚ïê‚ïê‚ïê
var courseProgress = [0,0,0,0]; // completed modules per course
var activeCourse = 0;
var activeModule = 0;

var COURSES = [
  // ‚îÄ‚îÄ COURSE 0: FUNDAMENTALS OF STORYTELLING ‚îÄ‚îÄ
  { title:'Fundamentals of Storytelling', icon:'üìñ', color:'#9B59B6', tag:'Beginner ¬∑ 5 Modules',
    desc:'Master the foundational craft of storytelling ‚Äî African narrative structures, voice, performance and the living oral tradition.',
    modules:[
      { title:'What is a Story?', duration:'25 min',
        body:'<h3>The Living Nature of Story</h3><p>A story is not a fixed object. In the African oral tradition, a story is a <strong>living exchange</strong> ‚Äî it changes with the teller, the audience, the season, the mood. This is not a flaw; it is the genius of oral literature.</p><p>Western literary tradition tends to fix stories in text. The oral tradition understood something text cannot capture: <em>a story breathes</em>. It responds. It remembers. It heals.</p><div class="lesson-callout"><div class="lc-label">Dr Sasa says</div><p>"Before you can tell a story, you must understand that you are not the owner of the story. You are its vessel for this moment, in this place, with these people."</p></div><h3>The Three Circles of Story</h3><p>Every story exists in three circles simultaneously:</p><p><strong>1. The Inner Circle</strong> ‚Äî the teller\'s personal truth. What does this story mean to you? Why are you the one telling it today?</p><p><strong>2. The Community Circle</strong> ‚Äî the collective memory. How does this story connect to shared history, values, and identity?</p><p><strong>3. The Universal Circle</strong> ‚Äî the human truth. What does this story say about all people, everywhere?</p><p>A master storyteller holds all three circles open at once. The audience feels each layer even if they cannot name it.</p><div class="lesson-reflection"><div class="lr-label">Reflection Exercise</div><p>Think of one story from your childhood ‚Äî told to you by a parent, grandparent or community elder. Which of the three circles did it speak from most strongly? Write three sentences about it.</p></div>',
        quiz:{ q:'In the African oral tradition, what makes a story "living"?', opts:['It is written down carefully','It changes with teller, audience and context','It is very long and detailed','It uses formal language'], ans:1, fb:'Correct! Oral stories breathe and adapt ‚Äî this is their power, not a weakness.' }
      },
      { title:'Voice, Body & Presence', duration:'30 min',
        body:'<h3>Your Instrument</h3><p>Your voice is not just a delivery mechanism. It is the primary instrument of the storyteller ‚Äî as personal as a fingerprint, as powerful as any written word.</p><p>In oral performance, <strong>paralanguage</strong> ‚Äî the how of speaking, not the what ‚Äî carries up to 70% of meaning. Pace, pitch, pause, breath, resonance: these are your tools.</p><h3>The Pause</h3><p>The most underused tool in storytelling is silence. A well-placed pause does four things:<br>1. Creates anticipation<br>2. Signals importance<br>3. Allows the listener to catch up emotionally<br>4. Gives you, the teller, a moment to feel what comes next</p><div class="lesson-callout"><div class="lc-label">Practice technique</div><p>"Before every key moment in your story, breathe. The audience will breathe with you. Now you are one."</p></div><h3>Body as Story</h3><p>Even in seated storytelling, the body speaks. Shoulder position signals confidence or vulnerability. Eye direction creates character. Hand gesture can place characters in space around you, and the audience will unconsciously look where you point ‚Äî long after you have stopped pointing.</p><p>Traditional African storytelling used the full body as a stage ‚Äî ululation, clapping, foot-stamping. These are not decoration. They are rhythm, and rhythm is the heartbeat of story.</p><div class="lesson-reflection"><div class="lr-label">Exercise</div><p>Record yourself telling a two-minute story with no gestures and no movement. Then record it again, using only your hands and shoulders. Notice what changes in your voice automatically when your body is involved.</p></div>',
        quiz:{ q:'What percentage of meaning in oral performance comes from paralanguage (how, not what)?', opts:['About 20%','About 40%','Up to 70%','Exactly 50%'], ans:2, fb:'Up to 70% ‚Äî tone, pace, pause and resonance carry far more than words alone.' }
      },
      { title:'Structure ‚Äî The African Story Arc', duration:'35 min',
        body:'<h3>Beyond Beginning, Middle, End</h3><p>Western narrative teaches a linear arc: setup ‚Üí conflict ‚Üí resolution. This works. But African oral narrative often follows a different, richer architecture ‚Äî one that reflects a <strong>circular, communal worldview</strong>.</p><h3>The Spiral Structure</h3><p>Many izinganekwane (folktales) follow a spiral: events repeat in threes, each repetition going deeper, with more at stake. The first occurrence introduces; the second complicates; the third resolves ‚Äî but always with a twist that illuminates the lesson.</p><p>This is not repetition for lack of imagination. It is <em>deliberate pedagogy</em>. The repetition allows listeners at different levels of understanding to absorb the lesson at their own depth.</p><div class="lesson-callout"><div class="lc-label">Structural Pattern</div><p>Opening formula ‚Üí Establishing the world ‚Üí First journey/challenge ‚Üí Second journey (higher stakes) ‚Üí Third journey (transformation) ‚Üí Moral revelation ‚Üí Closing formula</p></div><h3>The Rule of Three in African Storytelling</h3><p>Three animals. Three brothers. Three attempts. Three days. The number three creates rhythm, builds anticipation, and satisfies the listener\'s sense of pattern. When the third attempt succeeds (or fails completely), there is emotional completion.</p><div class="lesson-reflection"><div class="lr-label">Analysis Exercise</div><p>Choose any folktale you know. Map it onto the spiral structure above. Where does it repeat? What deepens with each repetition? What is revealed only on the third pass?</p></div>',
        quiz:{ q:'What is the purpose of the "rule of three" repetition in African oral narratives?', opts:['To make the story longer','To create rhythm, build anticipation and allow meaning at different depths','To confuse the listener','Because three is lucky'], ans:1, fb:'Exactly ‚Äî repetition in threes is deliberate pedagogy, not padding. Each pass goes deeper.' }
      },
      { title:'Audience & Call-and-Response', duration:'25 min',
        body:'<h3>The Audience is Not Passive</h3><p>One of the most fundamental differences between oral storytelling and written literature is this: <strong>the audience is a co-creator</strong>. They are not consumers. They are participants.</p><p>The call-and-response tradition ‚Äî "Kwasukasukela!" / "Sukela!" ‚Äî is not merely a cute opening ritual. It is a <em>contract</em>. Both teller and listener agree to enter a shared imaginative space. The call initiates the agreement; the response seals it.</p><h3>Reading the Room</h3><p>A skilled oral storyteller reads the audience continuously and adjusts in real time. If energy drops ‚Äî a moment of confusion, children getting restless, adults growing distracted ‚Äî the storyteller has tools:</p><p>‚Ä¢ Sudden silence (the pause)<br>‚Ä¢ A direct question to a listener<br>‚Ä¢ A shift in voice to a whisper (audiences lean in automatically)<br>‚Ä¢ Physical movement ‚Äî standing, moving closer<br>‚Ä¢ An aside ‚Äî a brief humorous comment that acknowledges the shared space</p><div class="lesson-callout"><div class="lc-label">Traditional Opening</div><p>Zulu: "Kwasukasukela..." ‚Üí audience responds "Sukela!"<br>Xhosa: "Kwathi ke kaloku ngantsomi..." ‚Üí "Ngantsomi!"<br>These formulas say: "We are leaving the ordinary world now. Are you with me?" The response says: "Yes. Lead us."</p></div><div class="lesson-reflection"><div class="lr-label">Live Exercise</div><p>Next time you tell any story ‚Äî even informally ‚Äî use a call-and-response opening of your own invention. Notice how the audience\'s posture and attention changes the moment they respond.</p></div>',
        quiz:{ q:'What does the call-and-response opening in African storytelling actually represent?', opts:['A test of memory','A contract between teller and audience to enter shared imaginative space','A religious ritual','An entertainment warm-up'], ans:1, fb:'A contract ‚Äî both parties agree to enter a shared space together. The response is commitment.' }
      },
      { title:'Your Story ‚Äî Finding & Telling It', duration:'40 min',
        body:'<h3>The Most Dangerous Story</h3><p>The most powerful story you can tell is your own ‚Äî which is also the most frightening. Personal narrative requires vulnerability, precision, and courage. But it is the story that connects most deeply because it is the one only you can tell.</p><h3>Mining Your Own Story</h3><p>Your life is not a single story. It is an archive. The job is not to find <em>a</em> story ‚Äî it is to recognise which story serves this moment, this audience, this purpose.</p><p>Questions to excavate your story archive:<br>‚Ä¢ What is the earliest memory that still makes you feel something?<br>‚Ä¢ What failure taught you something no success could have?<br>‚Ä¢ Who are you becoming? What story does not yet exist about you ‚Äî but should?</p><div class="lesson-callout"><div class="lc-label">Dr Sasa says</div><p>"Your community\'s story lives in your body. The ways you were taught to greet, to eat, to mourn, to celebrate ‚Äî these are stories. You have been learning to tell them since birth. Now, tell them with intention."</p></div><h3>Putting It All Together</h3><p>You now have the foundations: understanding of story\'s living nature, your voice as instrument, African narrative structure, audience relationship, and personal story as source material.</p><p>The next step is practice ‚Äî not perfection. Tell a story badly to one person. Then improve it. Tell it to five. Adjust. Ten. Adjust. This is how oral tradition has always worked: stories are <em>tested in community</em>.</p><div class="lesson-reflection"><div class="lr-label">Final Exercise</div><p>Prepare a five-minute personal story using the spiral structure. Include one call-and-response moment. Tell it to someone you trust. Ask them: what did they feel? What will they remember tomorrow?</p></div>',
        quiz:{ q:'According to Dr Sasa, how have oral stories always been developed and refined?', opts:['Written down alone in private','Tested and improved in community over many tellings','Kept secret until perfect','Learned from books'], ans:1, fb:'Stories are tested in community ‚Äî each telling improves them. This is the oral tradition.' }
      }
    ]
  },
  // ‚îÄ‚îÄ COURSE 1: FOLKTALE STUDIES ‚îÄ‚îÄ
  { title:'Folktale Studies', icon:'üåø', color:'#1E8449', tag:'Beginner ¬∑ 5 Modules',
    desc:'Understand the cultural significance, evolving role and deep structure of African folktales ‚Äî izinganekwane in their living context.',
    modules:[
      { title:'What Are Izinganekwane?', duration:'25 min',
        body:'<h3>More Than Entertainment</h3><p>Izinganekwane (Zulu folktales) ‚Äî and their equivalents across African languages ‚Äî are often described as "entertainment for children." This is a profound misunderstanding. Folktales are <strong>the oldest educational technology in human history</strong>.</p><p>They encode moral codes, ecological knowledge, social rules, spiritual beliefs, and psychological wisdom in memorable narrative form. A child who hears a folktale about a greedy hare learns more about consequences than a lecture could teach.</p><div class="lesson-callout"><div class="lc-label">Definition</div><p>Inganekwane (singular): A traditional narrative, usually featuring animals or supernatural beings, transmitted orally across generations to encode community values and explain the world.</p></div><h3>The Four Functions</h3><p><strong>1. Entertain</strong> ‚Äî engage the imagination, create joy<br><strong>2. Educate</strong> ‚Äî transmit values, rules, consequences<br><strong>3. Explain</strong> ‚Äî why the leopard has spots, why the sun sets, why death exists<br><strong>4. Unite</strong> ‚Äî create shared identity, reinforce community bonds</p>',
        quiz:{ q:'What is the primary historical purpose of African folktales?', opts:['Entertainment only','A complete educational and social technology for transmitting cultural knowledge','Religious ceremony','Political control'], ans:1, fb:'Folktales are complete educational technology ‚Äî encoding values, ecology, law and psychology.' }
      },
      { title:'Characters & Archetypes', duration:'30 min',
        body:'<h3>The Cast of African Folktales</h3><p>African folktales use a remarkably consistent cast of archetypal characters across thousands of miles and dozens of cultures. This consistency is not coincidence ‚Äî it reflects shared human experience and shared ecological environment.</p><h3>The Trickster</h3><p>The hare, the spider (Anansi), the tortoise, the jackal. The trickster is the most complex figure in African folklore. They are neither hero nor villain. They survive by wit, often at others\' expense ‚Äî but their victories are often pyrrhic, and they frequently overreach and fall.</p><p>The trickster asks: <em>Is cleverness enough? Is it ethical? Where does cunning become cruelty?</em> These are questions every community must continuously answer.</p><h3>The Monster / Isigebengu</h3><p>The isidawu, the tokoloshe, the great serpent. These figures represent forces that threaten community order ‚Äî greed, deception, uncontrolled power. The community hero who defeats the monster demonstrates that collective values triumph over individual destructive force.</p><div class="lesson-callout"><div class="lc-label">Key insight</div><p>Characters in African folktales rarely have names. They are roles ‚Äî The Eldest Son, The Greedy Chief, The Clever Hare. This is deliberate: the lesson belongs to the role, not the individual. Anyone can be the Greedy Chief. Anyone can be the Clever Hare.</p></div>',
        quiz:{ q:'Why do African folktale characters often have no personal names?', opts:['The tellers forgot them','The lesson belongs to the archetypal role, not an individual','Names were taboo','Stories were too short'], ans:1, fb:'Exactly ‚Äî nameless roles mean anyone can occupy them. The lesson is universal, not personal.' }
      },
      { title:'Language & Literary Devices', duration:'35 min',
        body:'<h3>The Toolkit of the Oral Artist</h3><p>Oral literature has its own sophisticated set of literary devices ‚Äî some shared with written literature, some unique to the oral form.</p><h3>Izifengqo ‚Äî Figurative Language</h3><p>Similes and metaphors in oral tradition tend to draw from nature and community life: "brave as a buffalo," "patient as a river finding the sea." These comparisons are not clich√©s ‚Äî they are <em>compressed community knowledge</em>. The audience knows the buffalo. The comparison carries enormous meaning quickly.</p><h3>Izaga ‚Äî Proverbs</h3><p>Proverbs are the condensed wisdom of generations. A skilled storyteller weaves proverbs into narrative at key moments ‚Äî not to explain the story, but to deepen it. The proverb and the narrative illuminate each other.</p><h3>Onomatopoeia & Sound</h3><p>African languages are extraordinarily rich in sound symbolism. The crack of a branch, the rush of water, the way a lion\'s paw falls ‚Äî these can be conveyed through sound alone. In performance, these sounds create visceral reality that description cannot match.</p><h3>Repetition & Parallelism</h3><p>Repeating grammatical structures ("He walked and he walked and he walked") creates rhythm, emphasises importance, and aids memory. This is not primitive ‚Äî it is sophisticated mnemonic technology.</p>',
        quiz:{ q:'What is the function of proverbs (izaga) within a folktale narrative?', opts:['To pad the story out','To make it sound old-fashioned','To deepen meaning at key moments ‚Äî narrative and proverb illuminate each other','To confuse the audience'], ans:2, fb:'Proverbs deepen meaning ‚Äî they are compressed generational wisdom inserted at exactly the right moment.' }
      },
      { title:'Contemporary Folktale', duration:'30 min',
        body:'<h3>Is the Folktale Dead?</h3><p>A common concern: as urbanisation, digital media and globalisation accelerate, do folktales lose their relevance? The evidence suggests the opposite ‚Äî <strong>folktales are more necessary now than ever</strong>.</p><p>What changes is the context of telling, not the need. Where grandmothers once told stories around fires, contemporary storytellers tell them in schools, on stages, in podcasts, in films. The form adapts. The function remains.</p><h3>The Living Folktale</h3><p>Across Africa, contemporary artists are doing extraordinary work with folktale tradition:</p><p>‚Ä¢ Theatre companies staging izinganekwane for urban audiences<br>‚Ä¢ Animators creating folktale-inspired visual art<br>‚Ä¢ Musicians embedding folktale structure in modern compositions<br>‚Ä¢ Writers weaving oral tradition into literary fiction</p><div class="lesson-callout"><div class="lc-label">Key principle</div><p>A folktale is not a museum piece. It is a living form. Your responsibility as a storyteller is not to preserve it in amber, but to carry it forward ‚Äî changed by your time, your context, your community\'s current questions.</p></div>',
        quiz:{ q:'According to this module, what is the storyteller\'s responsibility to the folktale tradition?', opts:['Preserve it exactly as heard','Never change anything','Carry it forward ‚Äî changed by your time and community\'s current questions','Stop telling old stories'], ans:2, fb:'Carry it forward, changed by context. Preservation in amber is not tradition ‚Äî it is taxidermy.' }
      },
      { title:'Telling Your Own Folktale', duration:'45 min',
        body:'<h3>You Are the Next Link</h3><p>Every folktale you know was told by someone who also had a first time. Every tradition began with someone who decided to tell a story they believed mattered. You are not an observer of this tradition ‚Äî you are now a link in it.</p><h3>Creating an Original Folktale</h3><p>An original folktale in the African tradition needs:<br>‚Ä¢ An opening formula (create your own or use traditional)<br>‚Ä¢ An animal or supernatural character who embodies a human quality<br>‚Ä¢ A challenge that tests that quality<br>‚Ä¢ A rule-of-three journey structure<br>‚Ä¢ A resolution that reveals the moral naturally ‚Äî never stated, always felt<br>‚Ä¢ A closing that returns the audience to ordinary life</p><div class="lesson-reflection"><div class="lr-label">Final Project</div><p>Write and then tell (ideally to a real audience) an original folktale of three to five minutes. It should: use a traditional African animal character, embed one proverb, follow the spiral structure, and end with a moral that your community currently needs to hear.</p></div>',
        quiz:{ q:'In creating an original folktale in the African tradition, how should the moral be delivered?', opts:['Stated clearly at the end: "The lesson is..."','Never stated ‚Äî always felt through the story itself','Written in the programme','Said three times for emphasis'], ans:1, fb:'Never stated, always felt. If you have to tell the audience the lesson, the story has not done its work.' }
      }
    ]
  },
  // ‚îÄ‚îÄ COURSE 2: STORYTELLING IN BUSINESS ‚îÄ‚îÄ
  { title:'Storytelling in Business', icon:'üíº', color:'#CA5C08', tag:'Intermediate ¬∑ 5 Modules',
    desc:'Apply African storytelling principles to business communication, branding and strategic leadership. An African lens on corporate narrative.',
    modules:[
      { title:'Why Story Runs Business', duration:'30 min',
        body:'<h3>The Oldest Business Tool</h3><p>Before spreadsheets, before pitch decks, before market research ‚Äî there was story. Every transaction in human history has been preceded and enabled by a story: who are you, what do you offer, why should I trust you?</p><p>Modern business forgot this. The result: <strong>presentations that inform but do not move, brands that exist but do not matter, leaders who manage but do not inspire</strong>.</p><h3>What Story Does That Data Cannot</h3><p>Data proves. Story moves. Data answers "what." Story answers "why." And in every business context ‚Äî from a team meeting to an investor pitch to a customer interaction ‚Äî people act on "why," not "what."</p><div class="lesson-callout"><div class="lc-label">Research finding</div><p>Stories are remembered up to 22x more than facts alone. A story with a single data point embedded within it is more persuasive than any data-only presentation.</p></div><h3>The African Business Narrative Advantage</h3><p>African oral tradition has 5,000+ years of perfecting persuasive narrative. Ubuntu philosophy, communal decision-making, elder consensus-building ‚Äî these are not quaint traditions. They are sophisticated stakeholder management systems dressed in story.</p>',
        quiz:{ q:'What is the primary difference between what data does and what story does in business?', opts:['Data is better for everything','Data proves; story moves. Data answers what; story answers why','Story is only for marketing','They do exactly the same thing'], ans:1, fb:'Data proves, story moves ‚Äî people act on "why", and only story delivers "why" effectively.' }
      },
      { title:'The Brand as Story', duration:'35 min',
        body:'<h3>Your Brand is a Story People Tell About You</h3><p>Most businesses think of their brand as a logo, a colour palette, a tagline. These are <em>symbols</em> of a brand, not the brand itself. Your actual brand is the story your customers, employees, and community tell about you when you are not in the room.</p><h3>The Ubuntu Brand</h3><p>Ubuntu ‚Äî "I am because we are" ‚Äî offers a profound alternative to Western brand theory, which centres on the company. Ubuntu-centred branding centres the community: <em>the brand exists because the community exists; its success is the community\'s success.</em></p><p>This is not just ethical ‚Äî it is strategically superior for African markets. Consumers in communal cultures distrust brands that extract value from communities. They are fiercely loyal to brands that visibly give back, uplift, and belong.</p><div class="lesson-callout"><div class="lc-label">Brand Story Framework</div><p>Origin: Where did this begin and why does it matter?<br>Struggle: What did we have to overcome?<br>Values: What do we refuse to compromise?<br>Community: Who do we exist for beyond ourselves?<br>Vision: What world does our success help create?</p></div>',
        quiz:{ q:'What is your "actual brand" according to this module?', opts:['Your logo and colours','The story others tell about you when you are not in the room','Your tagline','Your product quality'], ans:1, fb:'Your brand is the story others tell about you ‚Äî you can influence it but never fully control it.' }
      },
      { title:'The Leader as Storyteller', duration:'30 min',
        body:'<h3>Leadership is Narrative</h3><p>Every leader has a story they are telling ‚Äî whether consciously or not. The great leaders in history were great storytellers: not because they invented facts, but because they <strong>made meaning out of circumstances</strong> and invited others into that meaning.</p><p>In the African leadership tradition, the chief or leader was expected to be a holder of community narrative ‚Äî the keeper of origin stories, the narrator of current challenges, the visionary of possible futures. Leadership and storytelling were inseparable.</p><h3>Four Stories Every Leader Must Tell</h3><p><strong>1. The Origin Story</strong> ‚Äî why we started, what we believed then<br><strong>2. The Values Story</strong> ‚Äî a specific moment when we chose who we are over what was easy<br><strong>3. The Vision Story</strong> ‚Äî a vivid, sensory picture of what success looks and feels like<br><strong>4. The Challenge Story</strong> ‚Äî what we are facing now, honestly, and why we will get through it</p>',
        quiz:{ q:'What did traditional African leadership and storytelling have in common?', opts:['Nothing ‚Äî they were separate roles','Leaders told stories only at ceremonies','Leadership and storytelling were inseparable ‚Äî leaders were keepers and tellers of community narrative','Leaders hired separate storytellers'], ans:2, fb:'Inseparable ‚Äî African leaders were expected to be holders and tellers of community narrative.' }
      },
      { title:'Pitch, Present, Persuade', duration:'40 min',
        body:'<h3>The African Pitch Structure</h3><p>Most pitch training teaches a Western framework: problem, solution, market, traction, ask. This works. But overlaid with African storytelling principles, it becomes something more powerful ‚Äî a narrative that pulls rather than pushes.</p><h3>The Story-First Pitch</h3><p><strong>1. Open with a specific person</strong> ‚Äî not "the market" but "Nomsa, a teacher in Soweto who..."<br><strong>2. Make the listener feel the problem</strong> ‚Äî not statistics but a scene<br><strong>3. Introduce the solution as a gift to that person</strong> ‚Äî not a product but an answer to a prayer<br><strong>4. Show the community that grows around it</strong> ‚Äî the Ubuntu dimension<br><strong>5. Make the ask feel like an invitation to join something</strong> ‚Äî not a transaction</p><div class="lesson-callout"><div class="lc-label">Key principle</div><p>"Never open a pitch with a slide. Open it with a sentence that makes the listener lean forward. The first ten seconds decide everything."</p></div><h3>Presenting to African Stakeholders</h3><p>When presenting to traditionally-oriented African stakeholders ‚Äî community boards, traditional councils, government bodies ‚Äî greet the room. Acknowledge elders. Situate yourself in relation to the community. Only then present your content. This is not delay; it is trust-building. Skip it at your peril.</p>',
        quiz:{ q:'How should you open an investor or stakeholder pitch according to the story-first approach?', opts:['With a market size slide','With your team credentials','With a specific person who embodies the problem you solve','With a technical demo'], ans:2, fb:'A specific person ‚Äî "Nomsa, a teacher in Soweto who..." makes the listener feel, not just understand.' }
      },
      { title:'Story for Internal Culture', duration:'35 min',
        body:'<h3>Culture is the Stories an Organisation Tells Itself</h3><p>Ask any employee "what is this company\'s culture?" and they will tell you a story ‚Äî usually about how someone was treated in a crisis, or what happened when someone broke the rules, or what a leader did when no one was watching.</p><p>You cannot mandate culture. You can only <em>curate the stories that define it</em>.</p><h3>The Story-Rich Organisation</h3><p>Organisations with strong cultures share stories constantly and deliberately:<br>‚Ä¢ Onboarding stories: "This is who we are and how we came to be"<br>‚Ä¢ Values stories: specific moments when values were demonstrated under pressure<br>‚Ä¢ Failure stories: told honestly, without blame ‚Äî "we learned this the hard way"<br>‚Ä¢ Customer stories: specific people whose lives were changed</p><div class="lesson-reflection"><div class="lr-label">Workplace exercise</div><p>At your next team meeting, share one story about a time you saw your organisation\'s stated values lived in practice. Ask one colleague to share theirs. Notice what happens to the room\'s energy.</p></div>',
        quiz:{ q:'How is organisational culture actually transmitted?', opts:['Through policy documents','Through training manuals','Through the stories an organisation tells about itself ‚Äî especially crisis stories','Through KPIs and metrics'], ans:2, fb:'Culture lives in stories ‚Äî especially what happened when things were hard. Policy documents are forgotten; stories are not.' }
      }
    ]
  },
  // ‚îÄ‚îÄ COURSE 3: FROM THE FRONTLINES ‚îÄ‚îÄ
  { title:'From the Frontlines: Preserving Heritage', icon:'üèõÔ∏è', color:'#1A6EA8', tag:'Beginner ¬∑ 5 Modules',
    desc:'Transform memory into movement. Merges history, creativity and enterprise to preserve South Africa\'s liberation heritage through storytelling and community action.',
    modules:[
      { title:'Living Heritage, Endangered Heritage', duration:'30 min',
        body:'<h3>What is Living Heritage?</h3><p>UNESCO distinguishes between tangible heritage (buildings, artefacts, landscapes) and <strong>intangible cultural heritage (ICH)</strong> ‚Äî living traditions, practices, knowledge and expressions passed from generation to generation.</p><p>In South Africa, living heritage includes: oral history and storytelling, performing arts, social practices and rituals, knowledge about nature and the universe, traditional craftsmanship.</p><h3>The Threat</h3><p>South Africa\'s liberation struggle heritage is uniquely threatened. The last generation with direct lived experience of the struggle ‚Äî the activists, the detainees, the freedom fighters, the community organisers ‚Äî is ageing. When they go, their stories go with them unless someone captures them now.</p><div class="lesson-callout"><div class="lc-label">Urgency</div><p>It is estimated that Africa loses the equivalent of a library every time an elder dies without having their stories recorded. The oral archive is disappearing in real time.</p></div><h3>Why This Matters for Democracy</h3><p>Societies that forget how their freedoms were won are vulnerable to losing them again. The preservation of struggle heritage is not nostalgia ‚Äî it is <em>democratic maintenance</em>.</p>',
        quiz:{ q:'What does UNESCO call traditions, practices and knowledge passed orally through generations?', opts:['Tangible cultural heritage','Digital heritage','Intangible cultural heritage (ICH)','Historical records'], ans:2, fb:'Intangible Cultural Heritage (ICH) ‚Äî the living, breathing traditions that no building or artefact can hold.' }
      },
      { title:'The Struggle Story ‚Äî Recording It', duration:'35 min',
        body:'<h3>Oral History as Methodology</h3><p>Oral history is a rigorous academic discipline and a powerful community practice. It involves recording the memories and testimonies of living witnesses ‚Äî not to replace written history, but to <em>add what written history omits</em>.</p><p>Written history tends to record the powerful: the signed documents, the public speeches, the named leaders. Oral history captures the unnamed: the community organiser, the ordinary person who sheltered an activist, the child who witnessed a march.</p><h3>How to Conduct an Oral History Interview</h3><p><strong>Prepare</strong> ‚Äî research the period and context; prepare open questions not yes/no questions<br><strong>Create safety</strong> ‚Äî explain how the recording will be used; get consent; create a comfortable environment<br><strong>Open gently</strong> ‚Äî "Tell me where you were born and what life was like when you were growing up"<br><strong>Follow the thread</strong> ‚Äî let the person lead; your best questions come from listening, not your script<br><strong>Return to specifics</strong> ‚Äî "Can you take me back to that day? What did you see? What did you hear?"<br><strong>Close with meaning</strong> ‚Äî "What do you want young people to know from your experience?"</p>',
        quiz:{ q:'What does oral history capture that written history often omits?', opts:['Only famous leaders','The unnamed ‚Äî community organisers, ordinary people, witnesses to events','Only negative events','Facts and statistics'], ans:1, fb:'The unnamed ‚Äî written history records power; oral history records people. Both are necessary.' }
      },
      { title:'Memory, Trauma & Healing', duration:'40 min',
        body:'<h3>Story as Medicine</h3><p>Many holders of struggle heritage carry <strong>unprocessed trauma</strong>. Detention. Torture. Exile. Loss. The request to share their story is not neutral ‚Äî it may be the first time anyone has asked.</p><p>The oral historian and storyteller working in this space must understand: <em>collecting stories is a healing act and a potential harm.</em> Done carelessly, it re-traumatises. Done with skill and care, it transforms.</p><h3>Trauma-Informed Storytelling Practice</h3><p>‚Ä¢ Always prioritise the person over the story<br>‚Ä¢ Informed consent is not a form ‚Äî it is an ongoing conversation<br>‚Ä¢ Give the storyteller control: "You can stop at any time. You do not have to answer anything."<br>‚Ä¢ Watch for signs of distress: look for the body, not just the words<br>‚Ä¢ Have a plan for what happens if someone becomes overwhelmed<br>‚Ä¢ Follow up ‚Äî the interview is not the end of your relationship</p><div class="lesson-callout"><div class="lc-label">Dr Sasa says</div><p>"When someone gives you their story, they are trusting you with something irreplaceable. Hold it carefully. It is not data. It is not content. It is a life."</p></div>',
        quiz:{ q:'What must oral historians understand about collecting struggle stories?', opts:['It is purely an academic exercise','Collecting stories is both a healing act and a potential harm ‚Äî skill and care are essential','It doesn\'t affect the storyteller','Speed is most important'], ans:1, fb:'Both healing and potential harm ‚Äî trauma-informed practice is not optional when working with struggle narratives.' }
      },
      { title:'Heritage as Enterprise', duration:'35 min',
        body:'<h3>Sustainability Through Story</h3><p>The preservation of heritage cannot rely solely on goodwill, government funding or academic interest. To be sustainable, heritage work must also be economically viable. This does not mean selling out ‚Äî it means <em>thinking creatively about value</em>.</p><h3>Heritage Enterprise Models</h3><p><strong>Tourism</strong> ‚Äî oral history walking tours, heritage site storytelling experiences, curated community encounters<br><strong>Education</strong> ‚Äî curriculum-linked programmes for schools, teacher training in oral heritage<br><strong>Media</strong> ‚Äî documentaries, podcasts, graphic novels based on oral archive<br><strong>Events</strong> ‚Äî annual storytelling festivals, commemorations, book fairs<br><strong>Digital</strong> ‚Äî online archives, apps, interactive experiences (like this platform)</p><p>Each of these can generate revenue that funds further heritage collection and preservation.</p><div class="lesson-reflection"><div class="lr-label">Enterprise exercise</div><p>Identify one heritage story or practice from your own community that is currently undocumented. Describe two enterprise models that could both preserve it and generate enough income to be sustainable.</p></div>',
        quiz:{ q:'Why must heritage preservation work also consider economic viability?', opts:['Heritage is only valuable if it makes money','To be sustainable long-term, heritage work cannot rely only on goodwill and grants','Economics and heritage never mix','It is not important'], ans:1, fb:'Sustainability requires economic thinking ‚Äî goodwill and grants alone cannot fund permanent preservation.' }
      },
      { title:'Your Community, Your Archive', duration:'45 min',
        body:'<h3>You Are the Archivist</h3><p>You do not need a university, a museum, or a government mandate to begin preserving your community\'s heritage. You need curiosity, a recording device, and the courage to ask: "Tell me about when..."</p><h3>Starting a Community Oral Archive</h3><p><strong>Step 1</strong> ‚Äî Identify your community\'s living memory holders: elders, long-term residents, former activists, traditional knowledge keepers<br><strong>Step 2</strong> ‚Äî Begin with one conversation. Record it with permission. Transcribe it.<br><strong>Step 3</strong> ‚Äî Store securely (physical and digital copies; the person keeps one)<br><strong>Step 4</strong> ‚Äî Share back with the community ‚Äî a reading, an event, an exhibition<br><strong>Step 5</strong> ‚Äî Let the archive grow organically. Other people will come forward once they see it is valued.</p><div class="lesson-callout"><div class="lc-label">Final word</div><p>"The archive does not begin in the institution. It begins in the conversation. It begins the moment you decide that this story matters enough to remember." ‚Äî Dr Nomsa Mdlalose</p></div><div class="lesson-reflection"><div class="lr-label">Course Completion Action</div><p>Before you close this course: identify one person in your life who holds a story that should not be lost. Commit to recording that conversation within the next 30 days. That commitment is the beginning of your archive.</p></div>',
        quiz:{ q:'What do you actually need to begin preserving your community\'s oral heritage?', opts:['A university degree and government funding','A professional recording studio','Curiosity, a recording device, and courage to ask elders to share','Nothing ‚Äî it will preserve itself'], ans:2, fb:'Curiosity, a device, and courage. The archive begins in one conversation. Start there.' }
      }
    ]
  }
];

var completedModules = [[],[],[],[]]; // which modules done per course

function selectCourse(idx){
  activeCourse = idx;
  activeModule = 0;
  document.querySelectorAll('.course-tab').forEach(function(t,i){ t.classList.toggle('active', i===idx); });
  renderModuleList();
  renderLesson();
}

function renderModuleList(){
  var c = COURSES[activeCourse];
  var list = document.getElementById('module-list');
  if(!list) return;
  list.innerHTML = c.modules.map(function(m,i){
    var done = completedModules[activeCourse].includes(i);
    var active = i === activeModule;
    return '<div class="module-item'+(active?' active':'')+(done?' done':'')+'" onclick="goModule('+i+')">'
      +'<span class="module-num">0'+(i+1)+'</span>'
      +'<span class="module-name">'+m.title+'</span>'
      +'<span class="module-tick">'+(done?'‚úÖ':active?'‚ñ∂':'‚óã')+'</span>'
      +'</div>';
  }).join('');
  // Progress
  var done = completedModules[activeCourse].length;
  var total = c.modules.length;
  var pct = Math.round(done/total*100);
  var pb = document.getElementById('progress-bar');
  var pl = document.getElementById('progress-label');
  if(pb) pb.style.width = pct+'%';
  if(pl) pl.textContent = done+' of '+total+' complete';
}

function goModule(idx){
  activeModule = idx;
  renderModuleList();
  renderLesson();
  var lc = document.getElementById('lesson-content');
  if(lc) lc.scrollIntoView({behavior:'smooth', block:'start'});
}

function renderLesson(){
  var course = COURSES[activeCourse];
  var mod = course.modules[activeModule];
  var isDone = completedModules[activeCourse].includes(activeModule);
  var totalMods = course.modules.length;
  var lc = document.getElementById('lesson-content');
  if(!lc) return;

  var html = '<div class="lesson-header">'
    +'<div class="lesson-course-tag">'+course.icon+' '+course.title+' ¬∑ Module 0'+(activeModule+1)+'</div>'
    +'<div class="lesson-title">'+mod.title+'</div>'
    +'<div class="lesson-meta"><span>‚è± '+mod.duration+'</span><span>'+(isDone?'‚úÖ Completed':'‚óã In progress')+'</span></div>'
    +'</div>'
    +'<div class="lesson-body">'+mod.body+'</div>';

  // Quiz
  html += '<div class="quiz-wrap" id="quiz-wrap">'
    +'<div class="quiz-title">üìù Module Quiz</div>'
    +'<div class="quiz-q">'+mod.quiz.q+'</div>'
    +'<div class="quiz-opts" id="quiz-opts">'
    +mod.quiz.opts.map(function(o,i){
      return '<button class="quiz-opt'+(isDone?' disabled':'')+'" onclick="answerQuiz('+i+','+mod.quiz.ans+',\''+mod.quiz.fb.replace(/'/g,"\\'")+'\')" '+(isDone?'disabled':'')+'>'+o+'</button>';
    }).join('')
    +'</div>'
    +'<div class="quiz-feedback" id="quiz-fb">'+(isDone?'<span style="color:#6EE78E">‚úÖ Already completed</span>':'')+'</div>'
    +'</div>';

  // Nav
  html += '<div class="lesson-nav">'
    +(activeModule>0?'<button class="btn btn-out" style="border-color:rgba(155,89,182,.4);color:#C39BD3" onclick="goModule('+(activeModule-1)+')">‚Üê Previous</button>':'<span></span>')
    +'<button class="complete-btn" id="complete-btn" onclick="markDone()" '+(isDone?'disabled':'')+'>'+( isDone?'‚úÖ Completed':'Mark Complete ‚úì')+'</button>'
    +(activeModule<totalMods-1?'<button class="btn" style="background:#9B59B6" onclick="goModule('+(activeModule+1)+')">Next Lesson ‚Üí</button>':'<button class="btn" style="background:#9B59B6" onclick="checkCertificate()">Finish Course üéì</button>')
    +'</div>';

  lc.innerHTML = html;
  if(isDone){
    var fb = document.getElementById('quiz-fb');
    if(fb){ fb.className='quiz-feedback correct'; fb.style.display='block'; fb.innerHTML='‚úÖ Module already completed'; }
  }
}

function answerQuiz(chosen, correct, feedback){
  var opts = document.querySelectorAll('.quiz-opt');
  opts.forEach(function(o){ o.classList.add('disabled'); o.disabled=true; });
  opts[chosen].classList.add(chosen===correct?'correct':'wrong');
  if(chosen!==correct) opts[correct].classList.add('correct');
  var fb = document.getElementById('quiz-fb');
  fb.className = 'quiz-feedback '+(chosen===correct?'correct':'wrong');
  fb.style.display = 'block';
  fb.innerHTML = (chosen===correct?'‚úÖ ':'‚ùå ')+feedback;
}

function markDone(){
  if(!completedModules[activeCourse].includes(activeModule)){
    completedModules[activeCourse].push(activeModule);
  }
  saveProgress(activeCourse, completedModules[activeCourse]);
  renderModuleList();
  renderLesson();
}

function checkCertificate(){
  var total = COURSES[activeCourse].modules.length;
  var done = completedModules[activeCourse].length;
  if(done < total){
    var remaining = total - done;
    alert('Almost there! Complete '+remaining+' more module'+(remaining>1?'s':'')+' to earn your certificate.');
    return;
  }
  generateCertificate();
}

function generateCertificate(){
  var overlay = document.getElementById('cert-overlay');
  overlay.style.display = 'flex';
  var canvas = document.getElementById('cert-canvas');
  var W = 700, H = 500;
  canvas.width = W; canvas.height = H;
  var ctx = canvas.getContext('2d');
  var course = COURSES[activeCourse];

  // Background gradient
  var bg = ctx.createLinearGradient(0,0,W,H);
  bg.addColorStop(0,'#0d0118'); bg.addColorStop(.5,'#1a0a2e'); bg.addColorStop(1,'#0a0520');
  ctx.fillStyle = bg; ctx.fillRect(0,0,W,H);

  // Border
  ctx.strokeStyle = 'rgba(155,89,182,.7)'; ctx.lineWidth = 3;
  ctx.strokeRect(18,18,W-36,H-36);
  ctx.strokeStyle = 'rgba(195,155,211,.25)'; ctx.lineWidth = 1;
  ctx.strokeRect(26,26,W-52,H-52);

  // Corner ornaments
  [[30,30],[W-30,30],[30,H-30],[W-30,H-30]].forEach(function(pt){
    ctx.fillStyle='rgba(155,89,182,.6)';
    ctx.beginPath(); ctx.arc(pt[0],pt[1],6,0,Math.PI*2); ctx.fill();
  });

  // Ndebele stripe top
  var stripeColors=['#C0392B','#E6B32A','#1B2A3A','#1E8449','#fff','#CA5C08','#2E8FCC'];
  stripeColors.forEach(function(c,i){ ctx.fillStyle=c; ctx.fillRect(30+i*(W-60)/7,30,(W-60)/7,8); });

  // Zintsomi brand
  ctx.fillStyle='rgba(195,155,211,.6)';
  ctx.font='bold 13px sans-serif'; ctx.textAlign='center';
  ctx.fillText('ZINTSOMI ¬∑ ORAL HERITAGE PLATFORM',W/2,68);

  // Certificate of Attendance
  ctx.fillStyle='rgba(255,255,255,.25)';
  ctx.font='italic 16px Georgia'; ctx.fillText('Certificate of Attendance',W/2,108);

  // Main title
  ctx.fillStyle='#C39BD3';
  ctx.font='bold 38px Georgia'; ctx.fillText(course.title,W/2,175);

  // Awarded to
  ctx.fillStyle='rgba(255,255,255,.55)';
  ctx.font='15px sans-serif'; ctx.fillText('This certifies that',W/2,220);
  ctx.fillStyle='#FFD700';
  ctx.font='italic bold 26px Georgia';
  ctx.fillText('A Dedicated Learner',W/2,260);

  // Body
  ctx.fillStyle='rgba(255,255,255,.48)';
  ctx.font='13px sans-serif';
  ctx.fillText('has successfully completed all modules of this course',W/2,296);
  ctx.fillText('offered through the Zintsomi Oral Heritage Platform',W/2,316);

  // Date
  var d = new Date();
  ctx.fillStyle='rgba(255,255,255,.3)';
  ctx.font='11px monospace';
  ctx.fillText('Issued: '+d.toLocaleDateString('en-ZA',{year:'numeric',month:'long',day:'numeric'}),W/2,356);

  // Signature line
  ctx.strokeStyle='rgba(255,255,255,.2)'; ctx.lineWidth=1;
  ctx.beginPath(); ctx.moveTo(W*.3,390); ctx.lineTo(W*.7,390); ctx.stroke();
  ctx.fillStyle='rgba(255,255,255,.45)';
  ctx.font='italic 13px Georgia'; ctx.fillText('Dr. Nomsa Mdlalose ‚Äî Dr. Sasa',W/2,408);
  ctx.font='10px monospace'; ctx.fillStyle='rgba(255,255,255,.2)';
  ctx.fillText('Founder ¬∑ Zintsomi',W/2,424);

  // Bottom stripe
  stripeColors.forEach(function(c,i){ ctx.fillStyle=c; ctx.fillRect(30+i*(W-60)/7,H-40,(W-60)/7,8); });
}

function downloadCert(){
  var canvas = document.getElementById('cert-canvas');
  var link = document.createElement('a');
  link.download = 'Zintsomi_Certificate_'+COURSES[activeCourse].title.replace(/\s+/g,'_')+'.png';
  link.href = canvas.toDataURL('image/png');
  link.click();
}

// Init courses world
function initCoursesWorld(){
  selectCourse(0);
}

// ‚ïê‚ïê‚ïê‚ïê AFRICAN SUNSET CANVASES ‚ïê‚ïê‚ïê‚ïê
// Each world gets a unique, different zen African landscape

// Shared sunset sky helper
function drawSunsetSky(ctx, W, H, colors, sunX, sunY, sunR){
  var sky = ctx.createLinearGradient(0, 0, 0, H);
  colors.forEach(function(c){ sky.addColorStop(c[0], c[1]); });
  ctx.fillStyle = sky; ctx.fillRect(0, 0, W, H);
  // Sun glow
  var sg = ctx.createRadialGradient(sunX, sunY, 0, sunX, sunY, sunR * 3.5);
  sg.addColorStop(0, 'rgba(255,248,160,.95)');
  sg.addColorStop(.25, 'rgba(255,180,40,.65)');
  sg.addColorStop(.6, 'rgba(255,80,0,.2)');
  sg.addColorStop(1, 'rgba(255,80,0,0)');
  ctx.fillStyle = sg; ctx.beginPath(); ctx.arc(sunX, sunY, sunR * 3.5, 0, Math.PI*2); ctx.fill();
  ctx.fillStyle = 'rgba(255,240,100,.96)'; ctx.beginPath(); ctx.arc(sunX, sunY, sunR, 0, Math.PI*2); ctx.fill();
}

// ‚îÄ‚îÄ SCENE 1: HOME ‚Äî Marula Royal Tree, lone giraffe, birds crossing ‚îÄ‚îÄ
var homeScene = { birds: [], init: false, t: 0 };
function initHomeCanvas(){
  var c = document.getElementById('home-canvas'); if(!c) return;
  var W = c.width = c.offsetWidth, H = c.height = c.offsetHeight;
  homeScene.birds = [];
  for(var i = 0; i < 7; i++){
    homeScene.birds.push({ x: -60 - i*110, y: H*.18 + Math.sin(i*1.3)*40, spd: .6+Math.random()*.5, flap: Math.random()*Math.PI*2, size: 5+Math.random()*4 });
  }
  homeScene.init = true;
  homeLoop(c);
}
function homeLoop(c){
  if(!c || !document.getElementById('home-canvas')) return;
  var W = c.width = c.offsetWidth, H = c.height = c.offsetHeight;
  var ctx = c.getContext('2d');
  homeScene.t += .016;
  var t = homeScene.t;
  // Sky ‚Äî warm amber dusk
  drawSunsetSky(ctx, W, H, [
    [0,'#1a0820'],[.18,'#6B1A00'],[.42,'#C04800'],[.62,'#E87000'],[.78,'#FFB020'],[.9,'#FFD060'],[1,'#FF8030']
  ], W * .72, H * .52, 36);
  // Horizon glow
  var hg = ctx.createLinearGradient(0, H*.6, 0, H);
  hg.addColorStop(0,'rgba(255,120,0,.15)'); hg.addColorStop(1,'rgba(20,8,0,1)');
  ctx.fillStyle = hg; ctx.fillRect(0, H*.6, W, H*.4);
  // Ground
  ctx.fillStyle = '#1a0800'; ctx.fillRect(0, H*.78, W, H*.22);
  // Ground texture strips
  ctx.fillStyle = '#2a1200';
  for(var i=0;i<8;i++){ ctx.fillRect(i*W/7, H*.78, 2, H*.22); }
  // Marula tree (Royal Tree) ‚Äî wide spreading canopy, multiple trunks
  drawMarula(ctx, W*.18, H*.78, H*.38, '#0a0300');
  // Smaller thorn bush right
  drawThornbush(ctx, W*.82, H*.78, H*.18, '#0d0400');
  drawThornbush(ctx, W*.9, H*.78, H*.12, '#0d0400');
  // Giraffe silhouette
  drawGiraffe(ctx, W*.55, H*.78, H*.28, '#0a0300');
  // Birds crossing sun
  homeScene.birds.forEach(function(b){
    b.x += b.spd; b.flap += .12;
    if(b.x > W + 80) b.x = -80;
    drawBird(ctx, b.x, b.y, b.size, b.flap, 'rgba(0,0,0,.85)');
  });
  // Stars peeking top
  ctx.fillStyle = 'rgba(255,255,255,.55)';
  [[.08,.05],[.22,.08],[.38,.03],[.62,.07],[.85,.04],[.95,.09]].forEach(function(s){ ctx.fillRect(s[0]*W, s[1]*H, 1.5, 1.5); });
  requestAnimationFrame(function(){ homeLoop(c); });
}

// ‚îÄ‚îÄ SCENE 2: INSTRUMENTS ‚Äî Drumfire camp, Marula silhouette, smoke rising ‚îÄ‚îÄ
var instScene = { smoke: [], t: 0 };
function initInstCanvas(){
  var c = document.getElementById('inst-canvas'); if(!c) return;
  instScene.smoke = [];
  for(var i=0;i<12;i++) instScene.smoke.push({ x: 0, y: 0, vx: (Math.random()-.5)*.4, vy: -.6-Math.random()*.5, alpha: .7+Math.random()*.3, r: 4+Math.random()*6, age: Math.random()*60 });
  instLoop(c);
}
function instLoop(c){
  if(!c || !document.getElementById('inst-canvas')) return;
  var W = c.width = c.offsetWidth, H = c.height = c.offsetHeight;
  var ctx = c.getContext('2d');
  instScene.t += .016;
  var t = instScene.t;
  var fireX = W * .5, groundY = H * .75;
  // Deep dusk sky ‚Äî purple-red
  drawSunsetSky(ctx, W, H, [
    [0,'#0d0018'],[.2,'#3D0A40'],[.42,'#8B1A20'],[.6,'#C03800'],[.75,'#E06010'],[.88,'#FFB040'],[1,'#FF7020']
  ], W*.62, H*.62, 30);
  // Ground
  ctx.fillStyle = '#120800'; ctx.fillRect(0, groundY, W, H - groundY);
  // Campfire glow on ground
  var fg = ctx.createRadialGradient(fireX, groundY, 0, fireX, groundY, 120);
  fg.addColorStop(0,'rgba(255,140,0,.35)'); fg.addColorStop(.5,'rgba(255,60,0,.1)'); fg.addColorStop(1,'rgba(0,0,0,0)');
  ctx.fillStyle = fg; ctx.fillRect(0,0,W,H);
  // Trees each side
  drawMarula(ctx, W*.12, groundY, H*.32, '#0a0300');
  drawMarula(ctx, W*.85, groundY, H*.26, '#0a0300');
  drawThornbush(ctx, W*.68, groundY, H*.16, '#0a0300');
  // Campfire
  drawCampfire(ctx, fireX, groundY, t);
  // Smoke particles
  instScene.smoke.forEach(function(p){
    p.age++; p.x = fireX + Math.sin(p.age * .05) * 8 + p.vx * p.age * .3;
    p.y = groundY - 20 - p.age * .8;
    if(p.age > 90){ p.age = 0; p.vx = (Math.random()-.5)*.4; }
    var a = Math.max(0, .4 - p.age/90 * .4);
    ctx.fillStyle = 'rgba(180,120,80,'+a+')';
    ctx.beginPath(); ctx.arc(p.x, p.y, p.r + p.age*.05, 0, Math.PI*2); ctx.fill();
  });
  // Moon rising right
  ctx.fillStyle = 'rgba(255,248,200,.82)';
  ctx.beginPath(); ctx.arc(W*.88, H*.15, 18, 0, Math.PI*2); ctx.fill();
  // Stars
  ctx.fillStyle = 'rgba(255,255,255,.6)';
  [[.1,.06],[.25,.12],[.45,.04],[.7,.08],[.9,.14],[.05,.18],[.35,.09]].forEach(function(s){ ctx.fillRect(s[0]*W, s[1]*H, 1.5, 1.5); });
  requestAnimationFrame(function(){ instLoop(c); });
}

// ‚îÄ‚îÄ SCENE 3: BRAIN ‚Äî Thornbush silhouettes, rising full moon, owls ‚îÄ‚îÄ
var brainScene = { owls: [], t: 0 };
function initBrainCanvas(){
  var c = document.getElementById('brain-canvas'); if(!c) return;
  brainScene.owls = [{ x: .25, blink: 0 }, { x: .72, blink: 40 }];
  brainLoop(c);
}
function brainLoop(c){
  if(!c || !document.getElementById('brain-canvas')) return;
  var W = c.width = c.offsetWidth, H = c.height = c.offsetHeight;
  var ctx = c.getContext('2d');
  brainScene.t += .016;
  var t = brainScene.t;
  // Twilight ‚Äî sun just set, indigo sky, orange horizon
  drawSunsetSky(ctx, W, H, [
    [0,'#020418'],[.22,'#0a0828'],[.45,'#1a0840'],[.62,'#5a0a20'],[.75,'#C03818'],[.85,'#E06808'],[.92,'#FFB030'],[1,'#FF8820']
  ], W*.35, H*.88, 22);
  // Ground
  ctx.fillStyle = '#0a0500'; ctx.fillRect(0, H*.8, W, H*.2);
  // Thornbushes ‚Äî signature spiky African bush
  [.05, .15, .78, .88, .95].forEach(function(x, i){
    drawThornbush(ctx, x*W, H*.8, H*(.14+i%2*.06), '#060200');
  });
  // Tall thin thorn trees centre
  drawTallThorn(ctx, W*.42, H*.8, H*.38);
  drawTallThorn(ctx, W*.52, H*.8, H*.32);
  drawTallThorn(ctx, W*.58, H*.8, H*.28);
  // Big full moon
  var moonG = ctx.createRadialGradient(W*.78, H*.2, 0, W*.78, H*.2, 45);
  moonG.addColorStop(0,'rgba(255,252,220,1)'); moonG.addColorStop(.7,'rgba(255,240,160,.9)'); moonG.addColorStop(1,'rgba(255,220,100,0)');
  ctx.fillStyle = moonG; ctx.beginPath(); ctx.arc(W*.78, H*.2, 45, 0, Math.PI*2); ctx.fill();
  // Moon craters subtle
  ctx.fillStyle = 'rgba(200,180,80,.15)';
  [[-.3,-.2,8],[.1,.3,5],[-.1,.1,4]].forEach(function(cr){ ctx.beginPath(); ctx.arc(W*.78+cr[0]*30, H*.2+cr[1]*30, cr[2], 0, Math.PI*2); ctx.fill(); });
  // Stars ‚Äî lots of them, it's night
  ctx.fillStyle = 'rgba(255,255,255,.7)';
  for(var i=0;i<35;i++){
    var sx = (Math.sin(i*137.5)*.5+.5)*W, sy = (Math.sin(i*97.3)*.5+.5)*H*.65;
    var ss = i%5===0?2:1;
    ctx.fillRect(sx, sy, ss, ss);
  }
  // Owls on branches
  brainScene.owls.forEach(function(o){
    o.blink++;
    drawOwl(ctx, o.x*W, H*.52, o.blink % 60 < 3, t);
  });
  requestAnimationFrame(function(){ brainLoop(c); });
}

// ‚îÄ‚îÄ SCENE 4: SCHOOLS ‚Äî Waterhole at golden hour, elephant, reflection ‚îÄ‚îÄ
var schoolsScene = { ripples: [], t: 0 };
function initSchoolsCanvas(){
  var c = document.getElementById('schools-canvas'); if(!c) return;
  schoolsScene.ripples = [];
  for(var i=0;i<5;i++) schoolsScene.ripples.push({ r: i*18, alpha: .3-i*.05, x: 0 });
  schoolsLoop(c);
}
function schoolsLoop(c){
  if(!c || !document.getElementById('schools-canvas')) return;
  var W = c.width = c.offsetWidth, H = c.height = c.offsetHeight;
  var ctx = c.getContext('2d');
  schoolsScene.t += .016;
  var t = schoolsScene.t;
  var waterY = H * .55, waterX = W * .48;
  // Golden hour sky
  drawSunsetSky(ctx, W, H, [
    [0,'#0a1220'],[.15,'#1a2040'],[.35,'#6B3000'],[.52,'#C06000'],[.65,'#E09020'],[.78,'#FFD040'],[.88,'#FFE070'],[1,'#FF9030']
  ], W*.5, waterY - 10, 38);
  // Land
  ctx.fillStyle = '#1a0c00'; ctx.fillRect(0, waterY, W*.22, H - waterY);
  ctx.fillRect(W*.78, waterY, W*.22, H - waterY);
  // Waterhole ‚Äî reflective pool in centre
  var wg = ctx.createLinearGradient(0, waterY, 0, H);
  wg.addColorStop(0,'#8B5500'); wg.addColorStop(.3,'#C07820'); wg.addColorStop(.6,'#E09030'); wg.addColorStop(1,'#FF8020');
  ctx.fillStyle = wg;
  ctx.beginPath();
  ctx.ellipse(waterX, waterY + (H-waterY)*.4, W*.35, (H-waterY)*.55, 0, 0, Math.PI*2);
  ctx.fill();
  // Water shimmer
  ctx.strokeStyle = 'rgba(255,220,100,.2)';
  ctx.lineWidth = 1;
  for(var i=0;i<6;i++){
    var wy = waterY + 20 + i*18;
    ctx.beginPath(); ctx.moveTo(waterX-80+Math.sin(t+i)*12, wy); ctx.lineTo(waterX+80+Math.sin(t+i+1)*10, wy); ctx.stroke();
  }
  // Ripple from animal
  schoolsScene.ripples.forEach(function(rp){
    rp.r += .4; if(rp.r > 55){ rp.r = 2; }
    var a = Math.max(0, .25 - rp.r/55 * .25);
    ctx.strokeStyle = 'rgba(255,200,80,'+a+')'; ctx.lineWidth = 1.2;
    ctx.beginPath(); ctx.ellipse(waterX + W*.08, waterY + (H-waterY)*.35, rp.r, rp.r*.4, 0, 0, Math.PI*2); ctx.stroke();
  });
  // Sun reflection on water
  var sr = ctx.createRadialGradient(waterX, waterY+(H-waterY)*.25, 0, waterX, waterY+(H-waterY)*.25, 60);
  sr.addColorStop(0,'rgba(255,240,100,.6)'); sr.addColorStop(1,'rgba(255,150,0,0)');
  ctx.fillStyle = sr; ctx.fillRect(0,0,W,H);
  // Elephant silhouette left
  drawElephant(ctx, W*.12, waterY, H*.28, '#060200');
  // Marula tree right bank
  drawMarula(ctx, W*.88, waterY, H*.3, '#060200');
  drawThornbush(ctx, W*.78, waterY, H*.14, '#060200');
  // Reed grass waterhole edge
  [-.25,-.18,-.1,.1,.18,.25].forEach(function(off){
    ctx.strokeStyle = '#060200'; ctx.lineWidth = 2;
    ctx.beginPath(); ctx.moveTo(waterX + off*W, waterY+5); ctx.lineTo(waterX + off*W + Math.sin(t+off*5)*3, waterY - H*.08); ctx.stroke();
    // Reed head
    ctx.fillStyle = '#0a0400'; ctx.beginPath(); ctx.ellipse(waterX + off*W + Math.sin(t+off*5)*3, waterY - H*.08, 3, 7, 0, 0, Math.PI*2); ctx.fill();
  });
  requestAnimationFrame(function(){ schoolsLoop(c); });
}

// ‚îÄ‚îÄ SCENE 5: AUDIO ‚Äî River at dusk, hippo eyes, lily pads, stars reflecting ‚îÄ‚îÄ
var audioScene = { stars: [], ripples: [], t: 0 };
function initAudioCanvas(){
  var c = document.getElementById('audio-canvas'); if(!c) return;
  audioScene.stars = [];
  for(var i=0;i<25;i++) audioScene.stars.push({ x: Math.random(), y: Math.random()*.55, s: 1+Math.random()*1.5, twinkle: Math.random()*Math.PI*2 });
  audioScene.ripples = [{ x:.42, r:0 }, { x:.58, r:22 }];
  audioLoop(c);
}
function audioLoop(c){
  if(!c || !document.getElementById('audio-canvas')) return;
  var W = c.width = c.offsetWidth, H = c.height = c.offsetHeight;
  var ctx = c.getContext('2d');
  audioScene.t += .014;
  var t = audioScene.t;
  var riverY = H * .48;
  // Deep dusk ‚Äî sun setting behind hills
  drawSunsetSky(ctx, W, H, [
    [0,'#020510'],[.2,'#060818'],[.38,'#1a0830'],[.55,'#6B2800'],[.68,'#C05010'],[.78,'#E07820'],[.88,'#FFB040'],[1,'#FF6010']
  ], W*.5, riverY - 5, 28);
  // Hills/banks silhouette
  ctx.fillStyle = '#0a0500';
  ctx.beginPath(); ctx.moveTo(0, riverY); ctx.lineTo(0, H*.62); ctx.quadraticCurveTo(W*.15, H*.52, W*.32, riverY); ctx.lineTo(W*.32, riverY); ctx.fill();
  ctx.beginPath(); ctx.moveTo(W, riverY); ctx.lineTo(W, H*.62); ctx.quadraticCurveTo(W*.85, H*.52, W*.68, riverY); ctx.lineTo(W*.68, riverY); ctx.fill();
  // River
  var rvg = ctx.createLinearGradient(0, riverY, 0, H);
  rvg.addColorStop(0,'#3d1800'); rvg.addColorStop(.3,'#6B3000'); rvg.addColorStop(.6,'#8B4800'); rvg.addColorStop(1,'#2a0e00');
  ctx.fillStyle = rvg; ctx.fillRect(0, riverY, W, H - riverY);
  // Sun path on water ‚Äî shimmering column
  for(var i=0;i<8;i++){
    var wy = riverY + 8 + i * (H - riverY) / 8;
    var ww = 30 - i * 2;
    ctx.fillStyle = 'rgba(255,'+(180-i*10)+','+(40-i*3)+','+(0.35-i*.03)+')';
    ctx.beginPath(); ctx.ellipse(W*.5, wy, ww + Math.sin(t+i)*.8, 4, 0, 0, Math.PI*2); ctx.fill();
  }
  // River shimmer lines
  ctx.strokeStyle = 'rgba(255,160,30,.12)'; ctx.lineWidth = 1;
  for(var i=0;i<5;i++){
    var wy2 = riverY + 15 + i*((H-riverY)/5);
    ctx.beginPath(); ctx.moveTo(W*.28, wy2); ctx.bezierCurveTo(W*.4+Math.sin(t+i)*15, wy2, W*.6+Math.sin(t+i+1)*15, wy2, W*.72, wy2); ctx.stroke();
  }
  // Hippo eyes ‚Äî just two lumps and eyes visible
  var hx = W * .44, hy = riverY + 18;
  ctx.fillStyle = '#0a0500';
  ctx.beginPath(); ctx.ellipse(hx, hy, 22, 9, 0, 0, Math.PI*2); ctx.fill();
  ctx.beginPath(); ctx.ellipse(hx+50, hy, 22, 9, 0, 0, Math.PI*2); ctx.fill();
  // Hippo eyes glow
  ctx.fillStyle = 'rgba(255,200,50,.7)';
  ctx.beginPath(); ctx.arc(hx-6, hy-3, 3, 0, Math.PI*2); ctx.fill();
  ctx.beginPath(); ctx.arc(hx+6, hy-3, 3, 0, Math.PI*2); ctx.fill();
  ctx.beginPath(); ctx.arc(hx+44, hy-3, 3, 0, Math.PI*2); ctx.fill();
  ctx.beginPath(); ctx.arc(hx+56, hy-3, 3, 0, Math.PI*2); ctx.fill();
  // Lily pads
  [[.3,.65],[.62,.72],[.38,.8],[.7,.6]].forEach(function(lp){
    ctx.fillStyle = '#0a1800';
    ctx.beginPath(); ctx.ellipse(lp[0]*W, riverY+lp[1]*(H-riverY), 14, 8, Math.sin(lp[0]*5)*.4, 0, Math.PI*2); ctx.fill();
  });
  // Stars + reflections
  audioScene.stars.forEach(function(s){
    s.twinkle += .04;
    var bright = .4 + Math.sin(s.twinkle) * .3;
    ctx.fillStyle = 'rgba(255,255,255,'+bright+')';
    ctx.beginPath(); ctx.arc(s.x*W, s.y*H, s.s, 0, Math.PI*2); ctx.fill();
    // Reflection in river
    var ry = riverY + (riverY - s.y*H) * .3;
    if(ry < H){
      ctx.fillStyle = 'rgba(255,255,255,'+(bright*.3)+')';
      ctx.beginPath(); ctx.arc(s.x*W, ry, s.s*.6, 0, Math.PI*2); ctx.fill();
    }
  });
  // Ripples
  audioScene.ripples.forEach(function(rp){
    rp.r += .3; if(rp.r > 40) rp.r = 0;
    var a = Math.max(0, .18 - rp.r/40 * .18);
    ctx.strokeStyle = 'rgba(255,180,50,'+a+')'; ctx.lineWidth = 1;
    ctx.beginPath(); ctx.ellipse(rp.x*W, riverY+20, rp.r, rp.r*.35, 0, 0, Math.PI*2); ctx.stroke();
  });
  // Bank vegetation
  drawThornbush(ctx, W*.08, riverY, H*.16, '#060200');
  drawThornbush(ctx, W*.92, riverY, H*.14, '#060200');
  // Reed at water edge
  [.25,.28,.31,.68,.71,.74].forEach(function(x){
    ctx.strokeStyle = '#070300'; ctx.lineWidth = 2;
    ctx.beginPath(); ctx.moveTo(x*W, riverY+4); ctx.lineTo(x*W+Math.sin(t+x*10)*2, riverY-H*.07); ctx.stroke();
  });
  requestAnimationFrame(function(){ audioLoop(c); });
}

// ‚îÄ‚îÄ DRAWING HELPERS ‚îÄ‚îÄ
function drawMarula(ctx, x, groundY, h, col){
  // Trunk ‚Äî 2-3 trunks spreading
  ctx.fillStyle = col; ctx.strokeStyle = col; ctx.lineWidth = 6;
  ctx.beginPath(); ctx.moveTo(x, groundY); ctx.quadraticCurveTo(x-8, groundY-h*.4, x-12, groundY-h*.6); ctx.stroke();
  ctx.beginPath(); ctx.moveTo(x, groundY); ctx.quadraticCurveTo(x+6, groundY-h*.45, x+10, groundY-h*.62); ctx.stroke();
  ctx.lineWidth = 4;
  ctx.beginPath(); ctx.moveTo(x-12, groundY-h*.6); ctx.quadraticCurveTo(x-20, groundY-h*.75, x-28, groundY-h*.85); ctx.stroke();
  ctx.beginPath(); ctx.moveTo(x+10, groundY-h*.62); ctx.quadraticCurveTo(x+18, groundY-h*.78, x+22, groundY-h*.82); ctx.stroke();
  // Wide flat canopy
  ctx.fillStyle = col;
  ctx.beginPath(); ctx.ellipse(x, groundY-h*.78, h*.48, h*.16, 0, 0, Math.PI*2); ctx.fill();
  ctx.beginPath(); ctx.ellipse(x-14, groundY-h*.7, h*.28, h*.1, -.3, 0, Math.PI*2); ctx.fill();
  ctx.beginPath(); ctx.ellipse(x+16, groundY-h*.72, h*.26, h*.09, .3, 0, Math.PI*2); ctx.fill();
}
function drawThornbush(ctx, x, groundY, h, col){
  ctx.fillStyle = col;
  // Multiple overlapping round clumps
  ctx.beginPath(); ctx.arc(x, groundY-h*.4, h*.32, 0, Math.PI*2); ctx.fill();
  ctx.beginPath(); ctx.arc(x-h*.22, groundY-h*.28, h*.24, 0, Math.PI*2); ctx.fill();
  ctx.beginPath(); ctx.arc(x+h*.2, groundY-h*.3, h*.22, 0, Math.PI*2); ctx.fill();
  ctx.beginPath(); ctx.arc(x-h*.1, groundY-h*.55, h*.18, 0, Math.PI*2); ctx.fill();
  // Spiky thorns on outer edge
  ctx.strokeStyle = col; ctx.lineWidth = 1.2;
  for(var i=0;i<12;i++){
    var a = i/12*Math.PI*2, r = h*.32;
    ctx.beginPath(); ctx.moveTo(x+Math.cos(a)*r, groundY-h*.4+Math.sin(a)*r);
    ctx.lineTo(x+Math.cos(a)*(r+8), groundY-h*.4+Math.sin(a)*(r+8)); ctx.stroke();
  }
}
function drawTallThorn(ctx, x, groundY, h){
  // Tall acacia-like thorn tree ‚Äî thin trunk, flat top
  ctx.strokeStyle = '#050200'; ctx.lineWidth = 3;
  ctx.beginPath(); ctx.moveTo(x, groundY); ctx.lineTo(x+3, groundY-h); ctx.stroke();
  ctx.lineWidth = 1.5;
  ctx.fillStyle = '#050200';
  // Flat canopy
  ctx.beginPath(); ctx.ellipse(x+3, groundY-h, h*.22, h*.055, 0, 0, Math.PI*2); ctx.fill();
  // Side branches
  [-.6,-.35,.35,.6].forEach(function(b){
    ctx.beginPath(); ctx.moveTo(x+b*20, groundY-h*(1+b*.1)); ctx.lineTo(x+b*42, groundY-h*(1.05+b*.06)); ctx.stroke();
  });
}
function drawGiraffe(ctx, x, groundY, h, col){
  ctx.fillStyle = col;
  // Legs
  ctx.fillRect(x-16, groundY-h*.3, 5, h*.3);
  ctx.fillRect(x-6, groundY-h*.28, 5, h*.28);
  ctx.fillRect(x+4, groundY-h*.28, 5, h*.28);
  ctx.fillRect(x+14, groundY-h*.3, 5, h*.3);
  // Body
  ctx.beginPath(); ctx.ellipse(x, groundY-h*.38, h*.22, h*.12, -.1, 0, Math.PI*2); ctx.fill();
  // Long neck
  ctx.beginPath();
  ctx.moveTo(x-4, groundY-h*.48);
  ctx.bezierCurveTo(x-2, groundY-h*.65, x+5, groundY-h*.78, x+8, groundY-h*.92);
  ctx.lineTo(x+18, groundY-h*.9);
  ctx.bezierCurveTo(x+16, groundY-h*.76, x+10, groundY-h*.62, x+8, groundY-h*.48);
  ctx.closePath(); ctx.fill();
  // Head
  ctx.beginPath(); ctx.ellipse(x+14, groundY-h*.95, h*.07, h*.04, .4, 0, Math.PI*2); ctx.fill();
  // Ossicones (horns)
  ctx.lineWidth = 2; ctx.strokeStyle = col;
  ctx.beginPath(); ctx.moveTo(x+12, groundY-h*.98); ctx.lineTo(x+10, groundY-h*1.04); ctx.stroke();
  ctx.beginPath(); ctx.moveTo(x+16, groundY-h*.97); ctx.lineTo(x+15, groundY-h*1.03); ctx.stroke();
}
function drawElephant(ctx, x, groundY, h, col){
  ctx.fillStyle = col;
  // Body
  ctx.beginPath(); ctx.ellipse(x, groundY-h*.32, h*.28, h*.2, 0, 0, Math.PI*2); ctx.fill();
  // Head
  ctx.beginPath(); ctx.ellipse(x+h*.22, groundY-h*.45, h*.16, h*.14, .3, 0, Math.PI*2); ctx.fill();
  // Trunk
  ctx.beginPath();
  ctx.moveTo(x+h*.32, groundY-h*.38);
  ctx.bezierCurveTo(x+h*.42, groundY-h*.28, x+h*.44, groundY-h*.15, x+h*.38, groundY-h*.05);
  ctx.lineWidth = h*.06; ctx.strokeStyle = col; ctx.stroke();
  // Ear
  ctx.beginPath(); ctx.ellipse(x+h*.15, groundY-h*.46, h*.09, h*.12, -.4, 0, Math.PI*2); ctx.fill();
  // Legs
  ctx.lineWidth = h*.09; ctx.strokeStyle = col;
  [-h*.14, -h*.04, h*.06, h*.16].forEach(function(ox){
    ctx.beginPath(); ctx.moveTo(x+ox, groundY-h*.16); ctx.lineTo(x+ox, groundY); ctx.stroke();
  });
  // Tusk
  ctx.strokeStyle = 'rgba(255,255,220,.4)'; ctx.lineWidth = 2;
  ctx.beginPath(); ctx.moveTo(x+h*.3, groundY-h*.38); ctx.quadraticCurveTo(x+h*.42, groundY-h*.32, x+h*.46, groundY-h*.22); ctx.stroke();
}
function drawBird(ctx, x, y, size, flap, col){
  ctx.strokeStyle = col; ctx.lineWidth = 1.5;
  var wing = Math.sin(flap) * size;
  ctx.beginPath(); ctx.moveTo(x-size*1.5, y-wing); ctx.quadraticCurveTo(x, y, x+size*1.5, y-wing); ctx.stroke();
}
function drawOwl(ctx, x, y, blinking, t){
  var col = '#050200';
  ctx.fillStyle = col;
  // Branch
  ctx.strokeStyle = '#060200'; ctx.lineWidth = 4;
  ctx.beginPath(); ctx.moveTo(x-40, y+28); ctx.lineTo(x+40, y+24); ctx.stroke();
  // Body
  ctx.beginPath(); ctx.ellipse(x, y, 10, 14, 0, 0, Math.PI*2); ctx.fill();
  // Head
  ctx.beginPath(); ctx.arc(x, y-16, 10, 0, Math.PI*2); ctx.fill();
  // Ears
  ctx.beginPath(); ctx.moveTo(x-8, y-24); ctx.lineTo(x-4, y-30); ctx.lineTo(x-1, y-24); ctx.fill();
  ctx.beginPath(); ctx.moveTo(x+1, y-24); ctx.lineTo(x+4, y-30); ctx.lineTo(x+8, y-24); ctx.fill();
  // Eyes
  if(!blinking){
    ctx.fillStyle = 'rgba(255,200,50,.8)';
    ctx.beginPath(); ctx.arc(x-4, y-17, 3.5, 0, Math.PI*2); ctx.fill();
    ctx.beginPath(); ctx.arc(x+4, y-17, 3.5, 0, Math.PI*2); ctx.fill();
    ctx.fillStyle = col;
    ctx.beginPath(); ctx.arc(x-4, y-17, 1.5, 0, Math.PI*2); ctx.fill();
    ctx.beginPath(); ctx.arc(x+4, y-17, 1.5, 0, Math.PI*2); ctx.fill();
  } else {
    ctx.strokeStyle = col; ctx.lineWidth = 1.5;
    ctx.beginPath(); ctx.moveTo(x-7, y-17); ctx.lineTo(x-1, y-17); ctx.stroke();
    ctx.beginPath(); ctx.moveTo(x+1, y-17); ctx.lineTo(x+7, y-17); ctx.stroke();
  }
}
function drawCampfire(ctx, x, groundY, t){
  // Log base
  ctx.strokeStyle = '#1a0800'; ctx.lineWidth = 5;
  ctx.beginPath(); ctx.moveTo(x-22, groundY-2); ctx.lineTo(x+22, groundY-8); ctx.stroke();
  ctx.beginPath(); ctx.moveTo(x+22, groundY-2); ctx.lineTo(x-22, groundY-8); ctx.stroke();
  // Flames ‚Äî layered
  var flames = [[0,40,'rgba(255,220,40,.9)'],[0,30,'rgba(255,140,20,.85)'],[0,20,'rgba(255,60,0,.8)'],[5,15,'rgba(200,20,0,.7)'],[0,10,'rgba(255,255,100,.6)']];
  flames.forEach(function(f, i){
    ctx.fillStyle = f[2];
    ctx.beginPath();
    ctx.moveTo(x - 16, groundY - 5);
    ctx.quadraticCurveTo(x + f[0] + Math.sin(t*3+i)*4, groundY - f[1]*.5, x, groundY - f[1]);
    ctx.quadraticCurveTo(x + f[0] - Math.sin(t*3+i)*4, groundY - f[1]*.5, x + 16, groundY - 5);
    ctx.closePath(); ctx.fill();
  });
  // Ember sparks
  for(var i=0;i<4;i++){
    var sx = x + Math.sin(t*2.5+i*1.5)*14, sy = groundY - 35 - ((t*60+i*15)%50);
    ctx.fillStyle = 'rgba(255,180,30,'+(0.7-((t*60+i*15)%50)/70)+')';
    ctx.beginPath(); ctx.arc(sx, sy, 1.5, 0, Math.PI*2); ctx.fill();
  }
}

// ‚îÄ‚îÄ SCENE 6: COURSES ‚Äî Baobab at twilight, bats emerging, first stars ‚îÄ‚îÄ
var coursesScene = { bats: [], t: 0 };
function initCoursesCanvas(){
  var c = document.getElementById('courses-canvas'); if(!c) return;
  coursesScene.bats = [];
  for(var i=0;i<9;i++) coursesScene.bats.push({ x:-40-i*70, y:0, vy:(Math.random()-.5)*.8, phase:Math.random()*Math.PI*2, spd:.5+Math.random()*.6 });
  coursesLoop(c);
}
function coursesLoop(c){
  if(!c||!document.getElementById('courses-canvas')) return;
  var W=c.width=c.offsetWidth, H=c.height=c.offsetHeight;
  var ctx=c.getContext('2d');
  coursesScene.t+=.014;
  var t=coursesScene.t;
  // Deep purple twilight ‚Äî day ending, knowledge time beginning
  drawSunsetSky(ctx,W,H,[
    [0,'#010108'],[.15,'#060218'],[.3,'#1a0535'],[.48,'#4a0a50'],[.62,'#8B1060'],[.72,'#C03028'],[.82,'#E06818'],[.9,'#FFB040'],[1,'#FF7010']
  ],W*.42,H*.72,26);
  // Ground
  ctx.fillStyle='#080300'; ctx.fillRect(0,H*.78,W,H*.22);
  // Baobab ‚Äî iconic wide trunk, stubby branches like roots in air
  drawBaobab(ctx,W*.5,H*.78,H*.52);
  // Smaller baobab right
  drawBaobab(ctx,W*.82,H*.78,H*.3);
  // Stars emerging
  ctx.fillStyle='rgba(255,255,255,.65)';
  var starPos=[[.08,.06],[.18,.12],[.32,.04],[.55,.09],[.72,.05],[.88,.12],[.95,.08],[.12,.18],[.42,.14],[.78,.16]];
  starPos.forEach(function(s,i){
    var twink=.4+Math.sin(t*.9+i)*.28;
    ctx.globalAlpha=twink;
    ctx.beginPath(); ctx.arc(s[0]*W,s[1]*H,i%3===0?2:1.2,0,Math.PI*2); ctx.fill();
  });
  ctx.globalAlpha=1;
  // Venus / bright star near horizon
  var vg=ctx.createRadialGradient(W*.68,H*.28,0,W*.68,H*.28,12);
  vg.addColorStop(0,'rgba(255,255,200,.9)'); vg.addColorStop(1,'rgba(255,255,200,0)');
  ctx.fillStyle=vg; ctx.beginPath(); ctx.arc(W*.68,H*.28,12,0,Math.PI*2); ctx.fill();
  // Bats emerging from baobab
  coursesScene.bats.forEach(function(b){
    b.x+=b.spd; b.phase+=.09; b.y=H*.45+Math.sin(b.phase)*35+b.vy*coursesScene.t*2;
    if(b.x>W+60){ b.x=-60; b.y=H*.42+Math.random()*60; }
    drawBat(ctx,b.x,b.y,6+Math.sin(b.phase*2)*2);
  });
  requestAnimationFrame(function(){ coursesLoop(c); });
}
function drawBaobab(ctx,x,groundY,h){
  // Trunk ‚Äî thick, barrel-shaped
  ctx.fillStyle='#050200';
  ctx.beginPath();
  ctx.moveTo(x-h*.12,groundY);
  ctx.bezierCurveTo(x-h*.14,groundY-h*.3,x-h*.13,groundY-h*.5,x-h*.08,groundY-h*.62);
  ctx.lineTo(x+h*.08,groundY-h*.62);
  ctx.bezierCurveTo(x+h*.13,groundY-h*.5,x+h*.14,groundY-h*.3,x+h*.12,groundY);
  ctx.closePath(); ctx.fill();
  // Stubby branches ‚Äî baobab looks upside down
  ctx.strokeStyle='#050200';
  var branches=[[-h*.22,-h*.08,-h*.32,h*.06],[-h*.16,-h*.12,-h*.28,-h*.02],[h*.12,-h*.1,h*.30,h*.04],[h*.18,-h*.06,h*.34,-h*.02],[-h*.1,-h*.15,-h*.18,-h*.22],[h*.1,-h*.16,h*.2,-h*.2],[-h*.08,-h*.18,h*.06,-h*.25]];
  branches.forEach(function(b){
    ctx.lineWidth=h*.025; ctx.beginPath();
    ctx.moveTo(x+b[0]*h*.15,groundY-h*.6+b[1]*h*.15);
    ctx.quadraticCurveTo(x+(b[0]+b[2])/2*h*.12,groundY-h*.6+(b[1]+b[3])/2*h*.12,x+b[2]*h*.12,groundY-h*.6+b[3]*h*.12);
    ctx.stroke();
    // Tiny twig ends
    ctx.lineWidth=h*.012;
    ctx.beginPath(); ctx.moveTo(x+b[2]*h*.12,groundY-h*.6+b[3]*h*.12);
    ctx.lineTo(x+b[2]*h*.12-h*.04,groundY-h*.6+b[3]*h*.12-h*.04); ctx.stroke();
    ctx.beginPath(); ctx.moveTo(x+b[2]*h*.12,groundY-h*.6+b[3]*h*.12);
    ctx.lineTo(x+b[2]*h*.12+h*.03,groundY-h*.6+b[3]*h*.12-h*.05); ctx.stroke();
  });
}
function drawBat(ctx,x,y,size){
  ctx.fillStyle='rgba(5,2,0,.9)';
  var flap=Math.sin(Date.now()/120)*size*.7;
  ctx.beginPath();
  ctx.moveTo(x,y);
  ctx.bezierCurveTo(x-size,y-flap,x-size*2.2,y-flap*.5,x-size*2.5,y+size*.3);
  ctx.lineTo(x-size*.8,y+size*.4);
  ctx.lineTo(x,y+size*.2);
  ctx.lineTo(x+size*.8,y+size*.4);
  ctx.lineTo(x+size*2.5,y+size*.3);
  ctx.bezierCurveTo(x+size*2.2,y-flap*.5,x+size,y-flap,x,y);
  ctx.closePath(); ctx.fill();
}

// ‚îÄ‚îÄ INIT ALL CANVASES when worlds activate ‚îÄ‚îÄ
var canvasInited = { home: false, inst: false, brain: false, schools: false, audio: false, courses: false };
var origShowWorld = showWorld;
showWorld = function(id){
  origShowWorld(id);
  setTimeout(function(){
    if(id === 'home' && !canvasInited.home){ canvasInited.home = true; initHomeCanvas(); }
    if(id === 'instruments' && !canvasInited.inst){ canvasInited.inst = true; initInstCanvas(); }
    if(id === 'brain' && !canvasInited.brain){ canvasInited.brain = true; initBrainCanvas(); initStreakDots(); setPuzzleType('proverb'); }
    if(id === 'schools' && !canvasInited.schools){ canvasInited.schools = true; initSchoolsCanvas(); setSubject('maths'); }
    if(id === 'courses' && !canvasInited.courses){ canvasInited.courses = true; initCoursesCanvas(); initCoursesWorld(); }
    if(id === 'audio' && !canvasInited.audio){ canvasInited.audio = true; initAudioCanvas(); }
  }, 80);
};

// Init home canvas on first load
function initAllCanvases(){
  initHomeCanvas(); canvasInited.home = true;
}

// ‚ïê‚ïê‚ïê‚ïê COMMUNITY VOICES ‚ïê‚ïê‚ïê‚ïê
function registerCV(){
  var em=document.getElementById('cv-email');
  if(!em||!em.value||!em.value.includes('@')){alert('Please enter a valid email address.');return}
  document.getElementById('cv-confirm').style.display='block';
  em.value='';em.disabled=true;
}

// ‚ïê‚ïê‚ïê‚ïê RESIZE ‚ïê‚ïê‚ïê‚ïê
window.addEventListener('resize',function(){if(treeCanvas){treeCanvas.width=treeCanvas.offsetWidth;treeCanvas.height=treeCanvas.offsetHeight}});
</script>
</body>
</html>
