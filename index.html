<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kwa Sukela ‚Äî Interactive World</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,600;0,700;1,300;1,600&family=Syne:wght@400;600;700;800&family=DM+Sans:wght@300;400;500&family=JetBrains+Mono:wght@300;400&display=swap" rel="stylesheet">
<style>
:root{
  --ink:#1B2A3A;--ink2:#22344A;--white:#fff;--paper:#F7FAFC;
  --orange:#CA5C08;--ora-l:#E87218;--ora-xl:#F5A040;
  --blue:#1A6EA8;--blu-l:#2E8FCC;--sky:#E8F5FF;
  --green:#1E8449;--gold:#E6B32A;--red:#C0392B;
  --n1:#C0392B;--n2:#E6B32A;--n3:#1B2A3A;--n4:#1E8449;--n6:#CA5C08;--n7:#2E8FCC;
  --bd:rgba(27,42,58,.1);--i60:rgba(27,42,58,.6);--i35:rgba(27,42,58,.35);
}
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
html{scroll-behavior:smooth}
body{background:#fff;color:var(--ink);font-family:'DM Sans',sans-serif;overflow-x:hidden;-webkit-font-smoothing:antialiased}
#intro{position:fixed;inset:0;z-index:9999;background:#02050e;display:flex;align-items:center;justify-content:center;flex-direction:column;transition:opacity 1.2s ease}
#intro.hide{opacity:0;pointer-events:none}
#intro-canvas{position:absolute;inset:0;width:100%;height:100%}
#intro-logo{position:relative;z-index:2;text-align:center;opacity:0;transform:translateY(30px);transition:opacity 1.4s ease,transform 1.4s ease}
#intro-logo.show{opacity:1;transform:none}
#intro-logo h1{font-family:'Cormorant Garamond',serif;font-size:clamp(2.8rem,6vw,5rem);font-weight:700;color:#fff;letter-spacing:-.02em;line-height:.9}
#intro-logo h1 em{font-style:italic;color:#F5A040}
#intro-logo p{font-family:'JetBrains Mono',monospace;font-size:.58rem;letter-spacing:.28em;text-transform:uppercase;color:rgba(255,255,255,.38);margin-top:.9rem}
#skip-btn{position:absolute;bottom:1.8rem;right:1.8rem;z-index:3;font-family:'JetBrains Mono',monospace;font-size:.54rem;letter-spacing:.14em;text-transform:uppercase;color:rgba(255,255,255,.28);border:1px solid rgba(255,255,255,.14);padding:.38rem .9rem;border-radius:2px;cursor:pointer;background:none;transition:color .2s,border-color .2s}
#skip-btn:hover{color:#fff;border-color:rgba(255,255,255,.5)}
#site{opacity:0;transition:opacity .9s ease}
#site.show{opacity:1}
nav{position:sticky;top:0;z-index:500;background:rgba(255,255,255,.97);backdrop-filter:blur(16px);border-bottom:1px solid var(--bd)}
.nstrip{height:5px;background:repeating-linear-gradient(90deg,var(--n1) 0,var(--n1) 14.28%,var(--n2) 14.28%,var(--n2) 28.57%,var(--n3) 28.57%,var(--n3) 42.85%,var(--n4) 42.85%,var(--n4) 57.14%,#fff 57.14%,#fff 71.42%,var(--n6) 71.42%,var(--n6) 85.71%,var(--n7) 85.71%,var(--n7) 100%)}
.nav-w{max-width:1280px;margin:0 auto;padding:.65rem 2rem;display:flex;justify-content:space-between;align-items:center;gap:1rem}
.logo{font-family:'Cormorant Garamond',serif;font-weight:700;font-size:1.2rem;color:var(--ink);text-decoration:none;cursor:pointer}
.logo em{color:var(--orange);font-style:italic}
.nav-pills{display:flex;gap:.3rem;flex-wrap:wrap}
.npill{font-family:'Syne',sans-serif;font-size:.58rem;font-weight:700;letter-spacing:.09em;text-transform:uppercase;padding:.36rem .82rem;border-radius:20px;border:1.5px solid var(--bd);color:var(--i60);cursor:pointer;transition:all .2s;background:none}
.npill:hover,.npill.active{background:var(--orange);color:#fff;border-color:var(--orange)}
.npill.schools{border-color:var(--green);color:var(--green)}
.npill.schools:hover,.npill.schools.active{background:var(--green);color:#fff;border-color:var(--green)}
.world{display:none;animation:fadeIn .45s ease}
.world.active{display:block}
@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:none}}
.ctr{max-width:1280px;margin:0 auto;padding:0 2rem}
.sec{padding:4.5rem 0}
.sec-lbl{font-family:'JetBrains Mono',monospace;font-size:.54rem;letter-spacing:.26em;text-transform:uppercase;color:var(--i35);margin-bottom:.7rem;display:flex;align-items:center;gap:.6rem}
.sec-lbl::before{content:'';width:22px;height:1px;background:var(--orange)}
.sec-title{font-family:'Cormorant Garamond',serif;font-size:clamp(2rem,4vw,3.1rem);font-weight:700;color:var(--ink);line-height:1;letter-spacing:-.02em;margin-bottom:.5rem}
.sec-title em{font-style:italic;color:var(--orange)}
.sec-sub{font-size:.9rem;color:var(--i60);line-height:1.85;max-width:520px;font-weight:300;margin-bottom:1.8rem}
.btn{display:inline-flex;align-items:center;gap:.45rem;font-family:'Syne',sans-serif;font-size:.61rem;font-weight:700;letter-spacing:.1em;text-transform:uppercase;padding:.63rem 1.35rem;background:var(--orange);color:#fff;border:none;border-radius:2px;cursor:pointer;transition:all .2s;text-decoration:none}
.btn:hover{background:var(--ora-l);transform:translateY(-2px)}
.btn-out{background:transparent;color:var(--ink);border:1.5px solid var(--bd)}
.btn-out:hover{border-color:var(--orange);color:var(--orange);transform:translateY(-2px)}
.btn-grn{background:var(--green)}.btn-grn:hover{background:#27ae60}
.btn-blu{background:var(--blue)}.btn-blu:hover{background:var(--blu-l)}

/* HOME */
.home-hero{min-height:82vh;display:grid;grid-template-columns:1fr 1fr;background:var(--ink2);overflow:hidden}
.home-hero-l{padding:6rem 3.5rem 5rem;display:flex;flex-direction:column;justify-content:center}
.home-hero-tag{font-family:'JetBrains Mono',monospace;font-size:.54rem;letter-spacing:.2em;text-transform:uppercase;color:#F5A040;margin-bottom:1.2rem}
.home-hero h1{font-family:'Cormorant Garamond',serif;font-size:clamp(3rem,5vw,5.2rem);font-weight:300;line-height:.92;color:#fff;margin-bottom:1.2rem}
.home-hero h1 strong{font-weight:700;display:block}
.home-hero h1 em{font-style:italic;color:#F5A040}
.home-hero-sub{font-size:.92rem;color:rgba(255,255,255,.48);line-height:1.85;max-width:400px;margin-bottom:2rem;font-weight:300}
.worlds-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:1px;background:rgba(255,255,255,.07);margin-top:3rem}
.world-card{background:var(--ink2);padding:1.8rem 1.5rem;cursor:pointer;transition:background .2s;position:relative;overflow:hidden}
.world-card::after{content:'';position:absolute;bottom:0;left:0;right:0;height:3px;background:linear-gradient(90deg,var(--orange),#F5A040);transform:scaleX(0);transform-origin:left;transition:transform .3s}
.world-card:hover{background:var(--ink)}.world-card:hover::after{transform:scaleX(1)}
.wc-icon{font-size:1.8rem;margin-bottom:.7rem}
.wc-name{font-family:'Syne',sans-serif;font-size:.83rem;font-weight:700;color:#fff;margin-bottom:.35rem}
.wc-sub{font-size:.77rem;color:rgba(255,255,255,.32);line-height:1.58}
.wc-tag{font-family:'JetBrains Mono',monospace;font-size:.47rem;letter-spacing:.07em;text-transform:uppercase;color:#F5A040;margin-top:.55rem}
.home-hero-r{background:linear-gradient(160deg,#08111f,#1A507A,#0d1f32);display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden;min-height:300px}
.hero-quote{position:relative;z-index:2;text-align:center;padding:3rem 2.5rem}
.hero-quote blockquote{font-family:'Cormorant Garamond',serif;font-size:1.75rem;font-style:italic;color:rgba(255,255,255,.85);line-height:1.38;margin-bottom:1.2rem}
.hero-quote cite{font-family:'JetBrains Mono',monospace;font-size:.53rem;letter-spacing:.1em;color:#F5A040}
.firefly{position:absolute;border-radius:50%;background:#FFD700;animation:ff linear infinite}
@keyframes ff{0%{opacity:0;transform:translate(0,0)}20%{opacity:1}80%{opacity:.5}100%{opacity:0;transform:translate(var(--tx),var(--ty))}}

/* WALL */
.wall-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:1rem;margin-top:1.8rem}
.wall-post{background:rgba(255,255,255,.04);border-radius:6px;padding:1.1rem;border:1px solid rgba(255,255,255,.07);transition:border-color .2s}
.wall-post:hover{border-color:rgba(202,92,8,.3)}
.wp-type{font-family:'JetBrains Mono',monospace;font-size:.46rem;letter-spacing:.1em;text-transform:uppercase;padding:.17rem .48rem;border-radius:2px;width:fit-content;margin-bottom:.55rem;display:block}
.wp-music{background:rgba(202,92,8,.1);color:#F5A040;border:1px solid rgba(202,92,8,.2)}
.wp-story{background:rgba(26,110,168,.1);color:#64B5E8;border:1px solid rgba(26,110,168,.2)}
.wp-achieve{background:rgba(30,132,73,.1);color:#6EE78E;border:1px solid rgba(30,132,73,.2)}
.wp-name{font-family:'Syne',sans-serif;font-size:.76rem;font-weight:700;color:#fff;margin-bottom:.2rem}
.wp-content{font-size:.78rem;color:rgba(255,255,255,.38);line-height:1.55}
.wp-meta{font-family:'JetBrains Mono',monospace;font-size:.46rem;letter-spacing:.03em;color:rgba(255,255,255,.2);margin-top:.55rem}

/* SAVANNAH GAMES */
.savannah-hero{position:relative;height:320px;overflow:hidden;display:flex;align-items:flex-end;justify-content:center}
.sv-sky{position:absolute;inset:0;background:linear-gradient(180deg,#0a1220 0%,#1a2040 15%,#6B2000 50%,#E85000 72%,#FFB000 88%,#FF7000 100%)}
.sv-sun{position:absolute;bottom:85px;left:50%;transform:translateX(-50%);width:78px;height:78px;border-radius:50%;background:radial-gradient(circle,#FFF176,#FFD700 40%,#FF8C00 70%,transparent 100%);box-shadow:0 0 50px 25px rgba(255,160,0,.5),0 0 100px 50px rgba(255,80,0,.22);animation:sunpulse 3.5s ease-in-out infinite}
@keyframes sunpulse{0%,100%{box-shadow:0 0 50px 25px rgba(255,160,0,.5),0 0 100px 50px rgba(255,80,0,.22)}50%{box-shadow:0 0 70px 35px rgba(255,160,0,.6),0 0 130px 70px rgba(255,80,0,.28)}}
.sv-ground{position:absolute;bottom:0;left:0;right:0;height:95px;background:linear-gradient(180deg,#3a1800,#200e00)}
.sv-title{position:relative;z-index:2;text-align:center;padding-bottom:1.8rem}
.sv-title h2{font-family:'Cormorant Garamond',serif;font-size:clamp(2.4rem,5vw,3.8rem);font-weight:700;color:#FFD700;text-shadow:0 2px 20px rgba(0,0,0,.8);letter-spacing:-.02em}
.sv-title p{font-family:'JetBrains Mono',monospace;font-size:.53rem;letter-spacing:.18em;text-transform:uppercase;color:rgba(255,215,0,.55);margin-top:.35rem}
.ndebele-border{height:11px;background:repeating-linear-gradient(90deg,#C0392B 0,#C0392B 11%,#E6B32A 11%,#E6B32A 22%,#1B2A3A 22%,#1B2A3A 33%,#1E8449 33%,#1E8449 44%,#fff 44%,#fff 55%,#CA5C08 55%,#CA5C08 66%,#2E8FCC 66%,#2E8FCC 77%,#C0392B 77%,#C0392B 88%,#E6B32A 88%,#E6B32A 100%)}
.games-body{background:#f5efe6;padding:2.5rem 0}
.games-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:1.4rem;margin-top:2rem}
.game-tile{background:#fff;border-radius:8px;overflow:hidden;box-shadow:0 3px 18px rgba(139,69,19,.1);cursor:pointer;transition:transform .22s,box-shadow .22s,border-color .22s;border:2px solid transparent}
.game-tile:hover{transform:translateY(-4px);box-shadow:0 10px 36px rgba(139,69,19,.18);border-color:var(--orange)}
.game-tile-hero{height:150px;display:flex;align-items:center;justify-content:center}
.gt-mancala{background:linear-gradient(135deg,#3d1c00,#6B3A1F,#8B5E3C)}
.gt-diketo{background:linear-gradient(135deg,#0d2035,#1A507A,#2E8FCC)}
.gt-kgati{background:linear-gradient(135deg,#1B3A1B,#1E8449,#27AE60)}
.gt-ncuva{background:linear-gradient(135deg,#2C1654,#7B2D8B,#9B59B6)}
.game-tile-body{padding:1.3rem}
.gt-tag{font-family:'JetBrains Mono',monospace;font-size:.47rem;letter-spacing:.1em;text-transform:uppercase;padding:.18rem .55rem;border-radius:2px;background:rgba(202,92,8,.08);color:var(--orange);border:1px solid rgba(202,92,8,.18);width:fit-content;margin-bottom:.55rem}
.gt-name{font-family:'Cormorant Garamond',serif;font-size:1.25rem;font-weight:700;color:var(--ink);margin-bottom:.28rem}
.gt-origin{font-family:'JetBrains Mono',monospace;font-size:.5rem;letter-spacing:.05em;color:var(--i35);margin-bottom:.45rem}
.gt-desc{font-size:.8rem;color:var(--i60);line-height:1.62}
.gt-stats{display:flex;gap:.9rem;margin-top:.85rem;padding-top:.85rem;border-top:1px solid var(--bd)}
.gt-stat{font-family:'JetBrains Mono',monospace;font-size:.5rem;letter-spacing:.03em;color:var(--i35)}
.gt-stat strong{color:var(--orange);font-size:.7rem}

/* GAME OVERLAY */
.game-overlay{display:none;position:fixed;inset:0;z-index:800;background:rgba(0,0,0,.9);align-items:center;justify-content:center;padding:1rem}
.game-overlay.open{display:flex}
.game-modal{background:#1a0a00;border-radius:8px;width:100%;max-width:680px;max-height:90vh;overflow-y:auto;border:2px solid var(--orange)}
.gm-header{background:linear-gradient(135deg,#3d1c00,#6B3A1F);padding:1.1rem 1.4rem;display:flex;justify-content:space-between;align-items:center;border-bottom:2px solid var(--orange);position:sticky;top:0;z-index:2}
.gm-title{font-family:'Cormorant Garamond',serif;font-size:1.35rem;font-weight:700;color:#FFD700}
.gm-close{background:none;border:none;color:rgba(255,255,255,.5);font-size:1.3rem;cursor:pointer;padding:.2rem .5rem;line-height:1;transition:color .2s}
.gm-close:hover{color:#fff}
.gm-body{padding:1.4rem}
.gm-score-bar{display:flex;justify-content:space-around;background:rgba(255,255,255,.04);border-radius:4px;padding:.7rem 1rem;margin-bottom:1.1rem;border:1px solid rgba(255,255,255,.07)}
.gm-score-item{text-align:center}
.gm-score-item span{display:block;font-family:'JetBrains Mono',monospace;font-size:.48rem;letter-spacing:.09em;text-transform:uppercase;color:rgba(255,255,255,.3)}
.gm-score-item strong{font-family:'Cormorant Garamond',serif;font-size:1.5rem;font-weight:700;color:#F5A040}

/* MANCALA */
.mancala-board{background:linear-gradient(135deg,#2a1200,#4a2000);border-radius:10px;padding:1.3rem;border:3px solid #8B5E3C}
.mancala-row{display:flex;align-items:center;gap:.45rem;margin:.35rem 0}
.mancala-store{width:56px;height:110px;border-radius:28px;background:linear-gradient(180deg,#5a3000,#3a1a00);border:2px solid #8B5E3C;display:flex;align-items:center;justify-content:center;flex-direction:column;gap:.15rem}
.mancala-store strong{font-family:'Cormorant Garamond',serif;font-size:1.7rem;font-weight:700;color:#FFD700}
.mancala-store span{font-family:'JetBrains Mono',monospace;font-size:.4rem;letter-spacing:.04em;color:rgba(255,255,255,.35)}
.mancala-pits{display:flex;gap:.42rem;flex:1;justify-content:center}
.mancala-pit{width:48px;height:48px;border-radius:50%;background:linear-gradient(135deg,#5a3000,#3a1a00);border:2px solid #8B5E3C;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .18s;font-family:'Cormorant Garamond',serif;font-size:1.2rem;font-weight:700;color:#FFD700;position:relative}
.mancala-pit:hover{background:linear-gradient(135deg,#7a4500,#5a2500);transform:scale(1.08);border-color:var(--orange)}
.mancala-pit.disabled{cursor:default;opacity:.5}
.mancala-seeds{display:flex;flex-wrap:wrap;gap:2px;justify-content:center;align-items:center;width:32px}
.seed{width:5px;height:5px;border-radius:50%}
.seed.p1{background:#E6B32A}.seed.p2{background:#2E8FCC}
.mancala-lbl{font-family:'JetBrains Mono',monospace;font-size:.46rem;letter-spacing:.06em;text-transform:uppercase;color:rgba(255,255,255,.3);text-align:center;margin:.25rem 0}
.game-msg{font-family:'Cormorant Garamond',serif;font-size:.95rem;font-style:italic;color:#F5A040;text-align:center;margin:.9rem 0;min-height:1.4rem}

/* DIKETO */
.diketo-seq{display:flex;gap:.48rem;justify-content:center;margin:1rem 0;flex-wrap:wrap}
.dseq-item{width:42px;height:42px;border-radius:50%;border:2px solid rgba(255,255,255,.18);display:flex;align-items:center;justify-content:center;font-size:1.1rem;transition:all .25s}
.dseq-item.active{border-color:#FFD700;background:rgba(255,215,0,.15);transform:scale(1.2)}
.dseq-item.correct{border-color:#27AE60;background:rgba(39,174,96,.15)}
.diketo-tap-btn{width:112px;height:112px;border-radius:50%;background:linear-gradient(135deg,var(--orange),var(--ora-l));border:4px solid #FFD700;cursor:pointer;font-family:'Syne',sans-serif;font-size:.68rem;font-weight:700;letter-spacing:.09em;color:#fff;transition:all .14s;margin:1rem auto;display:block;box-shadow:0 0 18px rgba(255,165,0,.28)}
.diketo-tap-btn:active{transform:scale(.92)}

/* KGATI */
.kgati-rope-area{position:relative;height:160px;overflow:hidden;border-radius:6px;background:rgba(0,0,0,.3);margin:1rem 0}
.kgati-rope{position:absolute;left:0;right:0;top:48%;height:4px;background:linear-gradient(90deg,#8B5E3C,#FFD700,#8B5E3C);border-radius:2px;animation:ropeSwing 1s ease-in-out infinite}
@keyframes ropeSwing{0%,100%{transform:rotate(-4deg) scaleY(1)}50%{transform:rotate(4deg) scaleY(1.8)}}
.kgati-jumper{position:absolute;bottom:18px;left:50%;transform:translateX(-50%);font-size:2.2rem;transition:bottom .18s}
.kgati-jumper.jump{bottom:90px}
.kgati-pattern{display:flex;gap:.5rem;justify-content:center;margin:.8rem 0;flex-wrap:wrap}
.kp-item{padding:.38rem .82rem;border-radius:4px;border:2px solid rgba(255,255,255,.14);font-family:'Syne',sans-serif;font-size:.62rem;font-weight:700;letter-spacing:.07em;color:rgba(255,255,255,.55);cursor:pointer;transition:all .18s}
.kp-item:hover,.kp-item.sel{border-color:#FFD700;background:rgba(255,215,0,.09);color:#FFD700}

/* NCUVA */
.ncuva-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:.48rem;margin:1rem auto;max-width:272px}
.ncuva-cell{aspect-ratio:1;border-radius:6px;background:rgba(255,255,255,.04);border:2px solid rgba(255,255,255,.09);cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:1.3rem;transition:all .25s}
.ncuva-cell:hover{border-color:rgba(255,255,255,.28)}
.ncuva-cell.lit{border-color:#FFD700;background:rgba(255,215,0,.18);box-shadow:0 0 10px rgba(255,215,0,.28)}
.ncuva-cell.correct{border-color:#27AE60;background:rgba(39,174,96,.18)}
.ncuva-cell.wrong{border-color:#E74C3C;background:rgba(231,76,60,.18)}

/* INSTRUMENTS */
.inst-hero{background:linear-gradient(160deg,#0d1117,#1a2744,#0d2a1a);padding:4.5rem 0 2.5rem;text-align:center;position:relative;overflow:hidden}
.inst-hero::before{content:'';position:absolute;inset:0;background:radial-gradient(ellipse at 30% 50%,rgba(202,92,8,.07),transparent 55%),radial-gradient(ellipse at 70% 30%,rgba(26,110,168,.07),transparent 55%)}
.inst-hero h2{font-family:'Cormorant Garamond',serif;font-size:clamp(2.4rem,5vw,3.8rem);font-weight:700;color:#fff;letter-spacing:-.02em;position:relative;z-index:2}
.inst-hero h2 em{font-style:italic;color:#F5A040}
.inst-hero p{font-size:.9rem;color:rgba(255,255,255,.4);max-width:480px;margin:.7rem auto 0;line-height:1.85;position:relative;z-index:2}
.studio{display:grid;grid-template-columns:1fr 300px;gap:2rem;align-items:start;padding:2.5rem 0}
.inst-selector{display:grid;grid-template-columns:repeat(2,1fr);gap:.9rem;margin-bottom:1.8rem}
.inst-btn{background:rgba(255,255,255,.04);border:2px solid rgba(255,255,255,.07);border-radius:8px;padding:1.1rem;cursor:pointer;transition:all .22s;text-align:center}
.inst-btn:hover,.inst-btn.active{border-color:var(--orange);background:rgba(202,92,8,.07)}
.inst-emoji{font-size:2rem;display:block;margin-bottom:.42rem}
.inst-name{font-family:'Syne',sans-serif;font-size:.68rem;font-weight:700;color:#fff;letter-spacing:.07em;text-transform:uppercase;display:block}
.inst-origin{font-family:'JetBrains Mono',monospace;font-size:.48rem;letter-spacing:.05em;color:rgba(255,255,255,.28);margin-top:.18rem;display:block}
.inst-play-area{background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.07);border-radius:10px;padding:1.6rem;min-height:280px}
.inst-play-title{font-family:'Cormorant Garamond',serif;font-size:1.4rem;font-weight:700;color:#fff;margin-bottom:.35rem}
.inst-play-sub{font-size:.79rem;color:rgba(255,255,255,.32);margin-bottom:1.4rem;line-height:1.58}
.djembe-pads{display:grid;grid-template-columns:repeat(4,1fr);gap:.55rem}
.drum-pad{aspect-ratio:1;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:.58rem;font-family:'Syne',sans-serif;font-weight:700;letter-spacing:.05em;color:#fff;border:3px solid transparent;transition:all .1s;user-select:none;text-transform:uppercase}
.drum-pad:active,.drum-pad.hit{transform:scale(.91);filter:brightness(1.35)}
.dp1{background:linear-gradient(135deg,#5D1A00,#8B2500)}.dp2{background:linear-gradient(135deg,#1A3A5D,#1A6EA8)}
.dp3{background:linear-gradient(135deg,#1A3D1A,#1E8449)}.dp4{background:linear-gradient(135deg,#4D2A00,#7A4500)}
.dp5{background:linear-gradient(135deg,#3D0A2A,#8B1A4A)}.dp6{background:linear-gradient(135deg,#2A1A00,#5A3A00)}
.dp7{background:linear-gradient(135deg,#001A3D,#003D8A)}.dp8{background:linear-gradient(135deg,#1A001A,#5A0A5A)}
.mbira-keys{display:flex;gap:3px;align-items:flex-end;justify-content:center;height:170px;padding:.8rem 0}
.mbira-key{flex:1;max-width:34px;border-radius:4px 4px 8px 8px;cursor:pointer;transition:all .1s;position:relative;border:2px solid rgba(255,255,255,.09)}
.mbira-key:hover,.mbira-key:active,.mbira-key.hit{filter:brightness(1.6);transform:scaleY(.94);transform-origin:top}
.mkey-label{position:absolute;bottom:4px;left:50%;transform:translateX(-50%);font-family:'JetBrains Mono',monospace;font-size:.38rem;color:rgba(255,255,255,.45);white-space:nowrap}
.hosho-area{display:flex;flex-direction:column;align-items:center;gap:1.2rem;padding:.8rem}
.hosho-gourd{width:110px;height:130px;border-radius:50% 50% 40% 40%;background:radial-gradient(circle at 35% 30%,#D4A056,#8B6914,#5A4008);border:3px solid #6B4F12;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:2.8rem;transition:all .12s;box-shadow:0 7px 20px rgba(0,0,0,.38)}
.hosho-gourd:active,.hosho-gourd.shake{animation:hoshoShake .14s ease;filter:brightness(1.22)}
@keyframes hoshoShake{0%,100%{transform:rotate(0)}25%{transform:rotate(-14deg)}75%{transform:rotate(14deg)}}
.uhadi-strings{display:flex;gap:2rem;justify-content:center;align-items:stretch;height:190px;padding:.8rem}
.uhadi-string{display:flex;flex-direction:column;align-items:center;gap:.45rem;cursor:pointer}
.uhadi-stick{width:6px;flex:1;border-radius:3px;transition:all .12s;position:relative}
.uhadi-stick:hover,.uhadi-stick:active,.uhadi-stick.pluck{animation:uhadiPluck .28s ease;filter:brightness(1.5)}
@keyframes uhadiPluck{0%,100%{transform:scaleX(1)}50%{transform:scaleX(1.7)}}
.uhadi-label{font-family:'JetBrains Mono',monospace;font-size:.48rem;letter-spacing:.04em;color:rgba(255,255,255,.35)}
.recorder-panel{background:rgba(0,0,0,.42);border:1px solid rgba(255,255,255,.07);border-radius:10px;padding:1.4rem;position:sticky;top:76px}
.rec-title{font-family:'Syne',sans-serif;font-size:.68rem;font-weight:700;letter-spacing:.09em;text-transform:uppercase;color:#fff;margin-bottom:.9rem}
.rec-btn-main{width:60px;height:60px;border-radius:50%;background:#C0392B;border:4px solid rgba(255,255,255,.18);cursor:pointer;margin:0 auto .9rem;display:block;position:relative;transition:all .2s}
.rec-btn-main::after{content:'';position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:18px;height:18px;border-radius:50%;background:#fff}
.rec-btn-main.recording{animation:recPulse 1s ease-in-out infinite;border-color:rgba(255,0,0,.48)}
@keyframes recPulse{0%,100%{box-shadow:0 0 0 0 rgba(255,0,0,.35)}50%{box-shadow:0 0 0 10px rgba(255,0,0,0)}}
.rec-btn-main.recording::after{border-radius:3px;width:15px;height:15px}
.rec-status{font-family:'JetBrains Mono',monospace;font-size:.5rem;letter-spacing:.09em;text-transform:uppercase;color:rgba(255,255,255,.28);text-align:center;margin-bottom:.9rem}
.rec-timeline{height:38px;background:rgba(255,255,255,.03);border-radius:4px;margin-bottom:.9rem;overflow:hidden;position:relative;border:1px solid rgba(255,255,255,.05)}
.rec-wave{height:100%;display:flex;align-items:center;gap:2px;padding:0 3px}
.rec-bar{width:3px;border-radius:2px;background:var(--orange)}
.rec-controls{display:flex;gap:.45rem}
.rec-ctrl{flex:1;padding:.46rem;background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.07);border-radius:4px;cursor:pointer;font-family:'JetBrains Mono',monospace;font-size:.46rem;letter-spacing:.05em;text-transform:uppercase;color:rgba(255,255,255,.38);transition:all .2s;text-align:center}
.rec-ctrl:hover{border-color:rgba(255,255,255,.18);color:#fff}
.rec-ctrl.active{border-color:var(--orange);color:var(--orange)}
.post-wall-btn{width:100%;margin-top:.7rem;padding:.65rem;background:linear-gradient(135deg,var(--orange),var(--ora-l));border:none;border-radius:4px;cursor:pointer;font-family:'Syne',sans-serif;font-size:.58rem;font-weight:700;letter-spacing:.09em;text-transform:uppercase;color:#fff;transition:opacity .2s}
.post-wall-btn:hover{opacity:.84}
.posted-notif{font-family:'JetBrains Mono',monospace;font-size:.48rem;letter-spacing:.05em;color:#27AE60;text-align:center;margin-top:.45rem;display:none}

/* BRAIN TEASERS */
.brain-hero{background:linear-gradient(135deg,var(--ink2),#1a3a5d);padding:4.5rem 0 2.8rem;position:relative;overflow:hidden;text-align:center}
.brain-hero::before{content:'';position:absolute;inset:0;opacity:.04;background-image:repeating-linear-gradient(45deg,transparent,transparent 19px,#E6B32A 19px,#E6B32A 20px),repeating-linear-gradient(-45deg,transparent,transparent 19px,#CA5C08 19px,#CA5C08 20px)}
.brain-hero h2{font-family:'Cormorant Garamond',serif;font-size:clamp(2.4rem,5vw,3.8rem);font-weight:700;color:#fff;position:relative;z-index:2}
.brain-hero h2 em{color:#F5A040;font-style:italic}
.brain-hero p{font-size:.88rem;color:rgba(255,255,255,.4);max-width:440px;margin:.7rem auto 0;line-height:1.85;position:relative;z-index:2}
.streak-bar{background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.09);border-radius:8px;padding:.9rem 1.4rem;display:flex;align-items:center;gap:1.4rem;max-width:480px;margin:1.8rem auto 0;position:relative;z-index:2}
.streak-fire{font-size:1.9rem}
.streak-info strong{font-family:'Cormorant Garamond',serif;font-size:1.7rem;font-weight:700;color:#FFD700;display:block;line-height:1}
.streak-info span{font-family:'JetBrains Mono',monospace;font-size:.48rem;letter-spacing:.09em;text-transform:uppercase;color:rgba(255,255,255,.32)}
.streak-dots{display:flex;gap:.35rem;margin-left:auto}
.sd{width:9px;height:9px;border-radius:50%;background:rgba(255,255,255,.12);border:1.5px solid rgba(255,255,255,.12)}
.sd.done{background:#FFD700;border-color:#FFD700}
.sd.today{background:var(--orange);border-color:var(--orange);box-shadow:0 0 5px rgba(202,92,8,.45)}
.puzzle-tabs{display:flex;gap:.45rem;flex-wrap:wrap;margin:2.2rem 0 1.8rem}
.ptab{font-family:'Syne',sans-serif;font-size:.58rem;font-weight:700;letter-spacing:.07em;text-transform:uppercase;padding:.46rem 1rem;border-radius:20px;border:1.5px solid var(--bd);color:var(--i60);cursor:pointer;transition:all .2s;background:#fff}
.ptab:hover,.ptab.active{background:var(--ink2);color:#fff;border-color:var(--ink2)}
.puzzle-stage{background:#fff;border-radius:10px;padding:2.2rem;box-shadow:0 3px 20px rgba(27,42,58,.07);min-height:300px;border:1px solid var(--bd)}
.puzzle-q{font-family:'Cormorant Garamond',serif;font-size:1.4rem;font-weight:300;color:var(--ink);line-height:1.38;margin-bottom:1.4rem}
.puzzle-q strong{font-weight:700;color:var(--orange)}
.puzzle-options{display:grid;grid-template-columns:1fr 1fr;gap:.65rem;margin-bottom:1.1rem}
.p-opt{padding:.85rem 1.1rem;border-radius:6px;border:2px solid var(--bd);background:#fff;cursor:pointer;font-size:.86rem;color:var(--ink);transition:all .18s;text-align:left;font-family:'DM Sans',sans-serif;line-height:1.38}
.p-opt:hover{border-color:var(--orange);background:rgba(202,92,8,.02)}
.p-opt.correct{border-color:#27AE60;background:rgba(39,174,96,.07);color:#1a6b3a}
.p-opt.wrong{border-color:#E74C3C;background:rgba(231,76,60,.05);color:#7B0000}
.p-opt.disabled{cursor:default}
.puzzle-result{padding:.9rem 1.2rem;border-radius:6px;font-size:.88rem;margin:.9rem 0;display:none;line-height:1.6}
.puzzle-result.correct{background:rgba(39,174,96,.07);border:1px solid rgba(39,174,96,.18);color:#1a6b3a}
.puzzle-result.wrong{background:rgba(231,76,60,.05);border:1px solid rgba(231,76,60,.18);color:#7B0000}
.maths-scenario{background:linear-gradient(135deg,rgba(26,110,168,.05),rgba(30,132,73,.03));border:1px solid rgba(26,110,168,.14);border-radius:7px;padding:1.1rem;margin-bottom:1.1rem;border-left:3px solid var(--blue)}
.ms-lbl{font-family:'JetBrains Mono',monospace;font-size:.48rem;letter-spacing:.1em;text-transform:uppercase;color:var(--blue);margin-bottom:.42rem}
.ms-story{font-size:.88rem;color:var(--i60);line-height:1.73;font-style:italic}
.drum-sequence{display:flex;gap:.55rem;justify-content:center;margin:1rem 0;flex-wrap:wrap}
.drum-beat{width:38px;height:38px;border-radius:7px;border:2px solid rgba(27,42,58,.1);display:flex;align-items:center;justify-content:center;font-size:1.1rem;transition:all .25s}
.drum-beat.active{border-color:var(--orange);background:rgba(202,92,8,.09);transform:scale(1.18)}
.puzzle-nav{display:flex;justify-content:space-between;align-items:center;margin-top:1.4rem;padding-top:1.4rem;border-top:1px solid var(--bd)}
.puzzle-pts{font-family:'JetBrains Mono',monospace;font-size:.52rem;letter-spacing:.09em;color:var(--orange)}

/* ANCESTOR TREE */
.tree-canvas-wrap{position:relative;height:100vh;min-height:580px;display:flex;flex-direction:column;align-items:center;justify-content:center;overflow:hidden;background:#020d1a}
#tree-canvas{position:absolute;inset:0;width:100%;height:100%}
.tree-ui{position:relative;z-index:2;text-align:center;pointer-events:none}
.tree-ui h2{font-family:'Cormorant Garamond',serif;font-size:clamp(1.8rem,4vw,2.8rem);font-weight:700;color:#fff;text-shadow:0 0 36px rgba(100,181,232,.38);margin-bottom:.45rem}
.tree-ui h2 em{font-style:italic;color:#64B5E8}
.tree-ui p{font-size:.84rem;color:rgba(255,255,255,.38);line-height:1.82;max-width:360px;margin:0 auto 1.4rem}
.tree-tooltip{background:rgba(2,13,26,.82);border:1px solid rgba(100,181,232,.18);border-radius:5px;padding:.65rem .95rem;font-size:.76rem;color:rgba(255,255,255,.55);max-width:270px;margin:.7rem auto;line-height:1.58;pointer-events:none}
.tree-actions{pointer-events:all;display:flex;gap:.7rem;justify-content:center;flex-wrap:wrap;margin-top:.9rem}
.tree-stat-bar{position:absolute;bottom:1.8rem;left:50%;transform:translateX(-50%);z-index:2;display:flex;gap:1.8rem;background:rgba(2,13,26,.72);border:1px solid rgba(100,181,232,.12);border-radius:7px;padding:.8rem 1.8rem;backdrop-filter:blur(8px)}
.ts-item{text-align:center}
.ts-item strong{font-family:'Cormorant Garamond',serif;font-size:1.7rem;font-weight:700;color:#64B5E8;display:block;line-height:1}
.ts-item span{font-family:'JetBrains Mono',monospace;font-size:.43rem;letter-spacing:.09em;text-transform:uppercase;color:rgba(255,255,255,.28)}
.leaf-popup{position:absolute;background:rgba(2,13,26,.9);border:1px solid rgba(100,181,232,.22);border-radius:5px;padding:.55rem .82rem;font-size:.73rem;color:#fff;pointer-events:none;z-index:3;display:none;max-width:155px;line-height:1.38;backdrop-filter:blur(6px)}
.leaf-popup strong{color:#64B5E8;display:block}

/* SCHOOLS */
.schools-hero{background:linear-gradient(135deg,#0d2a1a,#1E8449,#145A32);padding:4.5rem 0 2.8rem;position:relative;overflow:hidden;text-align:center}
.schools-hero::before{content:'';position:absolute;inset:0;opacity:.05;background-image:repeating-linear-gradient(0deg,transparent,transparent 28px,rgba(255,255,255,.8) 28px,rgba(255,255,255,.8) 29px),repeating-linear-gradient(90deg,transparent,transparent 28px,rgba(255,255,255,.8) 28px,rgba(255,255,255,.8) 29px);background-size:29px 29px}
.schools-hero h2{font-family:'Cormorant Garamond',serif;font-size:clamp(2.3rem,5vw,3.8rem);font-weight:700;color:#fff;position:relative;z-index:2}
.schools-hero h2 em{color:#86EFAC;font-style:italic}
.schools-hero p{font-size:.88rem;color:rgba(255,255,255,.48);max-width:490px;margin:.7rem auto 1.4rem;line-height:1.85;position:relative;z-index:2}
.grade-pills{display:flex;gap:.45rem;justify-content:center;flex-wrap:wrap;position:relative;z-index:2}
.grade-pill{font-family:'Syne',sans-serif;font-size:.6rem;font-weight:700;letter-spacing:.07em;padding:.38rem .92rem;border-radius:20px;border:2px solid rgba(255,255,255,.18);color:rgba(255,255,255,.48);cursor:pointer;transition:all .2s;background:none}
.grade-pill:hover,.grade-pill.active{background:#fff;color:var(--green);border-color:#fff}
.grade-pill.priority{border-color:#86EFAC;color:#86EFAC}
.grade-pill.priority:hover,.grade-pill.priority.active{background:#86EFAC;color:#145A32}
.subjects-nav{display:flex;gap:.45rem;flex-wrap:wrap;margin:2.2rem 0 1.5rem}
.sub-tab{display:flex;align-items:center;gap:.45rem;font-family:'Syne',sans-serif;font-size:.58rem;font-weight:700;letter-spacing:.07em;text-transform:uppercase;padding:.46rem 1rem;border-radius:5px;border:2px solid var(--bd);color:var(--i60);cursor:pointer;transition:all .2s;background:#fff}
.sub-tab .sub-icon{font-size:.88rem}
.sub-tab:hover{border-color:var(--green);color:var(--green)}
.sub-tab.active,.sub-tab:hover{border-color:var(--green);color:var(--green)}
.sub-tab.maths.active,.sub-tab.maths:hover{border-color:var(--blue);background:var(--blue);color:#fff}
.sub-tab.science.active,.sub-tab.science:hover{border-color:#9B59B6;background:#9B59B6;color:#fff}
.sub-tab.active:not(.maths):not(.science){background:var(--green);color:#fff}
.topic-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:.95rem;margin-bottom:2rem}
.topic-card{background:#fff;border-radius:7px;padding:1.3rem;border:2px solid transparent;cursor:pointer;transition:all .2s;box-shadow:0 2px 10px rgba(30,132,73,.05)}
.topic-card:hover{border-color:var(--green);transform:translateY(-2px);box-shadow:0 7px 22px rgba(30,132,73,.09)}
.topic-card.maths:hover{border-color:var(--blue)}
.topic-card.science:hover{border-color:#9B59B6}
.tc-icon{font-family:'JetBrains Mono',monospace;font-size:1.1rem;font-weight:700;margin-bottom:.42rem}
.tc-name{font-family:'Syne',sans-serif;font-size:.76rem;font-weight:700;color:var(--ink);margin-bottom:.25rem}
.tc-sub{font-size:.73rem;color:var(--i60);line-height:1.52}
.tc-badge{font-family:'JetBrains Mono',monospace;font-size:.44rem;letter-spacing:.06em;text-transform:uppercase;padding:.14rem .45rem;border-radius:2px;background:rgba(30,132,73,.07);color:var(--green);border:1px solid rgba(30,132,73,.13);margin-top:.45rem;width:fit-content}
.tc-badge.maths{background:rgba(26,110,168,.07);color:var(--blue);border-color:rgba(26,110,168,.13)}
.tc-badge.science{background:rgba(155,89,182,.07);color:#9B59B6;border-color:rgba(155,89,182,.13)}

/* ZINTSOMI COURSES SECTION */
.zintsomi-section{background:linear-gradient(135deg,#1B2A3A,#22344A);padding:4rem 0}
.zintsomi-section .sec-lbl{color:rgba(255,255,255,.28)}
.zintsomi-section .sec-lbl::before{background:#F5A040}
.zintsomi-section .sec-title{color:#fff}
.zintsomi-section .sec-title em{color:#F5A040}
.zcourses-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:1.2rem;margin-top:2rem}
.zcourse{background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);border-radius:8px;padding:1.6rem;display:flex;flex-direction:column;gap:.8rem;transition:border-color .22s,background .22s;text-decoration:none;cursor:pointer}
.zcourse:hover{border-color:var(--orange);background:rgba(202,92,8,.06)}
.zcourse-img{width:100%;height:120px;border-radius:5px;overflow:hidden;background:linear-gradient(135deg,#3d1c00,#6B3A1F);display:flex;align-items:center;justify-content:center;font-size:2.5rem}
.zcourse-img.zi1{background:linear-gradient(135deg,#0d2035,#1A507A)}
.zcourse-img.zi2{background:linear-gradient(135deg,#1B3A1B,#1E8449)}
.zcourse-img.zi3{background:linear-gradient(135deg,#3d1c00,#8B5E3C)}
.zcourse-img.zi4{background:linear-gradient(135deg,#1B2A3A,#C0392B)}
.zcourse-level{font-family:'JetBrains Mono',monospace;font-size:.48rem;letter-spacing:.1em;text-transform:uppercase;padding:.18rem .52rem;border-radius:2px;width:fit-content;background:rgba(100,181,232,.1);color:#64B5E8;border:1px solid rgba(100,181,232,.2)}
.zcourse-name{font-family:'Cormorant Garamond',serif;font-size:1.18rem;font-weight:700;color:#fff;line-height:1.18}
.zcourse-desc{font-size:.8rem;color:rgba(255,255,255,.38);line-height:1.65}
.zcourse-footer{display:flex;align-items:center;justify-content:space-between;margin-top:auto;padding-top:.7rem;border-top:1px solid rgba(255,255,255,.07)}
.zcourse-dr{font-family:'JetBrains Mono',monospace;font-size:.48rem;letter-spacing:.04em;color:rgba(255,255,255,.28)}
.zcourse-cta{font-family:'Syne',sans-serif;font-size:.58rem;font-weight:700;letter-spacing:.07em;text-transform:uppercase;color:#F5A040;display:flex;align-items:center;gap:.35rem;transition:gap .18s}
.zcourse:hover .zcourse-cta{gap:.6rem}

/* NOTES MODAL */
.notes-overlay{display:none;position:fixed;inset:0;z-index:800;background:rgba(0,0,0,.68);align-items:center;justify-content:center;padding:1rem}
.notes-overlay.open{display:flex}
.notes-modal{background:#fff;border-radius:8px;width:100%;max-width:700px;max-height:87vh;overflow-y:auto;box-shadow:0 18px 55px rgba(0,0,0,.28)}
.nm-header{background:linear-gradient(135deg,#0d2a1a,#1E8449);padding:1.1rem 1.4rem;display:flex;justify-content:space-between;align-items:center;position:sticky;top:0;z-index:2}
.nm-title{font-family:'Cormorant Garamond',serif;font-size:1.25rem;font-weight:700;color:#fff}
.nm-close{background:none;border:none;color:rgba(255,255,255,.55);font-size:1.3rem;cursor:pointer;padding:.2rem .5rem;line-height:1}
.nm-close:hover{color:#fff}
.nm-body{padding:1.8rem}
.nm-section{margin-bottom:1.6rem}
.nm-section-title{font-family:'Syne',sans-serif;font-size:.62rem;font-weight:700;letter-spacing:.14em;text-transform:uppercase;color:var(--i35);margin-bottom:.75rem;padding-bottom:.45rem;border-bottom:1px solid var(--bd)}
.nm-section-title.maths{color:var(--blue);border-color:rgba(26,110,168,.18)}
.nm-section-title.science{color:#9B59B6;border-color:rgba(155,89,182,.18)}
.nm-body p{font-size:.88rem;color:var(--i60);line-height:1.88;margin-bottom:.75rem;font-weight:300}
.nm-body strong{color:var(--ink);font-weight:600}
.formula-box{background:linear-gradient(135deg,rgba(26,110,168,.04),rgba(155,89,182,.03));border:1px solid rgba(26,110,168,.13);border-radius:5px;padding:.9rem 1.1rem;margin:.75rem 0;border-left:3px solid var(--blue)}
.f-lbl{font-family:'JetBrains Mono',monospace;font-size:.48rem;letter-spacing:.09em;text-transform:uppercase;color:var(--blue);margin-bottom:.35rem}
.f-eq{font-family:'JetBrains Mono',monospace;font-size:.84rem;color:var(--ink);line-height:1.75}
.tip-box{background:rgba(202,92,8,.04);border:1px solid rgba(202,92,8,.13);border-radius:5px;padding:.9rem 1.1rem;margin:.75rem 0;border-left:3px solid var(--orange);display:flex;gap:.75rem}
.tip-icon{font-size:1.1rem;flex-shrink:0}
.tip-lbl{font-family:'JetBrains Mono',monospace;font-size:.46rem;letter-spacing:.09em;text-transform:uppercase;color:var(--orange);margin-bottom:.22rem}
.tip-text{font-size:.83rem;color:var(--i60);line-height:1.72;font-style:italic}
.practice-q{background:var(--paper);border-radius:5px;padding:.92rem;margin-bottom:.55rem;border-left:3px solid var(--bd)}
.pq-num{font-family:'JetBrains Mono',monospace;font-size:.48rem;letter-spacing:.07em;color:var(--i35);margin-bottom:.27rem}
.pq-q{font-size:.86rem;color:var(--ink);line-height:1.58;margin-bottom:.45rem}
.pq-toggle{font-family:'JetBrains Mono',monospace;font-size:.48rem;letter-spacing:.05em;text-transform:uppercase;color:var(--orange);cursor:pointer;background:none;border:none;padding:0;transition:color .18s}
.pq-toggle:hover{color:var(--ora-l)}
.pq-ans{font-size:.81rem;color:var(--green);line-height:1.63;margin-top:.45rem;display:none;padding:.45rem;background:rgba(30,132,73,.04);border-radius:3px}

/* AUDIO */
.audio-hero{background:linear-gradient(160deg,#1a0d00,#3d1c00,#0d1a2a);padding:4.5rem 0 2.8rem;text-align:center;position:relative;overflow:hidden}
.vinyl{position:absolute;right:-40px;top:-40px;width:220px;height:220px;border-radius:50%;background:conic-gradient(#1a0d00,#3d1c00,#1a0d00,#3d1c00,#1a0d00);border:3px solid rgba(255,215,0,.13);opacity:.28;animation:spin 22s linear infinite}
@keyframes spin{from{transform:rotate(0)}to{transform:rotate(360deg)}}
.audio-hero h2{font-family:'Cormorant Garamond',serif;font-size:clamp(2.4rem,5vw,3.8rem);font-weight:700;color:#FFD700;position:relative;z-index:2}
.audio-hero h2 em{font-style:italic;color:#F5A040}
.audio-hero p{font-size:.88rem;color:rgba(255,255,255,.38);max-width:440px;margin:.7rem auto 0;line-height:1.85;position:relative;z-index:2}
.audio-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:1.1rem;padding:2.5rem 0}
.audio-card{border-radius:9px;overflow:hidden;cursor:pointer;transition:transform .22s}
.audio-card:hover{transform:translateY(-3px)}
.ac-art{height:170px;display:flex;align-items:center;justify-content:center;position:relative}
.ac-art-1{background:linear-gradient(135deg,#5D1A00,#8B2500,#C0392B)}
.ac-art-2{background:linear-gradient(135deg,#0d2a1a,#1E8449,#27AE60)}
.ac-art-3{background:linear-gradient(135deg,#1A0D2E,#7B2D8B,#9B59B6)}
.ac-art-4{background:linear-gradient(135deg,#1a2744,#1A6EA8,#2E8FCC)}
.ac-art-5{background:linear-gradient(135deg,#2a1a00,#8B6914,#E6B32A)}
.ac-art-6{background:linear-gradient(135deg,#0d1117,#1B2A3A,#22344A)}
.ac-vinyl-icon{font-size:2.8rem;opacity:.55}
.ac-coming{position:absolute;top:.75rem;right:.75rem;font-family:'JetBrains Mono',monospace;font-size:.43rem;letter-spacing:.09em;text-transform:uppercase;padding:.18rem .55rem;border-radius:2px;background:rgba(255,215,0,.13);border:1px solid rgba(255,215,0,.22);color:#FFD700}
.ac-body{background:#2a1200;padding:1.1rem}
.ac-name{font-family:'Cormorant Garamond',serif;font-size:1.05rem;font-weight:700;color:#FFD700;margin-bottom:.22rem}
.ac-desc{font-size:.76rem;color:rgba(255,255,255,.32);line-height:1.58}
.ac-notify{display:inline-flex;align-items:center;gap:.42rem;margin-top:.7rem;font-family:'JetBrains Mono',monospace;font-size:.46rem;letter-spacing:.05em;text-transform:uppercase;color:var(--orange);cursor:pointer;background:none;border:none;padding:0;transition:color .2s}
.ac-notify:hover{color:#F5A040}

/* RESPONSIVE */
@media(max-width:900px){
  .home-hero{grid-template-columns:1fr}
  .home-hero-r{min-height:260px}
  .worlds-grid{grid-template-columns:repeat(2,1fr)}
  .studio{grid-template-columns:1fr}
  .games-grid{grid-template-columns:1fr}
  .topic-grid{grid-template-columns:repeat(2,1fr)}
  .zcourses-grid{grid-template-columns:1fr}
  .audio-grid{grid-template-columns:1fr 1fr}
  .wall-grid{grid-template-columns:1fr 1fr}
}
@media(max-width:600px){
  .nav-pills{display:none}
  .worlds-grid{grid-template-columns:1fr 1fr}
  .topic-grid{grid-template-columns:1fr}
  .puzzle-options{grid-template-columns:1fr}
  .wall-grid,.audio-grid{grid-template-columns:1fr}
  .inst-selector{grid-template-columns:repeat(2,1fr)}
  .djembe-pads{grid-template-columns:repeat(4,1fr)}
  .tree-stat-bar{gap:1rem;padding:.65rem 1.1rem}
}
</style>
</head>
<body>

<div id="intro">
  <canvas id="intro-canvas"></canvas>
  <div id="intro-logo">
    <h1>Kwa <em>Sukela</em></h1>
    <p>Africa's Storytelling World ¬∑ 2026</p>
  </div>
  <button id="skip-btn">Skip Intro</button>
</div>

<div id="site">
  <nav>
    <div class="nstrip"></div>
    <div class="nav-w">
      <span class="logo" onclick="showWorld('home')">Kwa <em>Sukela</em></span>
      <div class="nav-pills">
        <button class="npill active" onclick="showWorld('home')">üè† Home</button>
        <button class="npill" onclick="showWorld('games')">üéÆ Games</button>
        <button class="npill" onclick="showWorld('instruments')">ü•Å Studio</button>
        <button class="npill" onclick="showWorld('brain')">üß† Teasers</button>
        <button class="npill" onclick="showWorld('tree')">üå≥ Ancestor Tree</button>
        <button class="npill schools" onclick="showWorld('schools')">üéì Schools</button>
        <button class="npill" onclick="showWorld('audio')">üéµ Audio</button>
      </div>
    </div>
  </nav>

  <!-- HOME -->
  <div class="world active" id="home-world">
    <div class="home-hero">
      <div class="home-hero-l">
        <div class="home-hero-tag">South Africa's Storytelling Academy ¬∑ 2026</div>
        <h1>Where Every<br><strong>Story</strong><em>Belongs.</em></h1>
        <p class="home-hero-sub">Six interactive worlds. One living community. Rooted in African tradition, built for every learner.</p>
        <div style="display:flex;gap:.7rem;flex-wrap:wrap">
          <button class="btn" onclick="showWorld('schools')">Start Learning</button>
          <button class="btn btn-out" style="border-color:rgba(255,255,255,.18);color:rgba(255,255,255,.55)" onclick="showWorld('games')">Explore Games</button>
        </div>
      </div>
      <div class="home-hero-r" id="heroR">
        <div class="hero-quote">
          <blockquote>"The story does not begin with the storyteller. It begins the moment the listener leans in."</blockquote>
          <cite>‚Äî Dr. Nomsa Mdlalose "Dr. Sasa"</cite>
        </div>
      </div>
    </div>
    <div class="worlds-grid">
      <div class="world-card" onclick="showWorld('games')"><div class="wc-icon">üåç</div><div class="wc-name">Indigenous Games</div><div class="wc-sub">Mancala, Diketo, Kgati, Ncuva. Tradition meets digital play. Score. Level up.</div><div class="wc-tag">Savannah World ¬∑ 4 Games</div></div>
      <div class="world-card" onclick="showWorld('instruments')"><div class="wc-icon">ü•Å</div><div class="wc-name">Music Studio</div><div class="wc-sub">Djembe, Mbira, Hosho, Uhadi. Record your session. Post to the community.</div><div class="wc-tag">4 Instruments ¬∑ Record & Share</div></div>
      <div class="world-card" onclick="showWorld('brain')"><div class="wc-icon">üß†</div><div class="wc-name">Brain Teasers</div><div class="wc-sub">Daily puzzles. Proverbs, IQ patterns, Maths, Science. Build your streak.</div><div class="wc-tag">Daily Challenge ¬∑ 6 Types</div></div>
      <div class="world-card" onclick="showWorld('tree')"><div class="wc-icon">üå≥</div><div class="wc-name">Ancestor Tree</div><div class="wc-sub">A living tree growing with every story, game and lesson contributed.</div><div class="wc-tag">Community ¬∑ Living World</div></div>
      <div class="world-card" onclick="showWorld('schools')"><div class="wc-icon">üéì</div><div class="wc-name">Schools Hub</div><div class="wc-sub">Grade 12 study notes for Maths, Physical Sciences, English, isiZulu. CAPS 2025.</div><div class="wc-tag">Grade 12 Priority ¬∑ Free</div></div>
      <div class="world-card" onclick="showWorld('audio')"><div class="wc-icon">üéµ</div><div class="wc-name">Audio Archive</div><div class="wc-sub">Umemolo songs, izinganekwane, lullabies, folklore. Dr Sasa's voice.</div><div class="wc-tag">Coming Soon</div></div>
    </div>
    <div style="background:var(--ink2);padding:3rem 0">
      <div class="ctr">
        <div class="sec-lbl" style="color:rgba(255,255,255,.25)">Community</div>
        <h2 class="sec-title" style="color:#fff;margin-bottom:.4rem">Community <em>Wall</em></h2>
        <p style="font-size:.86rem;color:rgba(255,255,255,.35);margin-bottom:0;line-height:1.82">Music created here. Stories shared. Achievements celebrated.</p>
        <div class="wall-grid">
          <div class="wall-post"><span class="wp-type wp-music">üéµ Music</span><div class="wp-name">Thandi K. ‚Äî Durban</div><div class="wp-content">My first mbira composition ‚Äî a lullaby for my daughter</div><div class="wp-meta">2 hours ago ¬∑ 12 ‚ô•</div></div>
          <div class="wall-post"><span class="wp-type wp-achieve">üèÖ Achievement</span><div class="wp-name">Sipho M. ‚Äî Johannesburg</div><div class="wp-content">30-day brain teaser streak complete! üî• Thanks Dr Sasa</div><div class="wp-meta">Yesterday ¬∑ 34 ‚ô•</div></div>
          <div class="wall-post"><span class="wp-type wp-story">üìñ Story</span><div class="wp-name">Nomvula D. ‚Äî Cape Town</div><div class="wp-content">My grandmother's version of the Hare and the Tortoise ‚Äî a Xhosa retelling</div><div class="wp-meta">3 days ago ¬∑ 28 ‚ô•</div></div>
        </div>
      </div>
    </div>
  </div>

  <!-- GAMES -->
  <div class="world" id="games-world">
    <div class="savannah-hero">
      <div class="sv-sky"></div><div class="sv-sun"></div>
      <svg style="position:absolute;left:5%;bottom:60px" width="85" height="95" viewBox="0 0 85 95"><rect x="38" y="28" width="7" height="67" fill="#1a0800"/><ellipse cx="42" cy="24" rx="38" ry="19" fill="#0f2200" opacity=".92"/><ellipse cx="18" cy="30" rx="21" ry="11" fill="#0f2200" opacity=".7"/><ellipse cx="66" cy="27" rx="22" ry="12" fill="#0f2200" opacity=".74"/></svg>
      <svg style="position:absolute;right:9%;bottom:60px" width="68" height="78" viewBox="0 0 68 78"><rect x="29" y="23" width="7" height="55" fill="#1a0800"/><ellipse cx="32" cy="19" rx="29" ry="15" fill="#0f2200" opacity=".88"/><ellipse cx="53" cy="25" rx="17" ry="9" fill="#0f2200" opacity=".7"/></svg>
      <div class="sv-ground"></div>
      <div class="sv-title"><h2>Indigenous Games</h2><p>African tradition ¬∑ digital play ¬∑ real competition</p></div>
    </div>
    <div class="ndebele-border"></div>
    <div class="games-body">
      <div class="ctr">
        <div style="margin:2rem 0"><div class="sec-lbl">Play & Learn</div><h2 class="sec-title">Choose Your <em>Game</em></h2><p class="sec-sub">Each game rooted in African tradition. Read the teaser, then dive in and play.</p></div>
        <div class="games-grid">
          <div class="game-tile" onclick="openGame('mancala')">
            <div class="game-tile-hero gt-mancala"><svg width="130" height="75" viewBox="0 0 130 75"><rect x="8" y="18" width="114" height="38" rx="19" fill="rgba(255,255,255,.07)" stroke="rgba(255,215,0,.28)" stroke-width="1.5"/><circle cx="32" cy="37" r="11" fill="rgba(255,215,0,.13)" stroke="rgba(255,215,0,.38)" stroke-width="1.5"/><circle cx="60" cy="37" r="11" fill="rgba(255,215,0,.13)" stroke="rgba(255,215,0,.38)" stroke-width="1.5"/><circle cx="88" cy="37" r="11" fill="rgba(255,215,0,.13)" stroke="rgba(255,215,0,.38)" stroke-width="1.5"/><text x="32" y="41" text-anchor="middle" fill="#FFD700" font-size="10" font-weight="bold">4</text><text x="60" y="41" text-anchor="middle" fill="#FFD700" font-size="10" font-weight="bold">4</text><text x="88" y="41" text-anchor="middle" fill="#FFD700" font-size="10" font-weight="bold">4</text><circle cx="20" cy="37" r="7" fill="rgba(202,92,8,.28)" stroke="rgba(202,92,8,.55)" stroke-width="1.5"/><circle cx="110" cy="37" r="7" fill="rgba(46,143,204,.28)" stroke="rgba(46,143,204,.55)" stroke-width="1.5"/></svg></div>
            <div class="game-tile-body"><div class="gt-tag">Strategy</div><div class="gt-name">Mancala / Umlabalaba</div><div class="gt-origin">üåç Sub-Saharan Africa ¬∑ 7,000+ years old</div><p class="gt-desc">Sow seeds, capture stones, outsmart your opponent. One of the oldest strategy games on Earth ‚Äî born in Africa.</p><div class="gt-stats"><div class="gt-stat"><strong>10</strong> Levels</div><div class="gt-stat"><strong>AI</strong> Opponent</div><div class="gt-stat"><strong>‚òÖ</strong> Scoring</div></div></div>
          </div>
          <div class="game-tile" onclick="openGame('diketo')">
            <div class="game-tile-hero gt-diketo"><div style="text-align:center;color:#FFD700;font-size:2.2rem">ü™®ü™®ü™®<br><span style="font-size:1rem;opacity:.5;display:block;margin-top:.3rem">tap the rhythm</span></div></div>
            <div class="game-tile-body"><div class="gt-tag">Rhythm</div><div class="gt-name">Diketo</div><div class="gt-origin">üáøüá¶ Sotho tradition ¬∑ South Africa</div><p class="gt-desc">Watch the pattern flash. Tap it back in exact order. Faster every round. Deeply addictive.</p><div class="gt-stats"><div class="gt-stat"><strong>20</strong> Levels</div><div class="gt-stat"><strong>‚Üë</strong> Speed</div><div class="gt-stat"><strong>‚òÖ</strong> Scoring</div></div></div>
          </div>
          <div class="game-tile" onclick="openGame('kgati')">
            <div class="game-tile-hero gt-kgati"><div style="text-align:center;color:#fff;font-size:2.5rem;padding:1rem">ü™¢<br><span style="font-size:.9rem;opacity:.5;display:block;margin-top:.4rem">read pattern ¬∑ jump in time</span></div></div>
            <div class="game-tile-body"><div class="gt-tag">Pattern Logic</div><div class="gt-name">Kgati</div><div class="gt-origin">üáøüá¶ Sotho & Tswana tradition</div><p class="gt-desc">The digital rope never stops. Read the jump sequence. Input it before the rope catches you.</p><div class="gt-stats"><div class="gt-stat"><strong>15</strong> Levels</div><div class="gt-stat"><strong>‚ö°</strong> Speed+</div><div class="gt-stat"><strong>3</strong> Lives</div></div></div>
          </div>
          <div class="game-tile" onclick="openGame('ncuva')">
            <div class="game-tile-hero gt-ncuva"><div style="display:grid;grid-template-columns:repeat(3,1fr);gap:.45rem;padding:1.4rem;width:fit-content;margin:auto"><div style="width:30px;height:30px;border-radius:4px;background:rgba(255,215,0,.28);border:1.5px solid rgba(255,215,0,.48)"></div><div style="width:30px;height:30px;border-radius:4px;background:rgba(202,92,8,.28);border:1.5px solid rgba(202,92,8,.48)"></div><div style="width:30px;height:30px;border-radius:4px;background:rgba(255,215,0,.28);border:1.5px solid rgba(255,215,0,.48)"></div><div style="width:30px;height:30px;border-radius:4px;background:rgba(255,255,255,.06)"></div><div style="width:30px;height:30px;border-radius:4px;background:rgba(202,92,8,.28);border:1.5px solid rgba(202,92,8,.48)"></div><div style="width:30px;height:30px;border-radius:4px;background:rgba(255,255,255,.06)"></div></div></div>
            <div class="game-tile-body"><div class="gt-tag">Memory</div><div class="gt-name">Ncuva</div><div class="gt-origin">üáøüá¶ Venda tradition ¬∑ Limpopo</div><p class="gt-desc">Patterns flash. Memorise them. Recreate perfectly. Each round grows more complex. Trains focus and visual memory.</p><div class="gt-stats"><div class="gt-stat"><strong>12</strong> Levels</div><div class="gt-stat"><strong>Memory</strong></div><div class="gt-stat"><strong>+</strong> Complexity</div></div></div>
          </div>
        </div>
      </div>
    </div>
    <div class="ndebele-border"></div>
  </div>

  <!-- GAME OVERLAYS -->
  <div class="game-overlay" id="mancala-overlay">
    <div class="game-modal">
      <div class="gm-header"><div class="gm-title">üåç Mancala / Umlabalaba</div><button class="gm-close" onclick="closeGame('mancala')">‚úï</button></div>
      <div class="gm-body">
        <div class="gm-score-bar"><div class="gm-score-item"><span>Your Store</span><strong id="p1-store">0</strong></div><div class="gm-score-item"><span>Moves</span><strong id="m-moves">0</strong></div><div class="gm-score-item"><span>AI Store</span><strong id="p2-store">0</strong></div></div>
        <div class="mancala-board">
          <div class="mancala-lbl">AI (North)</div>
          <div class="mancala-row"><div class="mancala-store"><strong id="store-p2">0</strong><span>AI</span></div><div class="mancala-pits" id="ai-pits"></div><div class="mancala-store"><strong id="store-p1">0</strong><span>You</span></div></div>
          <div class="mancala-row"><div class="mancala-store" style="visibility:hidden"></div><div class="mancala-pits" id="player-pits"></div><div class="mancala-store" style="visibility:hidden"></div></div>
          <div class="mancala-lbl">You (South)</div>
        </div>
        <div class="game-msg" id="m-msg">Your turn ‚Äî click a pit</div>
        <div style="display:flex;gap:.7rem;justify-content:center;margin-top:1rem"><button class="btn" onclick="initMancala()">New Game</button><button class="btn btn-out" style="color:#fff;border-color:rgba(255,255,255,.2)" onclick="closeGame('mancala')">Exit</button></div>
      </div>
    </div>
  </div>

  <div class="game-overlay" id="diketo-overlay">
    <div class="game-modal">
      <div class="gm-header"><div class="gm-title">ü™® Diketo ‚Äî Rhythm Challenge</div><button class="gm-close" onclick="closeGame('diketo')">‚úï</button></div>
      <div class="gm-body">
        <div class="gm-score-bar"><div class="gm-score-item"><span>Score</span><strong id="d-score">0</strong></div><div class="gm-score-item"><span>Level</span><strong id="d-level">1</strong></div><div class="gm-score-item"><span>Best</span><strong id="d-best">0</strong></div></div>
        <div style="color:rgba(255,255,255,.48);font-size:.83rem;margin-bottom:.9rem;line-height:1.62;text-align:center">Watch the pattern light up ‚Äî then tap the stones in the same order.</div>
        <div class="diketo-seq" id="diketo-seq"></div>
        <div class="game-msg" id="d-msg">Press Start to play</div>
        <button class="diketo-tap-btn" id="diketo-main-btn" onclick="diketoTap()">TAP</button>
        <div style="display:flex;gap:.7rem;justify-content:center"><button class="btn" onclick="startDiketo()">Start</button><button class="btn btn-out" style="color:#fff;border-color:rgba(255,255,255,.2)" onclick="closeGame('diketo')">Exit</button></div>
      </div>
    </div>
  </div>

  <div class="game-overlay" id="kgati-overlay">
    <div class="game-modal">
      <div class="gm-header"><div class="gm-title">ü™¢ Kgati ‚Äî Jump the Pattern</div><button class="gm-close" onclick="closeGame('kgati')">‚úï</button></div>
      <div class="gm-body">
        <div class="gm-score-bar"><div class="gm-score-item"><span>Score</span><strong id="k-score">0</strong></div><div class="gm-score-item"><span>Level</span><strong id="k-level">1</strong></div><div class="gm-score-item"><span>Lives</span><strong id="k-lives">3</strong></div></div>
        <div class="kgati-rope-area"><div class="kgati-rope"></div><div class="kgati-jumper" id="kgati-jumper">üßí</div></div>
        <p style="color:rgba(255,255,255,.42);font-size:.8rem;text-align:center;margin:.5rem 0">Memorise the jump sequence then tap the matching options:</p>
        <div class="kgati-pattern" id="kgati-pattern"></div>
        <div class="game-msg" id="k-msg">Press Start</div>
        <div style="display:flex;gap:.7rem;justify-content:center;margin-top:.8rem"><button class="btn" onclick="startKgati()">Start</button><button class="btn btn-out" style="color:#fff;border-color:rgba(255,255,255,.2)" onclick="closeGame('kgati')">Exit</button></div>
      </div>
    </div>
  </div>

  <div class="game-overlay" id="ncuva-overlay">
    <div class="game-modal">
      <div class="gm-header"><div class="gm-title">‚ú¶ Ncuva ‚Äî Remember the Pattern</div><button class="gm-close" onclick="closeGame('ncuva')">‚úï</button></div>
      <div class="gm-body">
        <div class="gm-score-bar"><div class="gm-score-item"><span>Score</span><strong id="n-score">0</strong></div><div class="gm-score-item"><span>Level</span><strong id="n-level">1</strong></div><div class="gm-score-item"><span>Best</span><strong id="n-best">0</strong></div></div>
        <div class="game-msg" id="n-msg">Press Start ‚Äî memorise the pattern!</div>
        <div class="ncuva-grid" id="ncuva-grid"></div>
        <div style="display:flex;gap:.7rem;justify-content:center;margin-top:.9rem"><button class="btn" onclick="startNcuva()">Start</button><button class="btn btn-out" style="color:#fff;border-color:rgba(255,255,255,.2)" onclick="closeGame('ncuva')">Exit</button></div>
      </div>
    </div>
  </div>

  <!-- INSTRUMENTS -->
  <div class="world" id="instruments-world">
    <div class="inst-hero"><div class="ctr"><div class="sec-lbl" style="color:rgba(255,255,255,.25);justify-content:center">Music Studio</div><h2>African <em>Instrument Studio</em></h2><p>Play. Record. Loop. Share. Four instruments, one recording session, one community wall.</p></div></div>
    <div style="background:#0d1117">
    <div class="ctr">
      <div class="studio">
        <div>
          <div class="inst-selector">
            <button class="inst-btn active" onclick="selectInst('djembe',this)"><span class="inst-emoji">ü•Å</span><span class="inst-name">Djembe</span><span class="inst-origin">West Africa ¬∑ Percussion</span></button>
            <button class="inst-btn" onclick="selectInst('mbira',this)"><span class="inst-emoji">üéπ</span><span class="inst-name">Mbira</span><span class="inst-origin">Zimbabwe ¬∑ Thumb Piano</span></button>
            <button class="inst-btn" onclick="selectInst('hosho',this)"><span class="inst-emoji">ü™ò</span><span class="inst-name">Hosho</span><span class="inst-origin">Zimbabwe ¬∑ Gourd Shaker</span></button>
            <button class="inst-btn" onclick="selectInst('uhadi',this)"><span class="inst-emoji">üéª</span><span class="inst-name">Uhadi</span><span class="inst-origin">Xhosa ¬∑ Musical Bow</span></button>
          </div>
          <div class="inst-play-area" id="inst-play-area">
            <div class="inst-play-title">ü•Å Djembe</div>
            <p class="inst-play-sub">8 zones ‚Äî bass, tone, slap. The heartbeat of West Africa. Click or tap to play.</p>
            <div class="djembe-pads">
              <div class="drum-pad dp1" onclick="playDrum(this,'bass')">Bass L</div>
              <div class="drum-pad dp2" onclick="playDrum(this,'tone')">Tone L</div>
              <div class="drum-pad dp3" onclick="playDrum(this,'slap')">Slap L</div>
              <div class="drum-pad dp4" onclick="playDrum(this,'open')">Open</div>
              <div class="drum-pad dp5" onclick="playDrum(this,'slap')">Slap R</div>
              <div class="drum-pad dp6" onclick="playDrum(this,'tone')">Tone R</div>
              <div class="drum-pad dp7" onclick="playDrum(this,'bass')">Bass R</div>
              <div class="drum-pad dp8" onclick="playDrum(this,'mute')">Mute</div>
            </div>
          </div>
        </div>
        <div class="recorder-panel">
          <div class="rec-title">üî¥ Recording Studio</div>
          <button class="rec-btn-main" id="rec-btn" onclick="toggleRecord()"></button>
          <div class="rec-status" id="rec-status">READY</div>
          <div class="rec-timeline"><div class="rec-wave" id="rec-wave"></div></div>
          <div class="rec-controls">
            <button class="rec-ctrl" id="play-ctrl" onclick="playback()">‚ñ∂ Play</button>
            <button class="rec-ctrl" id="loop-ctrl" onclick="toggleLoop()">‚Ü∫ Loop</button>
            <button class="rec-ctrl" onclick="clearRec()">‚úï Clear</button>
          </div>
          <button class="post-wall-btn" onclick="postToWall()">üì§ Post to Community Wall</button>
          <div class="posted-notif" id="posted-notif">‚úì Posted to Community Wall!</div>
        </div>
      </div>
    </div>
    </div>
  </div>

  <!-- BRAIN TEASERS -->
  <div class="world" id="brain-world">
    <div class="brain-hero"><div class="ctr"><div class="sec-lbl" style="color:rgba(255,255,255,.25);justify-content:center">Daily Challenge</div><h2>Brain <em>Teasers</em></h2><p>Six puzzle types. New challenge every day. Build your streak and train your mind.</p><div class="streak-bar"><div class="streak-fire">üî•</div><div class="streak-info"><strong id="streak-count">7</strong><span>Day Streak</span></div><div class="streak-dots" id="streak-dots"></div></div></div></div>
    <div class="ctr">
      <div class="puzzle-tabs">
        <button class="ptab active" onclick="setPuzzleType('proverb')">üìñ Proverbs</button>
        <button class="ptab" onclick="setPuzzleType('pattern')">‚ú¶ Patterns</button>
        <button class="ptab" onclick="setPuzzleType('logic')">üß© Logic</button>
        <button class="ptab" onclick="setPuzzleType('maths')">üìê Maths</button>
        <button class="ptab" onclick="setPuzzleType('science')">üî¨ Science</button>
        <button class="ptab" onclick="setPuzzleType('drum')">ü•Å Drum Memory</button>
      </div>
      <div class="puzzle-stage" id="puzzle-stage"></div>
    </div>
  </div>

  <!-- ANCESTOR TREE -->
  <div class="world" id="tree-world">
    <div class="tree-canvas-wrap">
      <canvas id="tree-canvas"></canvas>
      <div class="tree-ui">
        <h2>The <em>Ancestor Tree</em></h2>
        <p>Every story told, game played, puzzle solved ‚Äî grows this tree.<br>Your leaf lives here. Forever.</p>
        <div class="tree-tooltip">üå± Hover over a glowing leaf to see who contributed. Every leaf is a real learner in the Kwa Sukela community.</div>
        <div class="tree-actions">
          <button class="btn btn-blu" onclick="growLeaf()">üåø Add Your Leaf</button>
          <button class="btn btn-out" style="border-color:rgba(100,181,232,.28);color:#64B5E8" onclick="showWorld('schools')">Learn ‚Üí Earn Leaves</button>
        </div>
      </div>
      <div class="tree-stat-bar">
        <div class="ts-item"><strong id="leaf-count">247</strong><span>Leaves</span></div>
        <div class="ts-item"><strong id="branch-count">8</strong><span>Branches</span></div>
        <div class="ts-item"><strong id="story-count">143</strong><span>Stories</span></div>
      </div>
      <div class="leaf-popup" id="leaf-popup"></div>
    </div>
  </div>

  <!-- SCHOOLS -->
  <div class="world" id="schools-world">
    <div class="schools-hero"><div class="ctr"><div class="sec-lbl" style="color:rgba(134,239,172,.45);justify-content:center">CAPS Aligned 2025</div><h2>Schools <em>Hub</em></h2><p>Study notes, key formulas, practice questions and Dr Sasa's exam tips. Free for every South African learner.</p><div class="grade-pills"><button class="grade-pill priority active" onclick="setGrade(12)">Grade 12 ‚òÖ</button><button class="grade-pill" onclick="setGrade(11)">Grade 11</button><button class="grade-pill" onclick="setGrade(10)">Grade 10</button></div></div></div>
    <div class="ctr" style="padding-top:2.2rem">
      <div class="subjects-nav">
        <button class="sub-tab maths active" onclick="setSubject('maths')"><span class="sub-icon">üìê</span>Mathematics</button>
        <button class="sub-tab science" onclick="setSubject('science')"><span class="sub-icon">üî¨</span>Physical Sciences</button>
        <button class="sub-tab" onclick="setSubject('english')"><span class="sub-icon">üìù</span>English HL</button>
        <button class="sub-tab" onclick="setSubject('zulu')"><span class="sub-icon">üó£Ô∏è</span>isiZulu</button>
        <button class="sub-tab" onclick="setSubject('lifesci')"><span class="sub-icon">üß¨</span>Life Sciences</button>
      </div>
      <div class="topic-grid" id="topic-grid"></div>
    </div>

    <!-- ZINTSOMI COURSES SECTION -->
    <div class="zintsomi-section">
      <div class="ctr">
        <div class="sec-lbl" style="color:rgba(255,255,255,.25)">Zintsomi Learning Platform</div>
        <h2 class="sec-title">Online <em>Courses</em> by Dr. Sasa</h2>
        <p class="sec-sub" style="color:rgba(255,255,255,.42)">Accredited storytelling and heritage courses hosted on zintsomicourses.co.za. Enrol directly ‚Äî login, payment and certificates all handled on the platform.</p>
        <div class="zcourses-grid">
          <a class="zcourse" href="https://zintsomicourses.co.za/courses-details/fundamentals-of-storytelling" target="_blank">
            <div class="zcourse-img zi1">üìñ</div>
            <div class="zcourse-level">Beginner</div>
            <div class="zcourse-name">Fundamentals of Storytelling</div>
            <div class="zcourse-desc">Master the art of storytelling ‚Äî African narrative structures, voice, performance technique and the oral tradition. The perfect starting point for aspiring storytellers.</div>
            <div class="zcourse-footer"><span class="zcourse-dr">Dr Sasa ¬∑ Zintsomi</span><span class="zcourse-cta">Enrol Now ‚Üí</span></div>
          </a>
          <a class="zcourse" href="https://zintsomicourses.co.za/courses-details/folktale-studies" target="_blank">
            <div class="zcourse-img zi2">üåø</div>
            <div class="zcourse-level">Beginner</div>
            <div class="zcourse-name">Folktale Studies</div>
            <div class="zcourse-desc">The cultural significance and evolving role of folktales in African societies. Understand izinganekwane deeply ‚Äî their structure, purpose and power in communities.</div>
            <div class="zcourse-footer"><span class="zcourse-dr">Dr Sasa ¬∑ Zintsomi</span><span class="zcourse-cta">Enrol Now ‚Üí</span></div>
          </a>
          <a class="zcourse" href="https://zintsomicourses.co.za/courses-details/storytelling-in-business" target="_blank">
            <div class="zcourse-img zi3">üíº</div>
            <div class="zcourse-level">Intermediate</div>
            <div class="zcourse-name">Storytelling in Business</div>
            <div class="zcourse-desc">Apply African storytelling ‚Äî especially folktales ‚Äî to business communication, branding and strategic leadership. An African lens on corporate narrative.</div>
            <div class="zcourse-footer"><span class="zcourse-dr">Dr Sasa ¬∑ Zintsomi</span><span class="zcourse-cta">Enrol Now ‚Üí</span></div>
          </a>
          <a class="zcourse" href="https://zintsomicourses.co.za/courses-details/from-the-frontlines-preserving-south-africa-s-living-freedom-heritage" target="_blank">
            <div class="zcourse-img zi4">üèõÔ∏è</div>
            <div class="zcourse-level">Beginner</div>
            <div class="zcourse-name">From the Frontlines: Preserving South Africa's Living Freedom Heritage</div>
            <div class="zcourse-desc">Transform memory into movement. Merges history, creativity and enterprise to preserve South Africa's liberation heritage through storytelling and community action.</div>
            <div class="zcourse-footer"><span class="zcourse-dr">Dr Sasa ¬∑ Zintsomi</span><span class="zcourse-cta">Enrol Now ‚Üí</span></div>
          </a>
        </div>
        <div style="text-align:center;margin-top:2rem"><a href="https://zintsomicourses.co.za/courses" target="_blank" class="btn btn-out" style="border-color:rgba(255,255,255,.2);color:rgba(255,255,255,.6)">Browse All Courses on Zintsomi ‚Üí</a></div>
      </div>
    </div>
  </div>

  <!-- NOTES OVERLAY -->
  <div class="notes-overlay" id="notes-overlay">
    <div class="notes-modal">
      <div class="nm-header"><div class="nm-title" id="nm-title">Topic Notes</div><button class="nm-close" onclick="closeNotes()">‚úï</button></div>
      <div class="nm-body" id="nm-body"></div>
    </div>
  </div>

  <!-- AUDIO -->
  <div class="world" id="audio-world">
    <div class="audio-hero"><div class="vinyl"></div><div class="ctr" style="position:relative;z-index:2"><div class="sec-lbl" style="color:rgba(255,215,0,.28);justify-content:center">Folklore & Song</div><h2>Audio <em>Archive</em></h2><p>Umemolo songs, izinganekwane, lullabies, ceremonial songs and Dr Sasa's lectures. Launching soon.</p></div></div>
    <div style="background:#1a0d00"><div class="ctr">
      <div class="audio-grid">
        <div class="audio-card"><div class="ac-art ac-art-1"><span class="ac-vinyl-icon">üíÉ</span><span class="ac-coming">Coming Soon</span></div><div class="ac-body"><div class="ac-name">Umemolo Songs</div><div class="ac-desc">Celebration songs at coming-of-age ceremonies.</div><button class="ac-notify">üîî Notify me when live</button></div></div>
        <div class="audio-card"><div class="ac-art ac-art-2"><span class="ac-vinyl-icon">üìñ</span><span class="ac-coming">Coming Soon</span></div><div class="ac-body"><div class="ac-name">Izinganekwane</div><div class="ac-desc">Folktales told in oral tradition ‚Äî Dr Sasa's voice.</div><button class="ac-notify">üîî Notify me when live</button></div></div>
        <div class="audio-card"><div class="ac-art ac-art-3"><span class="ac-vinyl-icon">üåô</span><span class="ac-coming">Coming Soon</span></div><div class="ac-body"><div class="ac-name">Lullabies</div><div class="ac-desc">Izihlabelelo ‚Äî gentle songs carrying children to sleep.</div><button class="ac-notify">üîî Notify me when live</button></div></div>
        <div class="audio-card"><div class="ac-art ac-art-4"><span class="ac-vinyl-icon">‚öíÔ∏è</span><span class="ac-coming">Coming Soon</span></div><div class="ac-body"><div class="ac-name">Work Songs</div><div class="ac-desc">Songs that turned labour into music and community.</div><button class="ac-notify">üîî Notify me when live</button></div></div>
        <div class="audio-card"><div class="ac-art ac-art-5"><span class="ac-vinyl-icon">üåø</span><span class="ac-coming">Coming Soon</span></div><div class="ac-body"><div class="ac-name">Ceremonial Songs</div><div class="ac-desc">Sacred songs for weddings, funerals and initiations.</div><button class="ac-notify">üîî Notify me when live</button></div></div>
        <div class="audio-card"><div class="ac-art ac-art-6"><span class="ac-vinyl-icon">üéì</span><span class="ac-coming">Coming Soon</span></div><div class="ac-body"><div class="ac-name">Dr Sasa Lectures</div><div class="ac-desc">Audio versions of Dr Sasa's cultural talks and storytelling lectures.</div><button class="ac-notify">üîî Notify me when live</button></div></div>
      </div>
    </div></div>
  </div>
</div>

<script>
// ‚ïê‚ïê‚ïê‚ïê INTRO ‚ïê‚ïê‚ïê‚ïê
var introCanvas=document.getElementById('intro-canvas');
var ictx=introCanvas.getContext('2d');
var introT=0,introAnimId,introStarted=false;
var introAnimals=[{x:-.05,s:'ü¶í',speed:.0010},{x:.1,s:'ü¶è',speed:.0007}];

function resizeIC(){introCanvas.width=window.innerWidth;introCanvas.height=window.innerHeight}
resizeIC();
window.addEventListener('resize',resizeIC);

function drawSavannahFrame(t){
  var W=introCanvas.width,H=introCanvas.height;
  var p=Math.min(t/2.8,1),sp=Math.min(t/3.8,1);
  var sky=ictx.createLinearGradient(0,0,0,H);
  var r=Math.round(10+p*245),g=Math.round(12+p*100),b=Math.round(30-p*24);
  sky.addColorStop(0,'rgb('+Math.max(0,r-70)+','+Math.max(0,g-40)+','+Math.max(0,b)+')');
  sky.addColorStop(.38,'rgb('+r+','+g+','+b+')');
  sky.addColorStop(.7,'rgb('+Math.min(255,r+55)+','+Math.min(255,g+90)+','+Math.max(0,b-20)+')');
  sky.addColorStop(1,'rgb(20,7,0)');
  ictx.fillStyle=sky;ictx.fillRect(0,0,W,H);
  if(p<.65){
    ictx.fillStyle='rgba(255,255,255,'+((.65-p)/.65*.45)+')';
    for(var i=0;i<140;i++){var sx=(Math.sin(i*137.5)*.5+.5)*W,sy=(Math.sin(i*97.3)*.5+.5)*H*.48;ictx.fillRect(sx,sy,i%7===0?2:1,i%7===0?2:1)}
  }
  var gy=H*.76,sunY=gy-(sp*H*.46),sunR=Math.max(0,42+sp*22);
  if(sp>.05){
    var sg=ictx.createRadialGradient(W/2,sunY,0,W/2,sunY,sunR*3.2);
    sg.addColorStop(0,'rgba(255,248,120,.88)');sg.addColorStop(.28,'rgba(255,160,30,.55)');sg.addColorStop(1,'rgba(255,70,0,0)');
    ictx.fillStyle=sg;ictx.beginPath();ictx.arc(W/2,sunY,sunR*3.2,0,Math.PI*2);ictx.fill();
    ictx.fillStyle='rgba(255,220,60,.95)';ictx.beginPath();ictx.arc(W/2,sunY,sunR,0,Math.PI*2);ictx.fill();
  }
  var grd=ictx.createLinearGradient(0,gy,0,H);
  grd.addColorStop(0,'rgba(55,22,2,'+(0.4+p*0.55)+')');grd.addColorStop(1,'rgba(15,5,0,'+(0.5+p*0.5)+')');
  ictx.fillStyle=grd;ictx.fillRect(0,gy,W,H-gy);
  var trees=[{x:.1,h:105,w:78},{x:.25,h:78,w:58},{x:.6,h:98,w:72},{x:.77,h:68,w:52},{x:.91,h:86,w:62}];
  var op=Math.min(1,Math.max(0,(p-.08)/.55));
  trees.forEach(function(a){
    var ax=a.x*W;ictx.fillStyle='rgba(10,3,0,'+op+')';
    ictx.fillRect(ax-3.5,gy-a.h,7,a.h);
    ictx.beginPath();ictx.ellipse(ax,gy-a.h,a.w/2,a.h*.2,0,0,Math.PI*2);ictx.fill();
    ictx.beginPath();ictx.ellipse(ax-a.w*.24,gy-a.h+10,a.w*.3,a.h*.13,0,0,Math.PI*2);ictx.fill();
    ictx.beginPath();ictx.ellipse(ax+a.w*.24,gy-a.h+8,a.w*.27,a.h*.12,0,0,Math.PI*2);ictx.fill();
  });
  introAnimals.forEach(function(a){
    a.x+=a.speed;if(a.x>1.12)a.x=-.1;
    ictx.font=(H*.052)+'px serif';ictx.fillText(a.s,a.x*W,gy+8);
  });
}

function introLoop(ts){
  if(!introLoop.start)introLoop.start=ts;
  introT=(ts-introLoop.start)/1000;
  ictx.clearRect(0,0,introCanvas.width,introCanvas.height);
  drawSavannahFrame(introT);
  if(introT>1.8)document.getElementById('intro-logo').classList.add('show');
  if(introT>5.2){endIntro();return}
  introAnimId=requestAnimationFrame(introLoop);
}

function endIntro(){
  cancelAnimationFrame(introAnimId);
  document.getElementById('intro').classList.add('hide');
  document.getElementById('site').classList.add('show');
  setTimeout(function(){document.getElementById('intro').style.display='none'},1500);
  initAll();
}

document.getElementById('skip-btn').onclick=function(){endIntro()};
requestAnimationFrame(introLoop);

// ‚ïê‚ïê‚ïê‚ïê WORLDS ‚ïê‚ïê‚ïê‚ïê
function showWorld(id){
  document.querySelectorAll('.world').forEach(function(w){w.classList.remove('active')});
  document.querySelectorAll('.npill').forEach(function(p){p.classList.remove('active')});
  var w=document.getElementById(id+'-world');if(w)w.classList.add('active');
  var map={home:0,games:1,instruments:2,brain:3,tree:4,schools:5,audio:6};
  var pills=document.querySelectorAll('.npill');
  if(pills[map[id]])pills[map[id]].classList.add('active');
  window.scrollTo({top:0,behavior:'smooth'});
  if(id==='tree')initTree();
  if(id==='brain'){initStreakDots();setPuzzleType('proverb')}
  if(id==='schools'){setSubject('maths')}
}

function initAll(){
  initFireflies();
  initStreakDots();
  setSubject('maths');
  setPuzzleType('proverb');
}

// ‚ïê‚ïê‚ïê‚ïê FIREFLIES ‚ïê‚ïê‚ïê‚ïê
function initFireflies(){
  var c=document.getElementById('heroR');
  for(var i=0;i<16;i++){
    var f=document.createElement('div');f.className='firefly';
    var tx=(Math.random()-.5)*180,ty=(Math.random()-.5)*180;
    f.style.cssText='left:'+(10+Math.random()*80)+'%;top:'+(10+Math.random()*80)+'%;--tx:'+tx+'px;--ty:'+ty+'px;animation:ff '+(6+Math.random()*8)+'s '+(Math.random()*6)+'s linear infinite;width:'+(2+Math.random()*2)+'px;height:'+(2+Math.random()*2)+'px;border-radius:50%;position:absolute;background:#FFD700';
    c.appendChild(f);
  }
}

// ‚ïê‚ïê‚ïê‚ïê MANCALA ‚ïê‚ïê‚ïê‚ïê
var board,mTurn,mMoves;
function initMancala(){
  board={pits:[[4,4,4,4,4,4],[4,4,4,4,4,4]],stores:[0,0]};mTurn=0;mMoves=0;
  setMMsg('Your turn ‚Äî click a pit to sow seeds');renderMancala();
  document.getElementById('m-moves').textContent='0';
  document.getElementById('p1-store').textContent='0';
  document.getElementById('p2-store').textContent='0';
}
function renderMancala(){
  var pp=document.getElementById('player-pits'),ap=document.getElementById('ai-pits');
  pp.innerHTML='';ap.innerHTML='';
  document.getElementById('store-p1').textContent=board.stores[0];
  document.getElementById('store-p2').textContent=board.stores[1];
  document.getElementById('p1-store').textContent=board.stores[0];
  document.getElementById('p2-store').textContent=board.stores[1];
  board.pits[0].forEach(function(seeds,i){
    var pit=document.createElement('div');pit.className='mancala-pit';
    if(mTurn!==0||seeds===0)pit.classList.add('disabled');
    var sd=document.createElement('div');sd.className='mancala-seeds';
    for(var s=0;s<Math.min(seeds,9);s++){var se=document.createElement('div');se.className='seed p1';sd.appendChild(se)}
    if(seeds>9){pit.textContent=seeds}else{pit.appendChild(sd)}
    if(seeds>0&&mTurn===0){(function(idx){pit.onclick=function(){sowSeeds(0,idx)}})(i)}
    pp.appendChild(pit);
  });
  var rev=[...board.pits[1]].reverse();
  rev.forEach(function(seeds){
    var pit=document.createElement('div');pit.className='mancala-pit disabled';
    var sd=document.createElement('div');sd.className='mancala-seeds';
    for(var s=0;s<Math.min(seeds,9);s++){var se=document.createElement('div');se.className='seed p2';sd.appendChild(se)}
    if(seeds>9){pit.textContent=seeds}else{pit.appendChild(sd)}
    ap.appendChild(pit);
  });
}
function sowSeeds(row,pit){
  if(mTurn!==0||board.pits[row][pit]===0)return;
  var seeds=board.pits[row][pit];board.pits[row][pit]=0;
  var curRow=row,curPit=pit,extra=false;
  while(seeds>0){
    curPit++;
    if(curRow===0&&curPit===6){board.stores[0]++;seeds--;if(seeds===0){extra=true;break}curPit=-1;curRow=1;continue}
    if(curRow===1&&curPit===6){curPit=-1;curRow=0;continue}
    board.pits[curRow][curPit]++;seeds--;
    if(seeds===0&&curRow===0&&board.pits[0][curPit]===1&&board.pits[1][5-curPit]>0){board.stores[0]+=1+board.pits[1][5-curPit];board.pits[0][curPit]=0;board.pits[1][5-curPit]=0}
  }
  mMoves++;document.getElementById('m-moves').textContent=mMoves;
  if(checkMEnd())return;
  if(extra){setMMsg('Extra turn! You landed in your store üéâ');renderMancala()}
  else{mTurn=1;setMMsg('AI is thinking...');renderMancala();setTimeout(aiMove,850)}
}
function aiMove(){
  var valid=board.pits[1].map(function(s,i){return{s:s,i:i}}).filter(function(p){return p.s>0});
  if(!valid.length){mTurn=0;renderMancala();return}
  var best=null;valid.forEach(function(p){if(p.s===6-p.i)best=p});
  if(!best)best=valid[Math.floor(Math.random()*valid.length)];
  var seeds=board.pits[1][best.i];board.pits[1][best.i]=0;
  var curRow=1,curPit=best.i,extra=false;
  while(seeds>0){
    curPit++;
    if(curRow===1&&curPit===6){board.stores[1]++;seeds--;if(seeds===0){extra=true;break}curPit=-1;curRow=0;continue}
    if(curRow===0&&curPit===6){curPit=-1;curRow=1;continue}
    board.pits[curRow][curPit]++;seeds--;
  }
  if(checkMEnd())return;
  if(extra){setTimeout(aiMove,700)}else{mTurn=0;setMMsg('Your turn ‚Äî click a pit')}
  renderMancala();
}
function checkMEnd(){
  if(board.pits[0].every(function(s){return s===0})||board.pits[1].every(function(s){return s===0})){
    board.pits.forEach(function(row,ri){row.forEach(function(s){board.stores[ri]+=s});board.pits[ri]=[0,0,0,0,0,0]});
    var w=board.stores[0]>board.stores[1]?'You win! üéâ':board.stores[0]<board.stores[1]?'AI wins ‚Äî try again!':'Draw!';
    setMMsg(w);mTurn=-1;renderMancala();return true;
  }return false;
}
function setMMsg(m){var el=document.getElementById('m-msg');if(el)el.textContent=m}

// ‚ïê‚ïê‚ïê‚ïê DIKETO ‚ïê‚ïê‚ïê‚ïê
var dSeq=[],dPlayer=[],dState='idle',dScore=0,dBest=0,dLevel=1;
var dEmojis=['ü™®','üü†','üîµ','üü¢','üü°'];
function startDiketo(){dSeq=[];dPlayer=[];dState='showing';dScore=0;dLevel=1;document.getElementById('d-score').textContent=0;document.getElementById('d-level').textContent=1;buildDiketoRound()}
function buildDiketoRound(){
  var len=2+dLevel;while(dSeq.length<len)dSeq.push(Math.floor(Math.random()*5));
  var el=document.getElementById('diketo-seq');el.innerHTML='';
  dSeq.forEach(function(v){var d=document.createElement('div');d.className='dseq-item';d.textContent=dEmojis[v];el.appendChild(d)});
  document.getElementById('d-msg').textContent='Watch carefully...';
  var idx=0,items=el.querySelectorAll('.dseq-item');
  function flash(){
    if(idx>0)items[idx-1].classList.remove('active');
    if(idx>=items.length){setTimeout(function(){dState='player';dPlayer=[];document.getElementById('d-msg').textContent='Tap in order!'},350);return}
    items[idx].classList.add('active');idx++;setTimeout(flash,Math.max(300,620-dLevel*20));
  }
  setTimeout(flash,500);
}
function diketoTap(){
  if(dState!=='player')return;
  var items=document.getElementById('diketo-seq').querySelectorAll('.dseq-item');
  var pos=dPlayer.length;
  items[pos].classList.add('correct');
  dPlayer.push(dSeq[pos]);
  if(dPlayer.length===dSeq.length){
    dScore+=dLevel*10;dBest=Math.max(dScore,dBest);dLevel++;
    document.getElementById('d-score').textContent=dScore;document.getElementById('d-best').textContent=dBest;document.getElementById('d-level').textContent=dLevel;
    dState='showing';dPlayer=[];
    setTimeout(function(){document.getElementById('d-msg').textContent='Well done! Next round...';buildDiketoRound()},700);
  }
}

// ‚ïê‚ïê‚ïê‚ïê KGATI ‚ïê‚ïê‚ïê‚ïê
var kMoves=['Jump','Skip','Step','Hop','Pause'],kAns=[],kSel=[],kLevel=1,kScore=0,kLives=3;
function startKgati(){kLives=3;kScore=0;kLevel=1;document.getElementById('k-lives').textContent=3;document.getElementById('k-score').textContent=0;buildKgati()}
function buildKgati(){
  document.getElementById('k-level').textContent=kLevel;
  var len=2+Math.min(kLevel,5);kAns=[];kSel=[];
  for(var i=0;i<len;i++)kAns.push(Math.floor(Math.random()*kMoves.length));
  var pat=document.getElementById('kgati-pattern');pat.innerHTML='';
  kMoves.forEach(function(o){
    var b=document.createElement('div');b.className='kp-item';b.textContent=o;
    b.onclick=function(){kgatiSel(o,b)};pat.appendChild(b);
  });
  document.getElementById('k-msg').textContent='Memorise: '+kAns.map(function(a){return kMoves[a]}).join(' ‚Üí ');
  setTimeout(function(){document.getElementById('k-msg').textContent='Now select the sequence!'},Math.max(1500,2000+kLevel*200));
}
function kgatiSel(move,el){
  el.classList.add('sel');kSel.push(move);
  if(kSel.length===kAns.length){
    var ok=kSel.every(function(m,i){return m===kMoves[kAns[i]]});
    if(ok){
      var j=document.getElementById('kgati-jumper');j.classList.add('jump');setTimeout(function(){j.classList.remove('jump')},280);
      kScore+=kLevel*15;kLevel++;document.getElementById('k-score').textContent=kScore;document.getElementById('k-level').textContent=kLevel;
      document.getElementById('k-msg').textContent='‚úì Perfect! Next level!';setTimeout(buildKgati,900);
    }else{
      kLives--;document.getElementById('k-lives').textContent=kLives;
      document.getElementById('k-msg').textContent=kLives>0?'‚úó Wrong ‚Äî try again!':'Game over!';
      if(kLives>0)setTimeout(buildKgati,1100);
    }
  }
}

// ‚ïê‚ïê‚ïê‚ïê NCUVA ‚ïê‚ïê‚ïê‚ïê
var nPat=[],nPicks=[],nLevel=1,nScore=0,nBest=0,nState='idle';
var nEmojis=['üî¥','üü°','üîµ','üü¢','üü†','‚ö™'];
function initNcuvaGrid(){
  var g=document.getElementById('ncuva-grid');g.innerHTML='';
  for(var i=0;i<16;i++){
    var c=document.createElement('div');c.className='ncuva-cell';c.setAttribute('data-idx',i);
    c.textContent=nEmojis[Math.floor(Math.random()*4)];
    (function(idx,cell){cell.onclick=function(){ncuvaPick(idx,cell)}})(i,c);
    g.appendChild(c);
  }
}
function startNcuva(){nLevel=1;nScore=0;nState='showing';initNcuvaGrid();showNcuvaPat()}
function showNcuvaPat(){
  var len=2+nLevel;nPat=[];nPicks=[];
  var cells=document.querySelectorAll('.ncuva-cell');
  while(nPat.length<len){var idx=Math.floor(Math.random()*16);if(!nPat.includes(idx))nPat.push(idx)}
  document.getElementById('n-msg').textContent='Memorise!';
  nPat.forEach(function(idx,i){
    setTimeout(function(){cells[idx].classList.add('lit');setTimeout(function(){cells[idx].classList.remove('lit')},460)},i*580);
  });
  setTimeout(function(){nState='player';document.getElementById('n-msg').textContent='Tap the same cells!'},nPat.length*580+380);
}
function ncuvaPick(idx,el){
  if(nState!=='player')return;
  nPicks.push(idx);
  var expected=nPat[nPicks.length-1];
  if(idx===expected){
    el.classList.add('correct');
    if(nPicks.length===nPat.length){
      nScore+=nLevel*12;nLevel++;nBest=Math.max(nScore,nBest);
      document.getElementById('n-score').textContent=nScore;document.getElementById('n-best').textContent=nBest;document.getElementById('n-level').textContent=nLevel;
      document.getElementById('n-msg').textContent='‚úì Perfect memory!';nState='idle';
      setTimeout(function(){initNcuvaGrid();showNcuvaPat()},900);
    }
  }else{el.classList.add('wrong');document.getElementById('n-msg').textContent='‚úó Wrong! Try again.';nState='idle';setTimeout(startNcuva,1100)}
}

function openGame(g){var ov=document.getElementById(g+'-overlay');if(!ov)return;ov.classList.add('open');if(g==='mancala')initMancala();if(g==='ncuva')initNcuvaGrid()}
function closeGame(g){document.getElementById(g+'-overlay').classList.remove('open')}

// ‚ïê‚ïê‚ïê‚ïê AUDIO ENGINE ‚ïê‚ïê‚ïê‚ïê
var AudioCtx=window.AudioContext||window.webkitAudioContext;
var aCtx=null;
function getAC(){if(!aCtx)aCtx=new AudioCtx();if(aCtx.state==='suspended')aCtx.resume();return aCtx}
var isRec=false,recData=[],loopOn=false;
function playDrum(el,zone){
  el.classList.add('hit');setTimeout(function(){el.classList.remove('hit')},110);
  var ac=getAC(),o=ac.createOscillator(),g=ac.createGain();
  var fmap={bass:55,tone:110,slap:220,open:80,mute:70};
  var tmap={bass:'sine',tone:'triangle',slap:'sawtooth',open:'sine',mute:'square'};
  o.frequency.setValueAtTime(fmap[zone]||100,ac.currentTime);
  o.type=tmap[zone]||'sine';
  g.gain.setValueAtTime(.7,ac.currentTime);g.gain.exponentialRampToValueAtTime(.001,ac.currentTime+.28);
  o.connect(g);g.connect(ac.destination);o.start();o.stop(ac.currentTime+.28);
  if(isRec){recData.push({t:Date.now(),z:zone});addWaveBar()}
}
function playMbira(el,freq){
  el.classList.add('hit');setTimeout(function(){el.classList.remove('hit')},190);
  var ac=getAC(),o=ac.createOscillator(),g=ac.createGain();
  o.type='triangle';o.frequency.setValueAtTime(freq,ac.currentTime);
  g.gain.setValueAtTime(.48,ac.currentTime);g.gain.exponentialRampToValueAtTime(.001,ac.currentTime+1.1);
  o.connect(g);g.connect(ac.destination);o.start();o.stop(ac.currentTime+1.1);
  if(isRec){recData.push({t:Date.now(),f:freq});addWaveBar()}
}
function playHosho(el){
  if(el){el.classList.add('shake');setTimeout(function(){el.classList.remove('shake')},140)}
  var ac=getAC();var buf=ac.createBuffer(1,Math.floor(ac.sampleRate*.14),ac.sampleRate);
  var d=buf.getChannelData(0);for(var i=0;i<d.length;i++)d[i]=(Math.random()*2-1)*Math.exp(-i/2800);
  var src=ac.createBufferSource(),g=ac.createGain();src.buffer=buf;g.gain.setValueAtTime(.55,ac.currentTime);
  src.connect(g);g.connect(ac.destination);src.start();
  if(isRec){recData.push({t:Date.now(),z:'hosho'});addWaveBar()}
}
function playUhadi(el,freq){
  el.classList.add('pluck');setTimeout(function(){el.classList.remove('pluck')},280);
  var ac=getAC(),o=ac.createOscillator(),g=ac.createGain();
  o.type='sawtooth';o.frequency.setValueAtTime(freq,ac.currentTime);
  g.gain.setValueAtTime(.38,ac.currentTime);g.gain.exponentialRampToValueAtTime(.001,ac.currentTime+2.3);
  o.connect(g);g.connect(ac.destination);o.start();o.stop(ac.currentTime+2.3);
  if(isRec){recData.push({t:Date.now(),f:freq});addWaveBar()}
}
function addWaveBar(){
  var wave=document.getElementById('rec-wave');var b=document.createElement('div');
  b.className='rec-bar';b.style.height=(18+Math.random()*18)+'px';wave.appendChild(b);
  if(wave.children.length>58)wave.removeChild(wave.firstChild);
}
function toggleRecord(){
  isRec=!isRec;var btn=document.getElementById('rec-btn');
  btn.classList.toggle('recording',isRec);
  document.getElementById('rec-status').textContent=isRec?'‚óè RECORDING':'READY';
  if(isRec){recData=[];document.getElementById('rec-wave').innerHTML=''}
}
function playback(){document.getElementById('play-ctrl').classList.add('active');setTimeout(function(){document.getElementById('play-ctrl').classList.remove('active')},550)}
function toggleLoop(){loopOn=!loopOn;document.getElementById('loop-ctrl').classList.toggle('active',loopOn)}
function clearRec(){recData=[];document.getElementById('rec-wave').innerHTML='';document.getElementById('posted-notif').style.display='none'}
function postToWall(){var n=document.getElementById('posted-notif');n.style.display='block';setTimeout(function(){n.style.display='none'},2800)}

function selectInst(inst,btn){
  document.querySelectorAll('.inst-btn').forEach(function(b){b.classList.remove('active')});
  if(btn)btn.classList.add('active');
  var area=document.getElementById('inst-play-area');
  var mFreqs=[130,146,165,175,196,220,247,262,294,330,350,392];
  var mNames=['C3','D3','E3','F3','G3','A3','B3','C4','D4','E4','F4','G4'];
  var uFreqs=[82,110,146],uNames=['Low','Mid','High'];
  var uColors=['#E6B32A','#CA5C08','#2E8FCC'];
  if(inst==='djembe'){
    area.innerHTML='<div class="inst-play-title">ü•Å Djembe</div><p class="inst-play-sub">8 zones ‚Äî bass, tone, slap. The heartbeat of West Africa.</p><div class="djembe-pads"><div class="drum-pad dp1" onclick="playDrum(this,\'bass\')">Bass L</div><div class="drum-pad dp2" onclick="playDrum(this,\'tone\')">Tone L</div><div class="drum-pad dp3" onclick="playDrum(this,\'slap\')">Slap L</div><div class="drum-pad dp4" onclick="playDrum(this,\'open\')">Open</div><div class="drum-pad dp5" onclick="playDrum(this,\'slap\')">Slap R</div><div class="drum-pad dp6" onclick="playDrum(this,\'tone\')">Tone R</div><div class="drum-pad dp7" onclick="playDrum(this,\'bass\')">Bass R</div><div class="drum-pad dp8" onclick="playDrum(this,\'mute\')">Mute</div></div>';
  } else if(inst==='mbira'){
    var keys='';mFreqs.forEach(function(f,i){var h=100+i*5;var bg=i%2===0?'linear-gradient(180deg,#8B6914,#5A4008)':'linear-gradient(180deg,#5A4008,#3A2800)';keys+='<div class="mbira-key" style="height:'+h+'px;background:'+bg+'" onclick="playMbira(this,'+f+')"><span class="mkey-label">'+mNames[i]+'</span></div>'});
    area.innerHTML='<div class="inst-play-title">üéπ Mbira</div><p class="inst-play-sub">The thumb piano of Zimbabwe. 12 keys ‚Äî each a voice speaking to the ancestors.</p><div class="mbira-keys">'+keys+'</div>';
  } else if(inst==='hosho'){
    area.innerHTML='<div class="inst-play-title">ü™ò Hosho</div><p class="inst-play-sub">The gourd shaker of Zimbabwe. Shake the rhythm that holds everything together.</p><div class="hosho-area"><div class="hosho-gourd" onclick="playHosho(this)">ü™ò</div><p style="color:rgba(255,255,255,.32);font-size:.76rem;text-align:center">Tap the gourd to shake it.</p></div>';
  } else if(inst==='uhadi'){
    var strs='';uFreqs.forEach(function(f,i){strs+='<div class="uhadi-string" onclick="playUhadi(this.querySelector(\'.uhadi-stick\'),'+f+')"><div class="uhadi-stick" style="background:linear-gradient(180deg,'+uColors[i]+',rgba(255,255,255,.08));height:'+(120+i*22)+'px"></div><div class="uhadi-label">'+uNames[i]+'</div></div>'});
    area.innerHTML='<div class="inst-play-title">üéª Uhadi</div><p class="inst-play-sub">The Xhosa musical bow. Three tones ‚Äî mournful, searching, hopeful.</p><div class="uhadi-strings">'+strs+'</div>';
  }
}

// ‚ïê‚ïê‚ïê‚ïê BRAIN TEASERS ‚ïê‚ïê‚ïê‚ïê
var streakDays=7,puzzleType='proverb',puzzleIdx=0;
function initStreakDots(){
  var d=document.getElementById('streak-dots');if(!d)return;d.innerHTML='';
  for(var i=0;i<7;i++){var s=document.createElement('div');s.className='sd'+(i<streakDays?' done':'')+(i===streakDays-1?' today':'');d.appendChild(s)}
}
function setPuzzleType(t){
  puzzleType=t;puzzleIdx=0;
  document.querySelectorAll('.ptab').forEach(function(p){p.classList.remove('active')});
  var types=['proverb','pattern','logic','maths','science','drum'];
  var tabs=document.querySelectorAll('.ptab');
  var idx=types.indexOf(t);if(tabs[idx])tabs[idx].classList.add('active');
  renderPuzzle();
}
var PZ={
  proverb:[
    {q:'Complete the Zulu proverb: <strong>"Umuntu ngumuntu nga___"</strong>',opts:['muntu','ntu','bantu','untu'],ans:'muntu',exp:'A person is a person through other people ‚Äî Ubuntu.'},
    {q:'Complete: <strong>"Izandla ziyahlambana"</strong> ‚Äî Hands wash each ___',opts:['other','themselves','alone','together'],ans:'other',exp:'We need each other ‚Äî cooperation.'},
    {q:'Fill in: <strong>"Isandla sihlamba esinye"</strong> ‚Äî One hand washes the ___',opts:['other','face','body','ground'],ans:'other',exp:'Reciprocity and mutual help.'},
    {q:'Complete: <strong>"Umuntu akaphili ______"</strong> ‚Äî A person does not live ___',opts:['alone','forever','in peace','in silence'],ans:'alone',exp:'No one thrives in isolation ‚Äî community is survival.'}
  ],
  pattern:[
    {q:'What comes next? <strong>üî∫ üî∑ üî∫ üî∑ üî∫ ___</strong>',opts:['üî∑','üî∫','üü°','‚¨õ'],ans:'üî∑',exp:'Alternating pattern: triangle, diamond repeating.'},
    {q:'Complete the sequence: <strong>2, 4, 8, 16, ___</strong>',opts:['24','32','30','28'],ans:'32',exp:'Multiply by 2 each time ‚Äî geometric sequence.'},
    {q:'What is next: <strong>1, 1, 2, 3, 5, 8, ___</strong>',opts:['11','12','13','14'],ans:'13',exp:'Fibonacci ‚Äî add the two numbers before it: 5+8=13.'},
    {q:'Next: <strong>A, C, E, G, ___</strong>',opts:['H','I','J','K'],ans:'I',exp:'Every second letter of the alphabet.'}
  ],
  logic:[
    {q:'Nandi has 3 calabashes. A boat holds only 2. Minimum trips to cross the river?',opts:['2','3','4','5'],ans:'3',exp:'Trip 1: carry 2. Return with 1. Trip 3: carry the remaining 2.'},
    {q:'A storyteller tells 2 people. Each tells 2 more. Each of those tells 2 more. After 3 rounds, how many NEW people have heard it?',opts:['6','14','8','12'],ans:'14',exp:'Round 1: 2, Round 2: 4, Round 3: 8. Total new: 2+4+8=14.'},
    {q:'All izinganekwane are stories. All stories teach lessons. Do all izinganekwane teach lessons?',opts:['Yes, always','No, never','Sometimes','Cannot tell'],ans:'Yes, always',exp:'Logical syllogism ‚Äî transitive property applies here.'}
  ],
  maths:[
    {q:'<div class="maths-scenario"><div class="ms-lbl">üìê Real World Maths</div><div class="ms-story">A baobab grows 2.3cm/year and is 14m tall. Approximately how old is it?</div></div>',opts:['600 years','609 years','570 years','650 years'],ans:'609 years',exp:'1400cm √∑ 2.3 ‚âà 608.7 ‚âà 609 years.'},
    {q:'<div class="maths-scenario"><div class="ms-lbl">üìä Statistics</div><div class="ms-story">In a village of 240 people, 3 out of every 8 attend the weekly storytelling circle. How many attend?</div></div>',opts:['80','90','100','75'],ans:'90',exp:'240 √ó (3/8) = 90 people.'},
    {q:'<div class="maths-scenario"><div class="ms-lbl">üí∞ Financial Maths</div><div class="ms-story">A course costs R3 500. A student saves R250/month. Price increases 8% per year. Can they afford it after 12 months?</div></div>',opts:['Yes, R3000 vs R3500','No, R3000 vs R3780','Yes, exactly enough','Need more info'],ans:'No, R3000 vs R3780',exp:'Saved: R250√ó12=R3000. New price: R3500√ó1.08=R3780. Short by R780.'},
    {q:'<div class="maths-scenario"><div class="ms-lbl">üìê Calculus</div><div class="ms-story">f(x) = 3x¬≥ - 2x + 5. What is f\'(x)?</div></div>',opts:["9x¬≤ - 2","9x¬≤ + 5","3x¬≤ - 2","9x - 2"],ans:"9x¬≤ - 2",exp:"Power rule: d/dx[3x¬≥] = 9x¬≤, d/dx[-2x] = -2, d/dx[5] = 0."}
  ],
  science:[
    {q:'<div class="maths-scenario"><div class="ms-lbl">‚ö° Physics ‚Äî Momentum</div><div class="ms-story">A 0.2kg drum stick moves at 8 m/s and stops in 0.05s. What is the impulse?</div></div>',opts:['1.6 N¬∑s','0.8 N¬∑s','3.2 N¬∑s','0.4 N¬∑s'],ans:'1.6 N¬∑s',exp:'Impulse = mŒîv = 0.2 √ó 8 = 1.6 N¬∑s'},
    {q:'<div class="maths-scenario"><div class="ms-lbl">üß™ Chemistry ‚Äî pH</div><div class="ms-story">A solution has [H‚Å∫] = 1√ó10‚Åª¬π¬≤ mol/L. Is it acid, base, or neutral?</div></div>',opts:['Acid (pH=12)','Base (pH=12)','Neutral (pH=7)','Cannot tell'],ans:'Base (pH=12)',exp:'pH = -log(10‚Åª¬π¬≤) = 12. Above 7 = basic/alkaline.'},
    {q:'A gene is autosomal. Both parents are Aa √ó Aa. What % of offspring are homozygous recessive (aa)?',opts:['25%','50%','75%','0%'],ans:'25%',exp:'Punnett square: AA(25%) Aa(50%) aa(25%).'},
    {q:'<div class="maths-scenario"><div class="ms-lbl">‚ö° Physics ‚Äî Work</div><div class="ms-story">A 15kg drum is carried 100m up a 30¬∞ incline. How much work against gravity? (g=9.8)</div></div>',opts:['14 700 J','7 350 J','29 400 J','3 675 J'],ans:'7 350 J',exp:'W = mgh = 15 √ó 9.8 √ó (100 √ó sin30¬∞) = 15 √ó 9.8 √ó 50 = 7350 J'}
  ],
  drum:[
    {pat:['ü•Å','¬∑','ü•Å','ü•Å','¬∑','ü•Å'],ans:4,q:'Count only the drum HITS (ü•Å), not the rests (¬∑):'},
    {pat:['ü•Å','ü•Å','¬∑','ü•Å','¬∑','¬∑','ü•Å'],ans:4,q:'How many drum hits in this sequence?'},
    {pat:['ü•Å','¬∑','¬∑','ü•Å','ü•Å','¬∑','ü•Å','¬∑','ü•Å'],ans:5,q:'Count the beats (ü•Å):'}
  ]
};

function renderPuzzle(){
  var stage=document.getElementById('puzzle-stage');
  if(puzzleType==='drum'){renderDrum();return}
  var arr=PZ[puzzleType];if(!arr){stage.innerHTML='<p style="color:var(--i60);font-style:italic;padding:2rem">More puzzles coming soon...</p>';return}
  var p=arr[puzzleIdx%arr.length];
  var html='<div class="puzzle-q">'+p.q+'</div><div class="puzzle-options" id="popts"></div><div class="puzzle-result" id="presult"></div><div class="puzzle-nav"><div class="puzzle-pts">+'+(puzzleType==='maths'||puzzleType==='science'?25:15)+' pts per correct</div><div style="display:flex;gap:.55rem"><button class="btn btn-out" onclick="puzzleNav(-1)">‚Üê Prev</button><button class="btn" onclick="puzzleNav(1)">Next ‚Üí</button></div></div>';
  stage.innerHTML=html;
  var opts=document.getElementById('popts');
  p.opts.forEach(function(o){
    var b=document.createElement('button');b.className='p-opt';b.textContent=o;
    b.onclick=function(){checkAns(o,p.ans,p.exp,b,opts)};
    opts.appendChild(b);
  });
}
function checkAns(chosen,correct,exp,el,opts){
  opts.querySelectorAll('.p-opt').forEach(function(b){b.classList.add('disabled');b.onclick=null});
  var res=document.getElementById('presult');
  if(chosen===correct){el.classList.add('correct');res.className='puzzle-result correct';res.innerHTML='<strong>‚úì Correct!</strong> '+exp}
  else{el.classList.add('wrong');res.className='puzzle-result wrong';res.innerHTML='<strong>‚úó Not quite.</strong> The answer is "'+correct+'". '+exp;opts.querySelectorAll('.p-opt').forEach(function(b){if(b.textContent===correct)b.classList.add('correct')})}
  res.style.display='block';
}
function puzzleNav(dir){puzzleIdx=Math.max(0,puzzleIdx+dir);renderPuzzle()}
function renderDrum(){
  var p=PZ.drum[puzzleIdx%PZ.drum.length];
  var beats=p.pat.map(function(b){return '<div class="drum-beat">'+b+'</div>'}).join('');
  var stage=document.getElementById('puzzle-stage');
  stage.innerHTML='<div class="puzzle-q">'+p.q+'</div><div class="drum-sequence">'+beats+'</div><div class="puzzle-options" id="popts"></div><div class="puzzle-result" id="presult"></div><div class="puzzle-nav"><div class="puzzle-pts">+20 pts</div><div style="display:flex;gap:.55rem"><button class="btn btn-out" onclick="puzzleNav(-1)">‚Üê Prev</button><button class="btn" onclick="puzzleNav(1)">Next ‚Üí</button></div></div>';
  var opts=document.getElementById('popts');
  var choices=[p.ans-1,p.ans,p.ans+1,p.ans+2].sort(function(){return Math.random()-.5});
  choices.forEach(function(n){
    var b=document.createElement('button');b.className='p-opt';b.textContent=n;
    b.onclick=function(){checkAns(String(n),String(p.ans),'Count only the ü•Å symbols.',b,opts)};
    opts.appendChild(b);
  });
  var dbeats=stage.querySelectorAll('.drum-beat');var bi=0;
  var anim=setInterval(function(){if(bi>0)dbeats[bi-1].classList.remove('active');if(bi>=dbeats.length){clearInterval(anim);return}dbeats[bi].classList.add('active');bi++},380);
}

// ‚ïê‚ïê‚ïê‚ïê ANCESTOR TREE ‚ïê‚ïê‚ïê‚ïê
var treeCanvas,treeCtx,treeLeaves=[],treeFF=[],treeRunning=false;
var leafNames=['Thandi ¬∑ Durban','Sipho ¬∑ JHB','Nomvula ¬∑ CT','Lerato ¬∑ Pretoria','Ayanda ¬∑ PE','Bongani ¬∑ Soweto','Zanele ¬∑ Bloemfontein','Kagiso ¬∑ Kimberley','Mihlali ¬∑ EL'];
function initTree(){
  treeCanvas=document.getElementById('tree-canvas');if(!treeCanvas||treeRunning)return;
  treeCtx=treeCanvas.getContext('2d');treeRunning=true;
  treeCanvas.width=treeCanvas.offsetWidth;treeCanvas.height=treeCanvas.offsetHeight;
  var cx=treeCanvas.width/2,cy=treeCanvas.height*.55;
  treeLeaves=[];
  for(var i=0;i<247;i++){
    var a=Math.random()*Math.PI*2,d=45+Math.random()*115;
    treeLeaves.push({x:cx+Math.cos(a)*d,y:cy-75-Math.random()*d*.82,sz:3+Math.random()*4.5,glow:Math.random()>.82,name:leafNames[Math.floor(Math.random()*leafNames.length)],hue:80+Math.random()*70,al:.48+Math.random()*.5});
  }
  treeFF=[];
  for(var j=0;j<28;j++)treeFF.push({x:Math.random()*treeCanvas.width,y:Math.random()*treeCanvas.height,vx:(Math.random()-.5)*.7,vy:(Math.random()-.5)*.7,ph:Math.random()*Math.PI*2});
  treeCanvas.onmousemove=treeHover;
  treeAnimLoop();
}
function treeAnimLoop(){
  if(!treeCanvas)return;
  treeCanvas.width=treeCanvas.offsetWidth;treeCanvas.height=treeCanvas.offsetHeight;
  var W=treeCanvas.width,H=treeCanvas.height,cx=W/2,cy=H*.58;
  var tc=treeCtx;
  var skGrad=tc.createRadialGradient(cx,cy*.25,0,cx,cy*.25,W*.82);
  skGrad.addColorStop(0,'#020d1a');skGrad.addColorStop(.55,'#030f20');skGrad.addColorStop(1,'#010810');
  tc.fillStyle=skGrad;tc.fillRect(0,0,W,H);
  tc.fillStyle='rgba(255,255,255,0.55)';
  for(var i=0;i<180;i++){var sx=(Math.sin(i*137.5)*.5+.5)*W,sy=(Math.sin(i*97.3)*.5+.5)*H*.48;tc.fillRect(sx,sy,i%9===0?2:1,i%9===0?2:1)}
  var rg=tc.createRadialGradient(cx,cy,0,cx,cy,130);
  var t=Date.now()/1000;
  rg.addColorStop(0,'rgba(0,90,30,'+(0.12+Math.sin(t*.7)*.04)+')');rg.addColorStop(1,'transparent');
  tc.fillStyle=rg;tc.beginPath();tc.ellipse(cx,cy,130,44,0,0,Math.PI*2);tc.fill();
  drawTreeBranch(tc,cx,cy,W*.013,88,-Math.PI/2,6);
  var now=Date.now()/1000;
  treeLeaves.forEach(function(l){
    var pulse=l.glow?(Math.sin(now*1.8+l.hue)*.5+.5):0;
    tc.shadowBlur=l.glow?12+pulse*8:0;tc.shadowColor='hsl('+l.hue+',80%,60%)';
    tc.globalAlpha=l.al;
    tc.fillStyle='hsl('+l.hue+','+(55+pulse*22)+'%,'+(28+pulse*22)+'%)';
    tc.beginPath();tc.arc(l.x,l.y,l.sz*(1+pulse*.28),0,Math.PI*2);tc.fill();
    tc.globalAlpha=1;tc.shadowBlur=0;
  });
  treeFF.forEach(function(f){
    f.x+=f.vx;f.y+=f.vy;f.ph+=.038;
    if(f.x<0||f.x>W)f.vx*=-1;if(f.y<0||f.y>H)f.vy*=-1;
    tc.globalAlpha=Math.sin(f.ph)*.45+.28;tc.fillStyle='#FFD700';tc.shadowBlur=7;tc.shadowColor='#FFD700';
    tc.beginPath();tc.arc(f.x,f.y,1.4,0,Math.PI*2);tc.fill();
    tc.globalAlpha=1;tc.shadowBlur=0;
  });
  requestAnimationFrame(treeAnimLoop);
}
function drawTreeBranch(ctx,x,y,w,len,angle,depth){
  if(depth===0||w<.8)return;
  var nx=x+Math.cos(angle)*len,ny=y+Math.sin(angle)*len;
  ctx.strokeStyle='rgba('+(105-depth*8)+','+(62+depth*4)+',18,'+(0.68+depth*.04)+')';
  ctx.lineWidth=w;ctx.shadowBlur=depth===6?6:0;ctx.shadowColor='rgba(100,181,232,.18)';
  ctx.beginPath();ctx.moveTo(x,y);ctx.lineTo(nx,ny);ctx.stroke();ctx.shadowBlur=0;
  var sp=.34+Math.random()*.09,lr=.67+Math.random()*.08;
  drawTreeBranch(ctx,nx,ny,w*.64,len*lr,angle-sp,depth-1);
  drawTreeBranch(ctx,nx,ny,w*.64,len*lr,angle+sp,depth-1);
  if(depth===2&&Math.random()>.42)drawTreeBranch(ctx,nx,ny,w*.38,len*.48,angle+(Math.random()-.5)*.75,depth-2);
}
function treeHover(e){
  var rect=treeCanvas.getBoundingClientRect(),mx=e.clientX-rect.left,my=e.clientY-rect.top;
  var pop=document.getElementById('leaf-popup'),near=null;
  treeLeaves.forEach(function(l){if(!near&&Math.hypot(l.x-mx,l.y-my)<l.sz*2.8)near=l});
  if(near){pop.style.display='block';pop.style.left=(mx+12)+'px';pop.style.top=(my-44)+'px';pop.innerHTML='<strong>'+near.name+'</strong>Contributed to Kwa Sukela'}
  else pop.style.display='none';
}
function growLeaf(){
  var name=prompt('Enter your name to add your leaf to the Ancestor Tree:');if(!name)return;
  var tc=treeCanvas,cx=tc.width/2,cy=tc.height*.55;
  var a=Math.random()*Math.PI*2,d=50+Math.random()*110;
  treeLeaves.push({x:cx+Math.cos(a)*d,y:cy-75-Math.random()*d*.8,sz:5,glow:true,name:name+' ¬∑ Just now',hue:90+Math.random()*60,al:1});
  document.getElementById('leaf-count').textContent=treeLeaves.length;
}

// ‚ïê‚ïê‚ïê‚ïê SCHOOLS ‚ïê‚ïê‚ïê‚ïê
var curGrade=12,curSubject='maths';
function setGrade(g){
  curGrade=g;
  document.querySelectorAll('.grade-pill').forEach(function(p){p.classList.remove('active')});
  var pills=document.querySelectorAll('.grade-pill');
  var map={12:0,11:1,10:2};if(pills[map[g]])pills[map[g]].classList.add('active');
  setSubject(curSubject);
}
function setSubject(s){
  curSubject=s;
  document.querySelectorAll('.sub-tab').forEach(function(t){t.classList.remove('active')});
  var tabs=document.querySelectorAll('.sub-tab');
  var map={maths:0,science:1,english:2,zulu:3,lifesci:4};
  if(tabs[map[s]])tabs[map[s]].classList.add('active');
  renderTopics(s);
}
var TOPICS={
  maths:[
    {ic:'‚àë',n:'Sequences & Series',s:'Arithmetic, geometric, sigma notation',b:'Paper 1',cl:'maths'},
    {ic:"f'",n:'Differential Calculus',s:'Limits, rules, optimisation, rates of change',b:'Paper 1 ‚Äî High Value',cl:'maths'},
    {ic:'f(x)',n:'Functions & Inverses',s:'Parabola, hyperbola, exponential, logarithm',b:'Paper 1',cl:'maths'},
    {ic:'%',n:'Finance & Growth',s:'Compound interest, annuities, depreciation',b:'Paper 1',cl:'maths'},
    {ic:'P()',n:'Probability',s:'Counting, Venn diagrams, tree diagrams',b:'Paper 1',cl:'maths'},
    {ic:'sin',n:'Trigonometry',s:'Compound angles, general solutions, 3D',b:'Paper 2',cl:'maths'},
    {ic:'‚äô',n:'Euclidean Geometry',s:'Circle theorems, proportionality theorem',b:'Paper 2 ‚Äî High Value',cl:'maths'},
    {ic:'xy',n:'Analytical Geometry',s:'Lines, circles, perpendicular distance',b:'Paper 2',cl:'maths'},
    {ic:'r',n:'Statistics & Regression',s:'Scatter plots, correlation, regression line',b:'Paper 2',cl:'maths'}
  ],
  science:[
    {ic:'p',n:'Momentum & Impulse',s:"Newton's laws, collisions, impulse-momentum",b:'Physics P1',cl:'science'},
    {ic:'‚Üë‚Üì',n:'Vertical Projectile Motion',s:'Free-fall, v-t graphs, air resistance',b:'Physics P1',cl:'science'},
    {ic:'W',n:'Work, Energy & Power',s:'Work-energy theorem, conservation',b:'Physics P1 ‚Äî Key',cl:'science'},
    {ic:'~',n:'Electrodynamics',s:'Generators, motors, AC vs DC, transformers',b:'Physics P1',cl:'science'},
    {ic:'üåä',n:'Doppler Effect',s:'Moving sources, frequency shift',b:'Physics P1',cl:'science'},
    {ic:'‚öó',n:'Organic Chemistry',s:'Alkanes, alkenes, alcohols, carboxylic acids',b:'Chemistry P2 ‚Äî Key',cl:'science'},
    {ic:'‚áå',n:'Chemical Equilibrium',s:"Le Chatelier's principle, Kc calculations",b:'Chemistry P2',cl:'science'},
    {ic:'pH',n:'Acids & Bases',s:'pH, titrations, buffer solutions',b:'Chemistry P2',cl:'science'},
    {ic:'e‚Åª',n:'Electrochemistry',s:'Galvanic & electrolytic cells, standard potentials',b:'Chemistry P2',cl:'science'}
  ],
  english:[
    {ic:'‚úç',n:'Essay Writing',s:'Argumentative, discursive, narrative, descriptive',b:'Paper 3 ‚Äî 100 marks',cl:''},
    {ic:'üìñ',n:'Comprehension',s:'Tone, inference, vocabulary, reading strategies',b:'Paper 1',cl:''},
    {ic:'üìö',n:'Literature ‚Äî Set Works',s:'Themes, characters, language devices analysis',b:'Paper 2',cl:''},
    {ic:'üó£',n:'Oral Presentation',s:'Structure, delivery, language use, confidence',b:'Continuous',cl:''},
    {ic:'‚úè',n:'Language & Editing',s:'Grammar, punctuation, sentence structure',b:'Paper 1',cl:''}
  ],
  zulu:[
    {ic:'üìú',n:'Izinganekwane (Folktales)',s:'Analysis, oral performance, structure',b:'Iphepha 2 ‚Äî Key',cl:''},
    {ic:'üéô',n:'Iziqongo (Poetry)',s:'Devices, themes, tone, performance',b:'Iphepha 2',cl:''},
    {ic:'‚úç',n:'Indaba & Inkondlo',s:'Narrative essay and poetry writing',b:'Iphepha 3',cl:''},
    {ic:'üìù',n:'Ulimi ‚Äî Grammar',s:'Izincwadi, izinkondlo, izimo zezindaba',b:'Iphepha 1',cl:''},
    {ic:'üëÇ',n:'Ukuphipha (Oral)',s:'Listening, speaking, reading aloud',b:'Continuous',cl:''}
  ],
  lifesci:[
    {ic:'üß¨',n:'DNA, RNA & Protein Synthesis',s:'Transcription, translation, mutations',b:'Paper 1 ‚Äî Key',cl:'science'},
    {ic:'üß´',n:'Genetics & Inheritance',s:"Mendel's laws, codominance, sex-linked traits",b:'Paper 1 ‚Äî Key',cl:'science'},
    {ic:'ü¶é',n:'Evolution',s:'Natural selection, speciation, evidence',b:'Paper 1',cl:'science'},
    {ic:'üíä',n:'Human Endocrine System',s:'Hormones, feedback loops, diabetes',b:'Paper 1',cl:'science'},
    {ic:'üåø',n:'Ecosystems & Biodiversity',s:'Food webs, nutrient cycles, conservation',b:'Paper 2',cl:'science'}
  ]
};
function renderTopics(s){
  var g=document.getElementById('topic-grid');if(!g)return;
  var arr=TOPICS[s]||[];
  g.innerHTML=arr.map(function(t){
    var col=s==='maths'?'var(--blue)':s==='science'?'#9B59B6':'var(--green)';
    return '<div class="topic-card '+t.cl+'" onclick="openNotes(\''+t.n+'\',\''+s+'\')"><div class="tc-icon" style="color:'+col+'">'+t.ic+'</div><div class="tc-name">'+t.n+'</div><div class="tc-sub">'+t.s+'</div><div class="tc-badge '+t.cl+'">'+t.b+'</div></div>';
  }).join('');
}

var NOTES={
  'Differential Calculus':{
    secs:[
      {t:'KEY CONCEPTS',cl:'maths',body:'<p><strong>Calculus</strong> deals with rates of change. The derivative f\'(x) tells you the <strong>gradient of the tangent</strong> at any point and the <strong>rate of change</strong> of f(x).</p><div class="formula-box"><div class="f-lbl">First Principles Definition</div><div class="f-eq">f\'(x) = lim[h‚Üí0] [f(x+h) - f(x)] / h</div></div><div class="formula-box"><div class="f-lbl">Power Rule (Use this every time)</div><div class="f-eq">If f(x) = ax‚Åø then f\'(x) = an¬∑x‚Åø‚Åª¬π<br>If f(x) = constant then f\'(x) = 0</div></div>'},
      {t:'APPLICATIONS',cl:'maths',body:'<p><strong>1.</strong> Gradient of tangent ‚Üí find f\'(x), substitute x-value<br><strong>2.</strong> Equation of tangent ‚Üí use y - y‚ÇÅ = m(x - x‚ÇÅ)<br><strong>3.</strong> Stationary points ‚Üí set f\'(x) = 0, solve for x</p><div class="formula-box"><div class="f-lbl">Nature of Stationary Points</div><div class="f-eq">f\'\'(x) &lt; 0 ‚Üí Local MAXIMUM<br>f\'\'(x) &gt; 0 ‚Üí Local MINIMUM<br>f\'\'(x) = 0 ‚Üí Point of inflection</div></div><p><strong>Optimisation:</strong> Write equation for what you maximise/minimise, differentiate, set = 0.</p>'},
      {t:'PRACTICE QUESTIONS',cl:'',body:'<div class="practice-q"><div class="pq-num">Q1</div><div class="pq-q">Find f\'(x) if f(x) = 3x‚Å¥ - 2x¬≥ + 5x - 7</div><button class="pq-toggle" onclick="toggleAns(this)">Show Answer</button><div class="pq-ans">f\'(x) = 12x¬≥ - 6x¬≤ + 5. Apply power rule to each term. Constants vanish.</div></div><div class="practice-q"><div class="pq-num">Q2</div><div class="pq-q">Find the equation of the tangent to f(x) = x¬≥ - 3x at x = 2</div><button class="pq-toggle" onclick="toggleAns(this)">Show Answer</button><div class="pq-ans">f(2) = 8-6 = 2. Point: (2,2). f\'(x) = 3x¬≤-3, f\'(2) = 9. Tangent: y - 2 = 9(x - 2) ‚Üí y = 9x - 16</div></div>'}
    ],
    tip:{tx:'Always show EVERY step. Even wrong answers earn method marks. Write f\'(x) = ... clearly before substituting. Examiners award marks for correct process, not just the final answer.'}
  },
  'Momentum & Impulse':{
    secs:[
      {t:'KEY CONCEPTS',cl:'science',body:'<p><strong>Momentum</strong> (p) = mass √ó velocity. It is a <strong>vector</strong> ‚Äî direction matters!</p><div class="formula-box"><div class="f-lbl">Core Formulas</div><div class="f-eq">p = mv (kg¬∑m/s)<br>Impulse = FŒît = Œîp = mŒîv<br>Œîp = p_final - p_initial</div></div><div class="formula-box"><div class="f-lbl">Conservation of Momentum</div><div class="f-eq">Œ£p_before = Œ£p_after<br>m‚ÇÅv‚ÇÅ·µ¢ + m‚ÇÇv‚ÇÇ·µ¢ = m‚ÇÅv‚ÇÅf + m‚ÇÇv‚ÇÇf<br>Perfectly inelastic: = (m‚ÇÅ+m‚ÇÇ)vf</div></div>'},
      {t:'COLLISION TYPES',cl:'science',body:'<p><strong>Elastic:</strong> KE AND momentum conserved.<br><strong>Inelastic:</strong> Momentum conserved, KE NOT fully conserved.<br><strong>Perfectly inelastic:</strong> Objects stick together after.</p><p>‚ö†Ô∏è <strong>Sign convention is critical.</strong> Define positive direction FIRST. Write it down. Stick to it.</p>'},
      {t:'PRACTICE QUESTIONS',cl:'',body:'<div class="practice-q"><div class="pq-num">Q1</div><div class="pq-q">A 1500kg car at 20m/s east collides with a 1000kg car at 15m/s west. They stick together. Find final velocity.</div><button class="pq-toggle" onclick="toggleAns(this)">Show Answer</button><div class="pq-ans">East = positive. p = 1500(20) + 1000(-15) = 30000 - 15000 = 15000. vf = 15000/2500 = 6 m/s east.</div></div><div class="practice-q"><div class="pq-num">Q2</div><div class="pq-q">A 0.3kg ball hits a wall at 12m/s and bounces at 10m/s. Contact time = 0.02s. Find the force.</div><button class="pq-toggle" onclick="toggleAns(this)">Show Answer</button><div class="pq-ans">Toward wall = positive. Œîp = 0.3(-10-12) = -6.6 N¬∑s. F = -6.6/0.02 = -330N. Wall exerts 330N on ball.</div></div>'}
    ],
    tip:{tx:'The #1 mistake is ignoring direction. Before writing any formula, DRAW the situation and define which direction is positive. Write "+ve = east" at the top of your working and never deviate. This simple habit saves 4-6 marks every exam.'}
  },
  'DNA, RNA & Protein Synthesis':{
    secs:[
      {t:'DNA STRUCTURE',cl:'science',body:'<p>DNA is a <strong>double helix</strong> made of nucleotides. Each has: sugar (deoxyribose) + phosphate + one nitrogenous base.</p><div class="formula-box"><div class="f-lbl">Base Pairing (DNA)</div><div class="f-eq">A ‚Üî T (2 hydrogen bonds)<br>G ‚Üî C (3 hydrogen bonds)<br>Memory: "AppleTart, Good Cookie"</div></div><p><strong>Chargaff\'s Rule:</strong> %A = %T and %G = %C in any DNA sample.</p>'},
      {t:'PROTEIN SYNTHESIS',cl:'science',body:'<p><strong>Stage 1 ‚Äî Transcription</strong> (nucleus): DNA ‚Üí mRNA<br>DNA unwinds. mRNA built using base pairing. U replaces T in RNA.</p><div class="formula-box"><div class="f-lbl">RNA Base Pairing</div><div class="f-eq">DNA A ‚Üí RNA U (Uracil, NOT Thymine)<br>DNA T ‚Üí RNA A<br>DNA G ‚Üí RNA C<br>DNA C ‚Üí RNA G</div></div><p><strong>Stage 2 ‚Äî Translation</strong> (ribosome): mRNA ‚Üí Protein<br>tRNA brings amino acids. Each codon (3 bases) matches an anticodon. Chain forms a polypeptide (protein).</p>'},
      {t:'PRACTICE QUESTIONS',cl:'',body:'<div class="practice-q"><div class="pq-num">Q1</div><div class="pq-q">DNA template strand: 3\'-ATCGGTACCA-5\'. Write the mRNA sequence (5\'‚Üí3\').</div><button class="pq-toggle" onclick="toggleAns(this)">Show Answer</button><div class="pq-ans">mRNA (5\'‚Üí3\'): UAGCCAUGGU. Remember: T‚ÜíA, A‚ÜíU, G‚ÜíC, C‚ÜíG. T in DNA becomes U in mRNA.</div></div><div class="practice-q"><div class="pq-num">Q2</div><div class="pq-q">A gene has 24% Adenine. What % is Guanine?</div><button class="pq-toggle" onclick="toggleAns(this)">Show Answer</button><div class="pq-ans">A=T=24%, so A+T=48%. G+C=52%. G=C=26%.</div></div>'}
    ],
    tip:{tx:'Students lose marks confusing template strand direction. Always check if the question gives you the template (3\'‚Üí5\') or coding (5\'‚Üí3\') strand. The mRNA is complementary and antiparallel to the TEMPLATE strand. Draw a quick diagram ‚Äî 10 seconds, saves marks.'}
  },
  'Essay Writing':{
    secs:[
      {t:'ESSAY TYPES',cl:'',body:'<p><strong>Argumentative:</strong> One clear stance, defend with evidence. Persuasive voice. No "on the other hand."<br><strong>Discursive:</strong> Balanced both sides. Analytical voice. Conclude with informed view.<br><strong>Narrative:</strong> Story with vivid detail, dialogue, rising action, climax, resolution.<br><strong>Descriptive:</strong> Create scene/mood. Five senses. Show, don\'t tell.</p><div class="formula-box"><div class="f-lbl">Universal Essay Structure</div><div class="f-eq">Intro: Hook + context + thesis (3-5 sentences)<br>Body 1: Topic sentence + evidence + explanation<br>Body 2: Topic sentence + evidence + explanation<br>Body 3: Topic sentence + evidence + explanation<br>Conclusion: Restate thesis + clincher statement</div></div>'},
      {t:'LANGUAGE MARKS',cl:'',body:'<p>Markers score <strong>content</strong> and <strong>language</strong> separately. Strong language with weak content still earns good language marks.</p><p><strong>Upgrade your vocabulary:</strong><br>good ‚Üí compelling, poignant, astute<br>said ‚Üí asserted, remarked, declared, whispered<br>big ‚Üí substantial, considerable, monumental</p><p><strong>Mix sentence lengths:</strong> Short sentences hit hard. Longer, more elaborate sentences provide depth, context and demonstrate sophistication to the examiner marking your work.</p>'},
      {t:'PRACTICE',cl:'',body:'<div class="practice-q"><div class="pq-num">Q1</div><div class="pq-q">Plan (point form): "Social media does more harm than good for SA youth." Argumentative essay.</div><button class="pq-toggle" onclick="toggleAns(this)">Show Answer</button><div class="pq-ans">Intro: Position ‚Äî agree. Hook: SA teen mental health stat.<br>P1: Mental health ‚Äî anxiety, comparison culture<br>P2: Misinformation spreads ‚Äî election/health dangers<br>P3: Academic distraction ‚Äî screen time, poor performance<br>Conc: Benefits cannot offset mental health crisis</div></div>'}
    ],
    tip:{tx:'Your first sentence is everything. I\'ve marked hundreds of essays ‚Äî the introduction tells me the final mark immediately. Spend 3 minutes on your opening line. Start with a surprising fact, a question, or a vivid image. Never start with "In this essay I will discuss..."'}
  },
  'Izinganekwane (Folktales)':{
    secs:[
      {t:'WHAT YOU MUST KNOW',cl:'',body:'<p><strong>Izinganekwane</strong> (folktales) serve to entertain, teach values, explain phenomena and transmit cultural wisdom.</p><p><strong>Key structural features:</strong><br>‚Ä¢ Opening formula: "Kwasukasukela..." ‚Äî signals story begins<br>‚Ä¢ Characters: animals with human traits (anthropomorphism), heroes, tricksters, izilwane (ogres)<br>‚Ä¢ Conflict: moral ‚Äî wisdom vs foolishness, courage vs cowardice<br>‚Ä¢ Resolution: always teaches isifundo (moral lesson)<br>‚Ä¢ Closing: call and response with audience</p>'},
      {t:'LITERARY DEVICES',cl:'',body:'<p><strong>Inhlonipho</strong> ‚Äî respectful language used to elders<br><strong>Izaga</strong> (proverbs) ‚Äî woven in to reinforce the lesson<br><strong>Izifengqo</strong> (similes & metaphors) ‚Äî comparing to animals, nature<br><strong>Repetition</strong> ‚Äî events repeat in 3s, building tension and rhythm<br><strong>Onomatopoeia</strong> ‚Äî sound words mimicking animals and nature</p><p>Always link device ‚Üí purpose ‚Üí effect. Not just identification.</p>'}
    ],
    tip:{tx:'Izinganekwane exam questions always ask you to analyse AND evaluate. Don\'t just retell the story. Analyse the LANGUAGE and its effect. Then evaluate whether the storytelling achieves its purpose. Connect the folktale to contemporary society ‚Äî it shows deep cultural understanding and earns top marks.'}
  }
};

function openNotes(topic,subject){
  var overlay=document.getElementById('notes-overlay'),data=NOTES[topic];
  document.getElementById('nm-title').textContent=topic;
  if(!data){
    document.getElementById('nm-body').innerHTML='<div style="padding:2rem;text-align:center"><p style="color:var(--i60);font-style:italic;font-family:Cormorant Garamond,serif;font-size:1.1rem">Full notes for <strong>'+topic+'</strong> are being prepared by Dr Sasa\'s team. Check back soon!</p><div class="tip-box" style="margin:1.5rem 0"><div class="tip-icon">üë©‚Äçüè´</div><div><div class="tip-lbl">Dr Sasa says</div><div class="tip-text">Work through past papers and your formula sheet while these notes are finalised. The DBE website has papers from 2015-2024.</div></div></div></div>';
    overlay.classList.add('open');return;
  }
  var html='';
  data.secs.forEach(function(s){html+='<div class="nm-section"><div class="nm-section-title '+s.cl+'">'+s.t+'</div>'+s.body+'</div>'});
  if(data.tip)html+='<div class="tip-box"><div class="tip-icon">üë©‚Äçüè´</div><div><div class="tip-lbl">Dr Sasa\'s Exam Tip</div><div class="tip-text">'+data.tip.tx+'</div></div></div>';
  document.getElementById('nm-body').innerHTML=html;
  overlay.classList.add('open');
}
function closeNotes(){document.getElementById('notes-overlay').classList.remove('open')}
function toggleAns(btn){var a=btn.nextElementSibling;var sh=a.style.display==='block';a.style.display=sh?'none':'block';btn.textContent=sh?'Show Answer':'Hide Answer'}

// ‚ïê‚ïê‚ïê‚ïê AUDIO NOTIFICATIONS ‚ïê‚ïê‚ïê‚ïê
document.querySelectorAll('.ac-notify').forEach(function(b){b.addEventListener('click',function(){this.textContent='‚úì Will notify you!';this.style.color='#27AE60'})});

// ‚ïê‚ïê‚ïê‚ïê RESIZE ‚ïê‚ïê‚ïê‚ïê
window.addEventListener('resize',function(){if(treeCanvas){treeCanvas.width=treeCanvas.offsetWidth;treeCanvas.height=treeCanvas.offsetHeight}});
</script>
</body>
</html>
